"use strict";(self.webpackChunk_carbon_ai_chat_examples_web_components_basic=self.webpackChunk_carbon_ai_chat_examples_web_components_basic||[]).push([[241],{78887:function(e,t,n){n.d(t,{A:function(){return Pd},B:function(){return Qe},U:function(){return Ct},_:function(){return It},c:function(){return Dr},i:function(){return ke}});var a,s,i=n(17234),r=n(7378),o=n(70228),c=n(45913),l=n(24547),d=n(84249),u=n(37847),h=n(20518),g=n(57426),m=n(9489),p=n(22363),f=(n(73898),n(3698)),E=n(5846),_=n(83416),S=n(11975),v=n(40700),y=n(40504),C=n(65930),b=n(20669),A=n(93725),M=n(87747),I=n(68206),T=n(59431),w=n(2863),N=n(91780),R=n(1359),k=n(19646),x=n(19485),O=n(82872),P=n(54936),D=n(4265),L=(n(93267),n(94728)),B=(n(88651),n(6375),n(40186),n(95476),n(59732)),H=n(39202),W=n(99513),U=n(23136),$=(n(35981),n(41049),n(27351),n(67886)),F=n(58628),z=n(54383),q=n(46047),G=n(61584),V=(n(68632),n(32515),n(28244)),j=n(81618),Z=n(36887),Y=n(39133),K=(n(85302),n(90595),n(36800)),X=n(29476),Q=n(11323),J=n(61671),ee=n(44059),te=n(52894),ne=n(36868),ae=n(43411),se=n(9092),ie=n(52618),re=n(96027),oe=n(66786),ce=n(36417),le=n(39499),de=n(1810),ue=n(70795),he=(n(83907),n(5165)),ge=n(13737),me=n(73052),pe=n(14053),fe=n(31418),Ee=n(20850),_e=(n(17661),n(32646)),Se=n(8531),ve=n(77194),ye=n(74944),Ce=n(27358),be=n(79575),Ae=n(69691),Me=(n(94463),n(71060)),Ie=(n(62218),n(1678)),Te=n(94523),we=n(55720);function Ne(e,t){let n,a,s=!1;return(...i)=>(s&&function(e,t,n){if(n)return n(e,t);if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(i,n,t)||(s=!0,n=i,a=e(...i)),a)}function Re(e,t){const[n,a]=e,[s,i]=t;if(n===s&&a===i)return!0;if(n.length!==s.length)return!1;for(let e=0;e<=n.length;e++){const t=n[e],r=s[e];if(t!==r)return!1;if(a[t]!==i[r])return!1}return!0}!function(e){e.NONE="none",e.FADE_IN="fadeIn",e.SLIDE_IN_FROM_LEFT="slideInFromLeft",e.SLIDE_IN_FROM_RIGHT="slideInFromRight",e.SLIDE_IN_FROM_BOTTOM="slideInFromBottom",e.BRANDING_SLIDE_IN_FROM_BOTTOM="brandingSlideInFromBottom"}(a||(a={})),function(e){e.NONE="none",e.FADE_OUT="fadeOut",e.SLIDE_OUT_TO_LEFT="slideOutToLeft",e.SLIDE_OUT_TO_RIGHT="slideOutToRight",e.SLIDE_OUT_TO_TOP="slideOutToTop",e.SLIDE_OUT_TO_BOTTOM="slideOutToBottom"}(s||(s={}));const ke="undefined"!=typeof window&&"undefined"!=typeof navigator;let xe=0,Oe=0;ke&&(xe=window.screen.width,Oe=window.screen.height);const Pe=ke&&/iPad|iPhone|iPod/.test(navigator.userAgent),De=ke&&/Android/.test(navigator.userAgent),Le=Pe||De,Be=Le&&(xe<500||Oe<500),He=Be&&xe<500;const We=Ne(function(){if(!ke||!window.sessionStorage)return!1;try{return window.sessionStorage.setItem("web-chat-test-item","true"),window.sessionStorage.getItem("web-chat-test-item"),window.sessionStorage.removeItem("web-chat-test-item"),!0}catch{return!1}});function Ue(e){try{return new URL(e).hostname}catch{return e}}function $e(e,t){return t?setTimeout(e,t):(e(),null)}const Fe=r.createContext(!1);function ze(e){const{hidden:t,children:n,className:a,...s}=e;return r.createElement(Fe.Provider,{value:t},r.createElement("div",{className:f(a,{WAC__hidden:t}),...s},n))}var qe;!function(e){e.MAIN="main",e.DISCLAIMER="disclaimer",e.HOME_SCREEN="home_screen",e.HYDRATING="hydrating",e.CATASTROPHIC="catastrophic",e.IFRAME="iframe",e.CONVERSATIONAL_SEARCH_CITATION="conversational_search_citation",e.CUSTOM="custom",e.SHOW_PANEL="show_panel",e.PANEL_RESPONSE="panel_response"}(qe||(qe={}));class Ge extends r.PureComponent{constructor(){super(...arguments),this.state={isClosing:!1,isOpening:!1},this.openPanelTimeout=null,this.closePanelTimeout=null,this.openPanel=()=>{const{onOpenEnd:e,onOpenStart:t,animationOnOpen:n,animationDurationOpen:s}=this.props;t?.(),this.setState({isClosing:!1,isOpening:!0});const i=n===a.NONE?0:s||240;this.openPanelTimeout=$e(()=>{this.setState({isClosing:!1,isOpening:!1}),e?.()},i)},this.closePanel=()=>{const{onCloseEnd:e,onCloseStart:t,animationOnClose:n,animationDurationClose:a}=this.props;t?.(),this.setState({isClosing:!0,isOpening:!1});const i=n===s.NONE?0:a||240;this.closePanelTimeout=$e(()=>{this.setState({isClosing:!1,isOpening:!1}),e?.()},i)}}componentDidMount(){const{shouldOpen:e}=this.props;e&&this.openPanel()}componentDidUpdate(e){const{shouldOpen:t}=this.props;t!==e.shouldOpen&&(t?this.openPanel():this.closePanel())}componentWillUnmount(){this.openPanelTimeout&&clearTimeout(this.openPanelTimeout),this.closePanelTimeout&&clearTimeout(this.closePanelTimeout),this.props.shouldOpen&&(this.props.onCloseStart&&this.props.onCloseStart(),this.props.onCloseEnd&&this.props.onCloseEnd())}render(){const{children:e,className:t,shouldOpen:n,animationOnClose:a,animationOnOpen:s,overlayPanelName:i}=this.props,{isClosing:o,isOpening:c}=this.state;return r.createElement(ze,{hidden:!o&&!n,className:f("WAC__overlay-panelContainer",`WAC__overlay--${i}`,t,{"WAC__overlay-panelContainer--animating":c||o})},r.createElement("div",{className:f("WAC__overlay-panel",`WAC__overlay-panel--${i}`,{[`WAC__overlay-panel--closing--${a}`]:o,"WAC__overlay-panel--closed":!o&&!n,[`WAC__overlay-panel--opening--${s}`]:c,"WAC__overlay-panel--open":!c&&n})},e))}}var Ve,je,Ze,Ye,Ke,Xe,Qe,Je,et,tt,nt,at,st,it,rt,ot,ct,lt,dt,ut,ht,gt,mt,pt,ft,Et,_t,St,vt,yt,Ct,bt,At,Mt={ai_slug_title:"Powered by IBM watsonx",ai_slug_description:"IBM watsonx is powered by the latest AI models to intelligently process conversations and provide help whenever and wherever you may need it.",components_overflow_ariaLabel:"Open and close list of options",components_swiper_currentLabel:"{currentSlideNumber}/{totalSlideCount}",errors_communicating:"{botName} isn't available right now. Problems with a related system are preventing the data from being supplied.",errors_imageSource:"Image is not available.",errors_videoSource:"Video is not available.",errors_audioSource:"Audio is not available.",errors_iframeSource:"The web page is not available.",errors_singleMessage:"There is an error with the message you just sent, but feel free to ask me something else.",errors_ariaMessageRetrying:"We are having some trouble sending your message but are still trying",errors_ariaMessageFailed:"Your message failed to be sent",errors_noHumanAgentsAvailable:"No agents are available.",errors_noHumanAgentsJoined:"No agents accepted the chat",errors_connectingToHumanAgent:"I'm sorry. Something went wrong and I cannot connect you to an agent right now.",errors_busy:"I'm sorry, but I can't help you right now. I'm answering questions from lots of people at the moment. Please try again later.",errors_agentAppSessionExpired:"I'm sorry, but access to the chat history has expired.",errors_generalContent:"There was an error displaying this content",errors_somethingWrong:"Something went wrong",input_ariaLabel:"Message to send",input_placeholder:"Type something...",input_buttonLabel:"Click to send message",input_uploadButtonLabel:"Add files to upload",window_title:"Chat window",window_ariaChatRegion:"Chat",window_ariaChatRegionNamespace:"Chat {namespace}",window_ariaWindowOpened:"The chat window has been opened",window_ariaWindowClosed:"The chat window has been closed",window_ariaWindowLoading:"The chat is loading.",launcher_isOpen:"Close the chat window",launcher_isClosed:"Open the chat window",launcher_desktopGreeting:"Hi! I’m a virtual assistant. How can I help you today?",launcher_mobileGreeting:"Hi! How can I help you today?",launcher_ariaIsExpanded:"Close the chat launcher",launcher_closeButton:"Close",messages_youSaid:"You said",messages_botSaid:"{botName} said",messages_agentSaid:"The live agent said",messages_searchResults:"Search results",messages_searchResultsLink:"Open this search result in a new window",messages_searchResultsOpenDocument:"Open document",messages_searchResultsOpenDocumentWithLabel:'Open document "{documentName}"',messages_searchResultsExpand:"Expand",messages_searchResultsCollapse:"Collapse",messages_botIsLoading:"{botName} is thinking",messages_agentIsTyping:"The live agent is typing",messages_scrollHandle:"Chat history begin",messages_scrollHandleDetailed:"Chat history begin. Activate to focus the first message then use the arrow, home, and end keys to move between messages. Press escape to exit.",messages_scrollHandleEnd:"Chat history end",messages_scrollHandleEndDetailed:"Chat history end. Activate to focus the last message then use the arrow, home, and end keys to move between messages. Press escape to exit.",messages_scrollMoreButton:"Scroll to bottom",message_labelBot:"{actorName} {timestamp}",message_labelYou:"You {timestamp}",notifications_toastClose:"Close notification",buttons_restart:"Restart conversation",buttons_cancel:"Cancel",buttons_retry:"Retry",options_select:"Select an option",options_ariaOptionsDisabled:"These options are disabled and cannot be selected",header_previewLinkTitle:"Assistant preview",header_ariaCloseRestart:"End chat and close the window",header_ariaBotAvatar:"{botName} avatar image",header_overflowMenu_options:"Options",homeScreen_returnToAssistant:"Return to assistant",homeScreen_returnToHome:"Return to the home screen",homeScreen_overflowMenuHomeScreen:"Home screen",homeScreen_ariaQuickStartListButton:"Quick start menu",homeScreen_ariaQuickStartListOpened:"The quick start menu has been opened.",homeScreen_ariaQuickStartListClosed:"The quick start menu has been closed.",default_agent_availableMessage:"Request an agent, and I'll notify you when they're ready. Your wait time may vary based on availability.",default_agent_unavailableMessage:"Sorry, no agents are available right now.",agent_reason_error:"Hmmm... I'm experiencing some difficulties. I need a human agent to manually continue the chat.",agent_sdMissingWarning:'No service desk is configured. Unless you have a custom service desk implemented, users will see an error instead of the message below. See the <a href="https://cloud.ibm.com/docs/watson-assistant?topic=watson-assistant-deploy-web-chat-haa" rel="noreferrer noopener" target="_blank">documentation</a> for more information.',agent_noName:"Live agent",agent_chatTitle:"Live agent support",agent_startChat:"Connect to agent",agent_connecting:"Request for agent sent...",agent_agentNoNameTitle:"Agent",agent_agentJoinedName:"{personName} connected.",agent_agentJoinedNoName:"A live agent connected.",agent_youConnectedWarning:"If you refresh or leave the current page, you'll have to request a new agent.",agent_connectingMinutes:"Current wait time is <b>{time, number} {time, plural, one {minute} other {minutes}}</b>.",agent_connectingQueue:"You're number <b>{position, number}</b> in line.",agent_ariaHumanAgentAvatar:"Live agent avatar image",agent_ariaGenericAvatar:"Avatar image",agent_ariaGenericBotAvatar:"Avatar image",agent_youEndedChat:"You disconnected from the live agent.",agent_conversationWasEnded:"You disconnected from the live agent.",agent_disconnected:"Something went wrong and your connection to the live agent was lost. Check your internet connection and then try again to connect to an agent.",agent_reconnected:"The agent reconnected.",agent_agentLeftChat:"{personName} disconnected.",agent_agentLeftChatNoName:"The live agent disconnected.",agent_agentEndedChat:"{personName} ended the chat.",agent_agentEndedChatNoName:"The live agent ended the chat.",agent_transferring:"You're being transferred.",agent_transferringNoName:"You're being transferred.",agent_endChat:"Disconnect from live agent?",agent_confirmSuspendedEndChatTitle:"Disconnect from previous agent?",agent_confirmSuspendedEndChatMessage:"You are currently connected to an agent. Continuing will disconnect you from the agent and connect you to a new one. Do you want to continue?",agent_confirmCancelRequestTitle:"Cancel request?",agent_confirmCancelRequestMessage:"If you continue, you'll cancel your request for an agent.",agent_confirmCancelRequestNo:"Go back",agent_confirmCancelRequestYes:"Cancel request",agent_confirmEndChat:"If you disconnect, you'll have to request a new live agent.",agent_confirmEndChatNo:"Go back",agent_confirmEndChatYes:"Disconnect",agent_confirmEndSuspendedYes:"Continue",agent_botReturned:"Can I help you with anything else?",agent_newMessage:"New message",agent_cardButtonChatRequested:"Connecting...",agent_cardButtonConnected:"Connected",agent_cardButtonChatEnded:"Disconnected",agent_cardMessageChatEnded:"You disconnected from the live agent.",agent_cardMessageConnected:"You're now connected.",agent_connectButtonCancel:"Cancel",agent_connectedButtonEndChat:"Disconnect",agent_connectWaiting:"Waiting...",agent_defaultMessageToHumanAgent:"Begin conversation",agent_inputPlaceholderConnecting:"Waiting for agent...",agent_inputPlaceholderReconnecting:"Reconnecting to agent...",agent_sharingStopSharingButton:"Stop sharing screen",agent_sharingRequestTitle:"Screen sharing",agent_sharingRequestMessage:"The agent has requested you share your screen. You can stop sharing at any time.",agent_sharingAcceptButton:"Share screen",agent_sharingDeclineButton:"Decline",agent_sharingRequested:"You were requested to share your screen.",agent_sharingAccepted:"You shared your screen.",agent_sharingDeclined:"You declined to share your screen.",agent_sharingCancelled:"The screen sharing request was cancelled.",agent_sharingEnded:"You stopped sharing your screen.",agent_suspendedWarning:"You are currently connected to an agent.",icon_ariaUnreadMessages:"There {count, plural, one {is} other {are}} {count, number} unread {count, plural, one {message} other {messages}}",showMore:"See more",showMoreResults:"See more",disclaimer_title:"Disclaimer",disclaimer_accept:"I accept",general_ariaCloseInformationOverlay:"Close information panel.",general_ariaAnnounceOpenedInformationOverlay:"An information panel has been opened.",general_ariaAnnounceClosedInformationOverlay:"An information panel has been closed.",general_ariaAnnounceEscapeOverlay:"Press escape or click the close button to close.",general_returnToAssistant:"Return to assistant",conversationalSearch_streamingIncomplete:"This message was not completed. Please try again.",conversationalSearch_viewSourceDocument:"View source",conversationalSearch_citationsLabel:"Sources",conversationalSearch_toggleCitations:"Open or close the list of sources",conversationalSearch_responseStopped:"Response stopped",launcher_chatNow:"Chat now",iframe_ariaSourceLoaded:"The web page has loaded.",iframe_ariaImageAltText:"Preview image for the web page panel.",iframe_ariaClosePanel:"Close the web page panel.",iframe_ariaOpenedPanel:"Web page panel has opened.",iframe_ariaClosedPanel:"Web page panel has closed.",iframe_ariaClickPreviewCard:"Click to open the web page panel and visit {source}.",closeAndRestartModal_title:"End chat",closeAndRestartModal_message:"Are you sure you want to end your chat?",closeAndRestartModal_confirm:"Yes",closeAndRestartModal_cancel:"No",datePicker_chooseDate:"Choose a date ({format})",datePicker_confirmDate:"Confirm date",fileSharing_fileTooLarge:"The maximum file size allowed is {maxSize}.",fileSharing_ariaAnnounceSuccess:"The file was uploaded successfully.",fileSharing_fileIcon:"File icon",fileSharing_removeButtonTitle:"Remove file",fileSharing_statusUploading:"Uploading file",fileSharing_uploadFailed:"There was an error uploading the file.",fileSharing_agentMessageText:"File upload",fileSharing_request:"The agent has requested you upload a file.",carousel_prevNavButton:"Go to previous slide.",carousel_nextNavButton:"Go to next slide.",input_completionsTagApp:"App",input_completionsTagAssistant:"Assistant",table_filterPlaceholder:"Filter table",table_previousPage:"Previous page",table_nextPage:"Next page",table_itemsPerPage:"Items per page:",table_paginationSupplementalText:"of {pagesCount, number} {pagesCount, plural, one {page} other {pages}}",table_paginationStatus:"{start, number}–{end, number} of {count, number} {count, plural, one {item} other {items}}",feedback_positiveLabel:"Good response",feedback_negativeLabel:"Bad response",feedback_defaultTitle:"Additional feedback",feedback_defaultPrompt:"Why did you choose this rating?",feedback_defaultPlaceholder:"Add a comment",feedback_submitLabel:"Submit",feedback_cancelLabel:"Cancel",input_stopResponse:"Stop response",messages_responseStopped:"Response stopped",chainOfThought_stepTitle:"{stepNumber, number}: {stepTitle}",chainOfThought_inputLabel:"Input",chainOfThought_outputLabel:"Output",chainOfThought_toolLabel:"Tool",chainOfThought_statusSucceededLabel:"Succeeded",chainOfThought_statusFailedLabel:"Failed",chainOfThought_statusProcessingLabel:"Processing",chainOfThought_explainabilityLabel:"How did I get this answer?"};function It(e,t,n,a){var s,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r}function Tt(e){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}!function(e){e.COMPLETE="complete",e.EDIT="edit",e.UPLOADING="uploading",e.SUCCESS="success"}(Ve||(Ve={})),function(e){e.LAUNCHER="launcher",e.MAIN_WINDOW="mainWindow"}(je||(je={})),function(e){e.DESKTOP="desktop",e.MOBILE="mobile"}(Ze||(Ze={})),function(e){e.BASE_HEIGHT="BASE-height",e.BASE_MAX_HEIGHT="BASE-max-height",e.BASE_WIDTH="BASE-width",e.BASE_Z_INDEX="BASE-z-index"}(Ye||(Ye={})),function(e){e.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT="aiTooltipAfterDescriptionElement",e.WELCOME_NODE_BEFORE_ELEMENT="welcomeNodeBeforeElement",e.HEADER_BOTTOM_ELEMENT="headerBottomElement",e.BEFORE_INPUT_ELEMENT="beforeInputElement",e.HOME_SCREEN_BEFORE_INPUT_ELEMENT="homeScreenBeforeInputElement",e.HOME_SCREEN_AFTER_STARTERS_ELEMENT="homeScreenAfterStartersElement",e.HOME_SCREEN_HEADER_BOTTOM_ELEMENT="homeScreenHeaderBottomElement",e.CUSTOM_PANEL_ELEMENT="customPanelElement"}(Ke||(Ke={})),function(e){e.ROUND="round",e.SQUARE="square"}(Xe||(Xe={})),function(e){e.CLOSE_PANEL_BUTTON_TOGGLED="closePanelButton:toggled",e.PRE_RECEIVE="pre:receive",e.RECEIVE="receive",e.PRE_SEND="pre:send",e.SEND="send",e.VIEW_PRE_CHANGE="view:pre:change",e.VIEW_CHANGE="view:change",e.MESSAGE_ITEM_CUSTOM="messageItemCustom",e.USER_DEFINED_RESPONSE="userDefinedResponse",e.HISTORY_BEGIN="history:begin",e.HISTORY_END="history:end",e.PRE_RESTART_CONVERSATION="pre:restartConversation",e.RESTART_CONVERSATION="restartConversation",e.CHAT_READY="chat:ready",e.CUSTOM_PANEL_PRE_OPEN="customPanel:pre:open",e.CUSTOM_PANEL_OPEN="customPanel:open",e.CUSTOM_PANEL_PRE_CLOSE="customPanel:pre:close",e.CUSTOM_PANEL_CLOSE="customPanel:close",e.HUMAN_AGENT_PRE_RECEIVE="human_agent:pre:receive",e.HUMAN_AGENT_RECEIVE="human_agent:receive",e.HUMAN_AGENT_PRE_SEND="human_agent:pre:send",e.HUMAN_AGENT_SEND="human_agent:send",e.HUMAN_AGENT_PRE_START_CHAT="human_agent:pre:startChat",e.HUMAN_AGENT_PRE_END_CHAT="human_agent:pre:endChat",e.HUMAN_AGENT_END_CHAT="human_agent:endChat",e.HUMAN_AGENT_ARE_ANY_AGENTS_ONLINE="human_agent:areAnyAgentsOnline",e.CHUNK_USER_DEFINED_RESPONSE="chunk:userDefinedResponse",e.FEEDBACK="feedback",e.STOP_STREAMING="stopStreaming"}(Qe||(Qe={})),function(e){e.WEB_CHAT_LOADED="webChatLoaded",e.LAUNCHER_CLICKED="launcherClicked",e.MAIN_WINDOW_MINIMIZED="mainWindowMinimized",e.MAIN_WINDOW_CLOSED_AND_RESTARTED="mainWindowClosedAndRestarted",e.CALLED_CHANGE_VIEW="calledChangeView"}(Je||(Je={})),function(e){e.MESSAGE_INPUT="messageInput",e.HOME_SCREEN_INPUT="homeScreenInput",e.OPTION_BUTTON="optionButton",e.OPTION_DROP_DOWN="optionDropDown",e.HYDRATE_RESEND="hydrateResend",e.HISTORY_UPDATE="historyUpdate",e.INSTANCE_SEND="instanceSend",e.DATE_PICKER="datePicker",e.POST_BACK_BUTTON="postBackButton",e.HOME_SCREEN_STARTER="homeScreenStarter",e.WELCOME_REQUEST="welcomeRequest",e.EVENT="event",e.OTHER="other"}(et||(et={})),function(e){e.DETAILS_OPENED="detailsOpened",e.DETAILS_CLOSED="detailsClosed",e.SUBMITTED="submitted"}(tt||(tt={})),function(e){e.DEFAULT_LAUNCHER="default_launcher",e.OPEN_BY_DEFAULT="open_by_default",e.SESSION_HISTORY="session_history"}(nt||(nt={})),function(e){e.DEFAULT_MINIMIZE="default_minimize",e.MAIN_WINDOW_CLOSED_AND_RESTARTED="main_window_closed_and_restarted"}(at||(at={})),function(e){e.NONE="none",e.SOLID="solid"}(st||(st={})),function(e){e.CLOSE="close",e.MINIMIZE="minimize",e.SIDE_PANEL_LEFT="side-panel-left",e.SIDE_PANEL_RIGHT="side-panel-right"}(it||(it={})),function(e){e.WHITE="white",e.G10="g10",e.G90="g90",e.G100="g100"}(rt||(rt={})),function(e){e.CARBON_AI="CarbonAI",e.WHITE_LABEL="WhiteLabel"}(ot||(ot={})),function(e){e.MESSAGE_COMMUNICATION="MESSAGE_COMMUNICATION",e.RENDER="RENDER",e.INTEGRATION_ERROR="INTEGRATION_ERROR",e.HYDRATION="HYDRATION"}(ct||(ct={})),function(e){e.ONLINE="online",e.OFFLINE="offline",e.UNKNOWN="unknown"}(lt||(lt={})),function(e){e.ACCEPTED="accepted",e.DECLINED="declined",e.CANCELLED="cancelled",e.ENDED="ended"}(dt||(dt={})),function(e){e[e.CONNECTING=1]="CONNECTING",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.USER_MESSAGE=3]="USER_MESSAGE"}(ut||(ut={})),function(e){e.TEXT="text",e.EVENT="event"}(ht||(ht={})),function(e){e.FILE="file"}(gt||(gt={})),function(e){e.TEXT="text",e.OPTION="option",e.CONNECT_TO_HUMAN_AGENT="connect_to_agent",e.IMAGE="image",e.PAUSE="pause",e.USER_DEFINED="user_defined",e.IFRAME="iframe",e.VIDEO="video",e.AUDIO="audio",e.DATE="date",e.TABLE="table",e.INLINE_ERROR="inline_error",e.CARD="card",e.CAROUSEL="carousel",e.BUTTON="button",e.GRID="grid",e.CONVERSATIONAL_SEARCH="conversational_search"}(mt||(mt={})),function(e){e.INLINE_ERROR="inline_error",e.FROM_HUMAN_AGENT="from_agent",e.FROM_USER="from_user",e.HUMAN_AGENT_LEFT_CHAT="agent_left_chat",e.HUMAN_AGENT_ENDED_CHAT="agent_ended_chat",e.HUMAN_AGENT_JOINED="agent_joined",e.RELOAD_WARNING="user_connected_warning",e.TRANSFER_TO_HUMAN_AGENT="transfer_to_agent",e.USER_ENDED_CHAT="user_ended_chat",e.CHAT_WAS_ENDED="chat_was_ended",e.DISCONNECTED="disconnected",e.RECONNECTED="reconnected",e.SHARING_REQUESTED="sharing_requested",e.SHARING_ACCEPTED="sharing_accepted",e.SHARING_DECLINED="sharing_declined",e.SHARING_CANCELLED="sharing_cancelled",e.SHARING_ENDED="sharing_ended",e.SYSTEM="system"}(pt||(pt={})),function(e){e.PROCESSING="processing",e.FAILURE="failure",e.SUCCESS="success"}(ft||(ft={})),function(e){e.DROPDOWN="dropdown",e.BUTTON="button"}(Et||(Et={})),function(e){e.INLINE="inline",e.PANEL="panel"}(_t||(_t={})),function(e){e.POST_BACK="post_back",e.CUSTOM_EVENT="custom_event",e.SHOW_PANEL="show_panel",e.URL="url"}(St||(St={})),function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(vt||(vt={})),function(e){e.DEFAULT="default",e.SECONDARY="secondary",e.TERTIARY="tertiary",e.DANGER="danger",e.LINK="link"}(yt||(yt={})),function(e){e.HUMAN="human",e.BOT="bot",e.WATSONX="watsonx"}(Ct||(Ct={})),function(e){e[e.NONE=1]="NONE",e[e.FAILED=2]="FAILED",e[e.FAILED_WHILE_STREAMING=3]="FAILED_WHILE_STREAMING",e[e.RETRYING=4]="RETRYING",e[e.WAITING=5]="WAITING"}(bt||(bt={})),"function"==typeof SuppressedError&&SuppressedError,function(e){e[e.MISCELLANEOUS=1]="MISCELLANEOUS",e[e.LOCAL_MESSAGE=2]="LOCAL_MESSAGE",e[e.MESSAGE=3]="MESSAGE",e[e.COMPONENT=4]="COMPONENT",e[e.USER=6]="USER",e[e.DEVICE_ID=8]="DEVICE_ID",e[e.FILE=9]="FILE"}(At||(At={}));const wt="CHANGE_STATE",Nt="UPDATE_BOT_NAME",Rt="UPDATE_BOT_AVATAR_URL",kt="UPDATE_LAUNCHER_AVATAR_URL",xt="UPDATE_MAIN_HEADER_TITLE",Ot="HYDRATE_CHAT",Pt="HYDRATE_MESSAGE_HISTORY",Dt="ADD_LOCAL_MESSAGE_ITEM",Lt="REMOVE_MESSAGES",Bt="UPDATE_LOCAL_MESSAGE_ITEM",Ht="SET_APP_STATE_VALUE",Wt="ADD_IS_LOADING_COUNTER",Ut="ADD_IS_HYDRATING_COUNTER",$t="SET_VIEW_STATE",Ft="SET_VIEW_CHANGING",zt="SET_INITIAL_VIEW_CHANGE_COMPLETE",qt="UPDATE_CSS_VARIABLES",Gt="MESSAGE_SET_OPTION_SELECTED",Vt="SET_MESSAGE_UI_PROPERTY",jt="SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY",Zt="SET_MESSAGE_RESPONSE_HISTORY_PROPERTY",Yt="MERGE_HISTORY",Kt="SET_LAUNCHER_PROPERTY",Xt="SET_LAUNCHER_CONFIG_PROPERTY",Qt="ANNOUNCE_MESSAGE",Jt="SET_CHAT_MESSAGES_PROPERTY",en="RESTART_CONVERSATION",tn="ACCEPTED_DISCLAIMER",nn="ADD_MESSAGE",an="UPDATE_HOME_SCREEN_CONFIG",sn="UPDATE_HAS_SENT_NON_WELCOME_MESSAGE",rn="UPDATE_PERSISTED_CHAT_STATE",on="SET_HOME_SCREEN_IS_OPEN",cn="UPDATE_LAUNCHER_CONFIG",ln="UPDATE_MESSAGE",dn="SET_LAUNCHER_MINIMIZED",un="CLOSE_IFRAME_PANEL",hn="OPEN_IFRAME_CONTENT",gn="SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN",mn="SET_CUSTOM_PANEL_OPTIONS",pn="SET_CUSTOM_PANEL_OPEN",fn="GO_BACK_TO_HOME",En="UPDATE_INPUT_STATE",_n="SET_IS_PAGE_VISIBLE",Sn="ADD_INPUT_FILE",vn="CLEAR_INPUT_FILES",yn="REMOVE_INPUT_FILE",Cn="REMOVE_LOCAL_MESSAGE_ITEM",bn="FILE_UPLOAD_INPUT_ERROR",An="ADD_NESTED_MESSAGES",Mn="SET_RESPONSE_PANEL_IS_OPEN",In="SET_PANEL_RESPONSE_CONTENT",Tn="STREAMING_ADD_CHUNK",wn="STREAMING_START",Nn="STREAMING_MERGE_MESSAGE_OPTIONS",Rn="ADD_NOTIFICATION",kn="REMOVE_ALL_NOTIFICATIONS",xn="REMOVE_NOTIFICATIONS",On="UPDATE_CHAT_HEADER_CONFIG",Pn="SET_STOP_STREAMING_BUTTON_VISIBLE",Dn="SET_STOP_STREAMING_BUTTON_DISABLED",Ln="SET_STREAM_ID",Bn="UPDATE_MAIN_HEADER_AVATAR",Hn={changeState(e){return{type:wt,partialState:e}},chatWasHydrated(){return{type:Ot}},hydrateMessageHistory(e){return{type:Pt,messageHistory:e}},removeMessages(e){return{type:Lt,messageIDs:e}},restartConversation(){return{type:en}},addLocalMessageItem(e,t,n,a){return{type:Dt,messageItem:e,message:t,addMessage:n,addAfterID:a}},addMessage(e){return{type:nn,message:e}},updateLocalMessageItem(e){return{type:Bt,messageItem:e}},updateMessage(e){return{type:ln,message:e}},messageSetOptionSelected(e,t){return{type:Gt,messageID:e,sentMessage:t}},updatePersistedChatState(e){return{type:rn,chatState:e}},updateHasSentNonWelcomeMessage(e){return{type:sn,hasSentNonWelcomeMessage:e}},setAppStateValue(e,t){return{type:Ht,key:e,value:t}},addIsTypingCounter(e){return{type:"ADD_IS_TYPING_COUNTER",addToIsTyping:e}},addIsLoadingCounter(e){return{type:Wt,addToIsLoading:e}},addIsHydratingCounter(e){return{type:Ut,addToIsHydrating:e}},updateBotName(e){return{type:Nt,name:e}},updateMainHeaderTitle(e){return{type:xt,title:e}},updateBotAvatarURL(e){return{type:Rt,url:e}},updateCSSVariables(e,t,n){return{type:qt,variables:e,publicVars:t,whiteLabelVariables:n}},updateHomeScreenConfig(e){return{type:an,homeScreenConfig:e}},setViewState(e){return{type:$t,viewState:e}},setViewChanging(e){return{type:Ft,viewChanging:e}},setInitialViewChangeComplete(e){return{type:zt,changeComplete:e}},setMessageUIProperty(e,t,n){return{type:Vt,localMessageID:e,propertyName:t,propertyValue:n}},setLauncherProperty(e,t){return{type:Kt,propertyName:e,propertyValue:t}},setLauncherConfigProperty(e,t,n){return{type:Xt,propertyName:e,propertyValue:t,launcherType:n}},setMessageResponseHistoryProperty(e,t,n){return{type:Zt,messageID:e,propertyName:t,propertyValue:n}},setMessageUIStateInternalProperty(e,t,n){return{type:jt,messageID:e,propertyName:t,propertyValue:n}},mergeMessageHistory(e,t){return{type:Yt,messageID:e,history:t}},setMessageErrorState(e,t){return Hn.setMessageResponseHistoryProperty(e,"error_state",t)},setMessageWasAnnounced(e){return Hn.setMessageUIProperty(e,"needsAnnouncement",!1)},announceMessage(e){return{type:Qt,message:e}},setChatMessagesStateProperty(e,t){return{type:Jt,propertyName:e,propertyValue:t}},addNotification(e){const t=Tt();return{type:Rn,notificationID:t,notification:e}},removeNotifications({groupID:e,notificationID:t}){return{type:xn,groupID:e,notificationID:t}},removeAllNotifications(){return{type:kn}},acceptDisclaimer(){return{type:tn}},setHomeScreenIsOpen(e){return{type:on,isOpen:e}},updateLauncherConfig(e){return{type:cn,launcherConfig:e}},setLauncherMinimized(){return{type:dn}},closeIFramePanel(){return{type:un}},setIFrameContent(e){return{type:hn,messageItem:e}},setViewSourcePanelIsOpen(e,t,n){return{type:gn,isOpen:e,citationItem:t,relatedSearchResult:n}},setCustomPanelConfigOptions(e){return{type:mn,options:e}},setCustomPanelOpen(e){return{type:pn,isOpen:e}},toggleHomeScreen(){return{type:fn}},updateInputState(e,t){return{type:En,newState:e,isInputToHumanAgent:t}},setIsBrowserPageVisible(e){return{type:_n,isVisible:e}},addInputFile(e,t){return{type:Sn,file:e,isInputToHumanAgent:t}},removeFileUpload(e,t){return{type:yn,fileID:e,isInputToHumanAgent:t}},removeLocalMessageItem(e){return{type:Cn,localMessageItemID:e}},fileUploadInputError(e,t,n){return{type:bn,fileID:e,errorMessage:t,isInputToHumanAgent:n}},clearInputFiles(e){return{type:vn,isInputToHumanAgent:e}},addNestedMessages(e){return{type:An,localMessageItems:e}},setResponsePanelIsOpen(e){return{type:Mn,isOpen:e}},setResponsePanelContent(e,t=!1){return{type:In,localMessageItem:e,isMessageForInput:t}},streamingStart(e){return{type:wn,messageID:e}},streamingMergeMessageOptions(e,t){return{type:Nn,messageID:e,message_options:t}},streamingAddChunk(e,t,n,a){return{type:Tn,fullMessageID:e,chunkItem:t,isCompleteItem:n,disableFadeAnimation:a}},updateChatHeaderConfig(e){return{type:On,chatHeaderConfig:e}},setStopStreamingButtonVisible(e){return{type:Pn,isVisible:e}},setStopStreamingButtonDisabled(e){return{type:Dn,isDisabled:e}},setStreamID(e){return{type:Ln,currentStreamID:e}},updateMainHeaderAvatar(e){return{type:Bn,config:e}}};function Wn(e){const t=(e=>e.humanAgentState)(e),n=(e=>e.persistedToBrowserStorage.chatState.humanAgentState)(e);if(n.isSuspended)return{isConnectingOrConnected:!1,disableInput:!1,isHumanAgentTyping:!1,inputPlaceholderKey:null};const{isReconnecting:a,isConnecting:s,isHumanAgentTyping:i}=t,{isConnected:r}=n;let o;return o=s?"agent_inputPlaceholderConnecting":a?"agent_inputPlaceholderReconnecting":null,{isHumanAgentTyping:i,isConnectingOrConnected:s||r,disableInput:s||a,inputPlaceholderKey:o}}function Un(e){return Wn(e).isConnectingOrConnected}function $n(e){return Un(e)?(e=>e.humanAgentState.inputState)(e):(e=>e.botInputState)(e)}var Fn;function zn(e){let t=e;return e?.starters?.buttons?.length&&(t={allow_return:!0,...e,starters:{...e.starters,buttons:e.starters.buttons.filter(e=>Boolean(e.label?.trim()))}},t?.starters?.buttons?.length||(t.starters.is_on=!1)),t}!function(e){e.NARROW="narrow",e.STANDARD="standard",e.WIDE="wide"}(Fn||(Fn={}));const qn=String.fromCharCode(8207),Gn=2e4,Vn="wac-default-panel";function jn(){throw Error("Not implemented.")}var Zn;!function(e){e.PRIMARY="primary",e.ACCENT="accent"}(Zn||(Zn={}));async function Yn(e){await new Promise(t=>{setTimeout(t,e)})}function Kn(e,t,n){const a=new Promise((e,a)=>{setTimeout(()=>{a(n||`The operation timed out after ${t}ms`)},t)});return Promise.race([e,a])}let Xn=!1;function Qn(){return Xn}async function Jn(e){try{if(e)return Kn(e.text(),2e3,"Getting response text")}catch(e){}}function ea(e,t,n,a){return{errorType:ct.RENDER,message:`${e}.componentDidCatch`,otherData:{error:t,errorInfo:n},catastrophicErrorType:a}}function ta(e=180){return 100/(320/e)+"%"}const na={ar:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,72895,19)),"ar-dz":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,64170,19)),"ar-kw":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,97146,19)),"ar-ly":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,33007,19)),"ar-ma":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,63846,19)),"ar-sa":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,39252,19)),"ar-tn":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,95318,19)),cs:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,6718,19)),de:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,97291,19)),"de-at":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,59873,19)),"de-ch":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,40767,19)),en:()=>Promise.resolve().then(n.t.bind(n,37847,19)),"en-au":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,44118,19)),"en-ca":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,4828,19)),"en-gb":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,61985,19)),"en-ie":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,80478,19)),"en-il":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,79413,19)),"en-nz":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,70120,19)),es:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,22020,19)),"es-do":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,10504,19)),"es-us":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,75849,19)),nl:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,8502,19)),fr:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,58640,19)),"fr-ca":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,62241,19)),"fr-ch":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,94090,19)),it:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,88549,19)),"it-ch":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,71937,19)),ja:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,22258,19)),ko:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,18,19)),pt:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,84064,19)),"pt-br":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,12241,19)),zh:()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,63614,19)),"zh-cn":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,63614,19)),"zh-tw":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,52202,19)),"zh-mo":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,52202,19)),"zh-hk":()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,52202,19))};async function aa(e){try{const t=function(e,t){const n=function(e,t){if(!e)return null;if(t[e=e.toLowerCase().replace(/_/g,"-")])return e;const n=e.substring(0,2);return t[n]?n:null}(e,t);if(n)return n;e&&JSON.stringify(Object.keys(t));return"en"}(e,na),n=await na[t]();if(n)return n.default}catch(e){}return u}async function sa(e){return e?(t=e,{...Mt,...t}):Mt;var t}function ia(e){return r.createElement("b",null,e)}function ra(){return r.createElement("br",null)}async function oa(e){if(!o.Ls[e]){const t=o.locale(),n=await aa(e);o.locale(n),o.locale(t);const a=Boolean(o.Ls[e]);if(!a&&2===e.length)throw Error("Locale is not recognized.");if(!a)return oa(e.substring(0,2))}return e}function ca(e,t,n){e.intl=(0,g.EY)({locale:t,messages:n}),e.store.dispatch(Hn.setAppStateValue("languagePack",n)),e.store.dispatch(Hn.setAppStateValue("locale",t))}function la(e){const t=new Set,n={get(e,n){return t.has(n)||t.add(n),e[n]}};return new Proxy(e.writeableElements,n)}function da(e,t,n=Tt(At.LOCAL_MESSAGE)){return{item:{response_type:mt.TEXT,...e.input},ui_state:{id:n,originalUserText:t,needsAnnouncement:!1},fullMessageID:e.id}}function ua(e){return Array.isArray(e)?e:[e]}async function ha(e,t){for(let n=0;n<e.length;n++){const a=e[n];await t(a,n,e)}}function ga(e){return e&&e.length?e[e.length-1]:null}const ma="main";function pa(e){return e&&void 0!==e.output}function fa(e){return e.id||(e.id=Tt(At.MESSAGE)),e.thread_id||(e.thread_id=ma),e.history||(e.history={}),e.ui_state_internal||(e.ui_state_internal={}),e.history.timestamp||(e.history.timestamp=Date.now()),void 0===e.ui_state_internal.from_history&&(e.ui_state_internal.from_history=!1),e}function Ea(e){return void 0!==e?.input}function _a(e){return e.response_type===mt.PAUSE&&1==e.typing}function Sa(e){return e.response_type===mt.PAUSE}function va(e){return e?.response_type===mt.OPTION&&void 0!==e.options}function ya(e,t){const n={id:Tt(At.MESSAGE),thread_id:ma,...(0,d.A)(e.value)};return n.history={label:e.label,related_message_id:t},n}function Ca(e){return fa({input:{text:e,message_type:ht.TEXT}})}function ba(e,t=ma,n=mt.TEXT,a){const s={response_type:n,text:e};return{id:Tt(At.MESSAGE),thread_id:t,output:{generic:[s]}}}function Aa(e,t){return fa({output:{generic:[e]}})}function Ma(e){return e?.response_type===mt.CONNECT_TO_HUMAN_AGENT}function Ia(e){return e?.response_type===mt.CARD}function Ta(e){return e?.response_type===mt.CAROUSEL}function wa(e){return e?.response_type===mt.BUTTON}function Na(e){return wa(e)&&e.button_type===St.SHOW_PANEL}function Ra(e){return wa(e)?ka(e.panel):Ia(e)?ka(e):Ta(e)?void 0!==e.items:Ba(e)}function ka(e){return void 0!==e?.body||void 0!==e?.footer}function xa(e){switch(e.response_type){case mt.TEXT:case mt.IMAGE:case mt.OPTION:case mt.CONNECT_TO_HUMAN_AGENT:case mt.IFRAME:case mt.VIDEO:case mt.AUDIO:case mt.DATE:case mt.CONVERSATIONAL_SEARCH:case mt.TABLE:case mt.INLINE_ERROR:case mt.CARD:case mt.CAROUSEL:case mt.BUTTON:case mt.GRID:return!1;default:return!0}}function Oa(e){return Boolean(e.public.serviceDeskFactory)}function Pa(e){switch(e.response_type){case mt.IMAGE:case mt.IFRAME:case mt.VIDEO:case mt.AUDIO:case mt.TEXT:case mt.USER_DEFINED:case mt.CARD:case mt.GRID:return!0;default:return!1}}function Da(e){return Ta(e)&&1===e.items.length}function La(e){return t=e,t?.response_type===mt.USER_DEFINED&&e.full_width;var t}function Ba(e){return e?.response_type===mt.GRID}function Ha(e){return Boolean(e.final_response)}function Wa(e,t){const n=t?.streaming_metadata?.id;return n?`${e}-${n}`:null}function Ua(e){return e.dimensions}function $a(e){return function(e,t,n){for(let a=e.length-1;a>=0;a--){const s=t[e[a]];if(n(s,a,e))return s}}(e.botMessageState.messageIDs||[],e.allMessagesByID,e=>pa(e)&&!function(e){return pa(e)&&Boolean(e.output.generic?.find(e=>e?.agent_message_type))||Ea(e)&&Boolean(e.input.agent_message_type)}(e)&&Boolean(e.context))}function Fa(e,t,n=!1,a=!1){const s={ui_state:{id:Wa(t.id,e)||Tt(At.LOCAL_MESSAGE),needsAnnouncement:!t.ui_state_internal?.from_history,disableFadeAnimation:a},item:e,fullMessageID:t.id};return n&&(s.ui_state.isWelcomeResponse=!0),s}function za(e){return function(e){const t=Aa(e),n=Fa(e,t);return{originalMessage:t,localMessage:n}}({response_type:mt.INLINE_ERROR,text:e})}function qa(e,t,n,a,s){const{item:i}=e;if(Ba(i))e.ui_state.gridLocalMessageItemIDs=i.rows.map(s=>s.cells.map(s=>{const i=[];return Ga("items",e,s.items,i,t,n,a,t=>Va(e.item,t),!1),i}));else if(Ta(i))e.ui_state.itemsLocalMessageItemIDs=[],Ga("items",e,i.items,e.ui_state.itemsLocalMessageItemIDs,t,n,a,e=>Va(i,e),s);else{const r=i.body||i.panel?.body;if(r&&(e.ui_state.bodyLocalMessageItemIDs=[],Ga("body",e,r,e.ui_state.bodyLocalMessageItemIDs,t,n,a,e=>Va(i,e),!Na(i))),!s)return;const o=i.footer||i.panel?.footer;o&&(e.ui_state.footerLocalMessageItemIDs=[],Ga("footer",e,o,e.ui_state.footerLocalMessageItemIDs,t,n,a,e=>function(e,t){if(wa(t))return!Na(e)||!Na(t);return!1}(i,e),!Na(i)))}}function Ga(e,t,n,a,s,i,r,o,c){n.forEach(e=>{if(o(e)){const t=Fa(e,s,!1,!0);a.push(t.ui_state.id),r.push(t),Ra(t.item)&&qa(t,s,i,r,c)}else t.item.response_type,e.response_type})}function Va(e,t){switch(e.response_type){case mt.CARD:return!Ia(t)&&Pa(t);case mt.CAROUSEL:return Ia(t);case mt.BUTTON:return e.button_type===St.SHOW_PANEL&&Pa(t);case mt.GRID:return!Ia(t)&&Pa(t);default:return!1}}const ja="HA_SET_HUMAN_AGENT_AVAILABILITY",Za="HA_SET_IS_CONNECTING",Ya="HA_SET_IS_RECONNECTING",Ka="HA_SET_HUMAN_AGENT_JOINED",Xa="HA_SET_HUMAN_AGENT_LEFT_CHAT",Qa="HA_END_CHAT",Ja="HA_UPDATE_CAPABILITIES",es="HA_UPDATE_FILE_UPLOAD_IN_PROGRESS",ts="HA_SET_SHOW_SCREEN_SHARE_REQUEST",ns="HA_SET_IS_SCREEN_SHARING",as="HA_SET_PERSISTED_STATE",ss="HA_UPDATE_IS_SUSPENDED",is="HA_UPDATE_IS_TYPING";function rs(e,t){return{type:Za,isConnecting:e,localMessageID:t}}function os(e){return{type:Ya,isReconnecting:e}}function cs(){return{type:Qa}}function ls(e){return{type:Ka,responseUserProfile:e}}function ds(e){return{type:es,fileUploadInProgress:e}}function us(e){return{type:ts,showRequest:e}}function hs(e){return{type:ns,isSharing:e}}const gs="0.5.1";var ms;!function(e){e.TEXT_NOTIFICATION="text_notification"}(ms||(ms={}));const ps=[15e3,6e4];function fs(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{!Object.prototype.hasOwnProperty.call(e,t)||null===e[t]||"object"!=typeof e[t]&&"function"!=typeof e[t]||Object.isFrozen(e[t])||fs(e[t])}),e}var Es,_s,Ss;!function(e){e.WHITE="cds--white",e.G10="cds--g10",e.G90="cds--g90",e.G100="cds--g100"}(Es||(Es={})),function(e){e.PRIMARY="primary",e.SECONDARY="secondary",e.DANGER="danger",e.GHOST="ghost",e.DANGER_PRIMARY="danger--primary",e.DANGER_GHOST="danger--ghost",e.DANGER_TERTIARY="danger--tertiary",e.TERTIARY="tertiary"}(_s||(_s={})),function(e){e.SMALL="sm",e.MEDIUM="md",e.LARGE="lg",e.XLARGE="xl",e.XXLARGE="2xl"}(Ss||(Ss={}));const vs={config:{is_on:!0,mobile:{is_on:!0,title:"",time_to_expand:15e3,new_expand_time:!1,time_to_reduce:1e4,notification_type:ms.TEXT_NOTIFICATION},desktop:{is_on:!0,title:"",new_expand_time:!1,time_to_expand:15e3,notification_type:ms.TEXT_NOTIFICATION}}};fs(vs);const ys={title:null,hideBackButton:!1,hidePanelHeader:!1,disableAnimation:!1};fs(ys);const Cs={isOpen:!1,panelID:Vn,options:ys};fs(Cs);const bs={isOpen:!1,messageItem:null};fs(bs);const As={isOpen:!1,citationItem:null};fs(As);const Ms={isOpen:!1,localMessageItem:null,isMessageForInput:!1};fs(Ms);const Is={launcher:!1,mainWindow:!1};fs(Is);const Ts={launcher:!0,mainWindow:!1};fs(Ts);const ws={mainWindow:!0,launcher:!1};fs(ws);const Ns={chatState:{version:gs,disclaimersAccepted:{},homeScreenState:{isHomeScreenOpen:!1,showBackToBot:!1},hasSentNonWelcomeMessage:!1,humanAgentState:{isConnected:!1,isSuspended:!1,responseUserProfiles:{}}},launcherState:{wasLoadedFromBrowser:!1,version:gs,viewState:Is,showUnreadIndicator:!1,mobileLauncherIsExtended:!1,mobileLauncherWasReduced:!1,mobileLauncherDisableBounce:!1,desktopLauncherIsExpanded:!1,desktopLauncherWasMinimized:!1,bounceTurn:1,hasSentNonWelcomeMessage:!1}};fs(Ns);const Rs={localMessageIDs:[],messageIDs:[],isLoadingCounter:0,isHydratingCounter:0,isScrollAnchored:!1};fs(Rs);const ks={allMessageItemsByID:{},allMessagesByID:{},botMessageState:{...Rs}};fs(ks);const xs={isConnecting:!1,isReconnecting:!1,numUnreadMessages:0,fileUploadInProgress:!1,showScreenShareRequest:!1,isScreenSharing:!1,isHumanAgentTyping:!1,inputState:{fieldVisible:!0,isReadonly:!1,files:[],allowFileUploads:!1,allowMultipleFileUploads:!1,allowedFileUploadTypes:null,stopStreamingButtonState:{currentStreamID:null,isVisible:!1,isDisabled:!1}}};fs(xs);const Os={carbonTheme:rt.G10,theme:ot.CARBON_AI,corners:Xe.ROUND};fs(Os);const Ps={showFrame:!0,hasContentMaxWidth:!0};function Ds(e,t){return{...e,botMessageState:{...e.botMessageState,...t}}}function Ls(e,t,n){return void 0===n&&(n=e.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot),{...e,persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,homeScreenState:{...e.persistedToBrowserStorage.chatState.homeScreenState,isHomeScreenOpen:t,showBackToBot:n}}}}}function Bs(e,t,n,a){const s=e.allMessageItemsByID[t];return s?{...e,allMessageItemsByID:{...e.allMessageItemsByID,[t]:{...s,ui_state:{...s.ui_state,[n]:a}}}}:e}function Hs(e,t){const n={...e,allMessagesByID:{...e.allMessagesByID,[t.id]:t}};if(!e.allMessagesByID[t.id]){return Ds(n,{messageIDs:[...e.botMessageState.messageIDs,t.id]})}return n}function Ws(){let e,t;const n=new Promise((n,a)=>{e=n,t=a});return n.doResolve=t=>{n.isResolved=!0,n.isComplete=!0,e(t)},n.doReject=e=>{n.isRejected=!0,n.isComplete=!0,t(e)},n.isResolved=!1,n.isRejected=!1,n.isComplete=!1,n}fs(Ps);var Us="#ffffff",$s="#161616";const Fs=4.5;function zs(e){if(!e.startsWith("#")||!/^#[0-9a-fA-F]+$/.test(e))return[0,0,0];if(7===e.length){const t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7);return[parseInt(t,16),parseInt(n,16),parseInt(a,16)]}if(4===e.length){const t=e.substring(1,2),n=e.substring(2,3),a=e.substring(3,4);return[parseInt(t+t,16),parseInt(n+n,16),parseInt(a+a,16)]}return[0,0,0]}function qs(e,t){const n=zs(e),a=zs(t),s=Gs(n),i=Gs(a);let r;return r=s>i?(s+.05)/(i+.05):(i+.05)/(s+.05),r}function Gs([e,t,n]){const a=e/255,s=t/255,i=n/255;return.2126*(a<=.03928?a/12.92:((a+.055)/1.055)**2.4)+.7152*(s<=.03928?s/12.92:((s+.055)/1.055)**2.4)+.0722*(i<=.03928?i/12.92:((i+.055)/1.055)**2.4)}function Vs(e){return qs($s,e)>=Fs?$s:Us}async function js(e,t){const a=await Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,27362,19)),s="default"in a?a.default:a,i=s(e).hsl().object();return s({...i,l:i.l+t}).round().hex().toLowerCase()}const Zs="--cds-",Ys=/#([a-f0-9]{3}){1,2}\b/i,Ks={"$chat-button":"#000000","$chat-button-text-hover":"#525252"},Xs={"$chat-button":"#ffffff","$chat-button-text-hover":"#f4f4f4"};const Qs={white:{blue20:["$highlight"],blue60:["$background-brand","$interactive","$border-interactive","$button-primary","$button-tertiary","$icon-interactive","$focus"],blue60Hover:["$button-primary-hover","$button-tertiary-hover"],blue80:["$button-primary-active","$button-tertiary-active"]},g10:{blue20:["$highlight"],blue60:["$background-brand","$interactive","$border-interactive","$button-primary","$button-tertiary","$icon-interactive","$focus"],blue60Hover:["$button-primary-hover","$button-tertiary-hover"],blue80:["$button-primary-active","$button-tertiary-active"]},g90:{blue20:[],blue60:["$background-brand","$interactive","$border-interactive","$button-primary","$button-tertiary","$focus-inverse"],blue60Hover:["$button-primary-hover","$button-tertiary-hover"],blue80:["$button-primary-active","$highlight","$button-tertiary-active"]},g100:{blue20:[],blue60:["$background-brand","$interactive","$border-interactive","$button-primary","$button-tertiary","$focus-inverse"],blue60Hover:["$button-primary-hover","$button-tertiary-hover"],blue80:["$button-primary-active","$highlight","$button-tertiary-active"]}};function Js(e,t,n){t.forEach(t=>{e[t]=n})}function ei(e,t,n,a){n=n||rt.G10,e=e||{};const s=function(e,t){let n={};t!==ot.CARBON_AI&&([rt.G10,rt.WHITE].includes(e)?n={...n,...Ks}:[rt.G90,rt.G100].includes(e)&&(n={...n,...Xs}));return n}(n,a),i={...s,...e};Object.entries(i).forEach(([e,t])=>{e.startsWith("$")&&!t.match(Ys)&&delete i[e]});const r=async function(e,t){const n={},a=e["BASE-primary-color"],s=e["BASE-secondary-color"],i=e["BASE-accent-color"];if(a){n["PRIMARY-color"]=a,n["PRIMARY-color-text"]=Vs(a),n["PRIMARY-color-hover"]=await js(a,-8),n["PRIMARY-color-active"]=await js(a,-10);const e=i||"#0f62fe",s=t===rt.G90||t===rt.G100?Us:e;let r;r=qs(a,s)>=Fs?s:s!==e&&qs(a,e)>=Fs?e:s!==Us&&qs(a,Us)>=Fs?Us:$s,r!==s&&(n["PRIMARY-color-focus"]=r)}if(s?(n["SECONDARY-color"]=s,n["SECONDARY-color-text"]=Vs(s)):t!==rt.G90&&t!==rt.G100||(n["SECONDARY-color"]=`var(${Zs}layer-02)`,n["SECONDARY-color-text"]=`var(${Zs}text-primary);`),i){const e=Qs[t],a=await js(i,40),s=await js(i,-8),r=await js(i,-20);Js(n,e.blue20,a),Js(n,e.blue60,i),Js(n,e.blue60Hover,s),Js(n,e.blue80,r),n["LAUNCHER-color-background"]=i,n["LAUNCHER-color-background-hover"]=s,n["LAUNCHER-color-background-active"]=r,n["LAUNCHER-EXPANDED-MESSAGE-color-background"]=i,n["LAUNCHER-EXPANDED-MESSAGE-color-hover"]=s,n["LAUNCHER-EXPANDED-MESSAGE-color-active"]=r,n["ACCENT-color"]=i;const o=zs(i);n["ACCENT-color-r"]=o[0].toString(),n["ACCENT-color-g"]=o[1].toString(),n["ACCENT-color-b"]=o[2].toString(),n["ACCENT-color-ghost-text"]=i;const c=Vs(i);n["ACCENT-color-text"]=c,n["ACCENT-color-background-hover"]=s,n["ACCENT-color-background-active"]=r,n["LAUNCHER-color-focus-border"]=c,n["LAUNCHER-color-avatar"]=c,n["LAUNCHER-EXPANDED-MESSAGE-color-text"]=c,n["LAUNCHER-EXPANDED-MESSAGE-color-focus-border"]=c,n["LAUNCHER-MOBILE-color-text"]=c,n["ACCENT-color-bw"]=c,n["ACCENT-color-bw-hover"]=await js(c,-8),n["ACCENT-color-bw-active"]=await js(c,-10),n["ACCENT-color-bw-inverse"]=c===$s?Us:$s,n["ACCENT-color-bw-gray"]=c===$s?"#393939":"#f4f4f4",n["ACCENT-color-pastel"]=c===$s?await js(i,20):await js(i,-15)}return n}(t||{},n);return Object.entries(r).forEach(([t,n])=>{""!==n&&void 0===e[t]&&(i[t]=n)}),i}function ti(e){let t;switch(e?.carbonTheme){case rt.WHITE:t=Es.WHITE;break;case rt.G10:t=Es.G10;break;case rt.G90:t=Es.G90;break;case rt.G100:t=Es.G100;break;default:t=Es.G10}return e?.theme===ot.CARBON_AI&&(t+=" WAC--aiTheme"),t}const ni=new Set(Object.values(Ye));Object.values(Ye).join(", ");class ai{constructor(e){this.hydrating=!1,this.restarting=!1,this.alreadyHydrated=!1,this.chunkQueue=[],this.serviceManager=e}async hydrateChat(e,t,n){let a=!1;try{this.hydrationPromise||(this.hydrating=!0,this.hydrationPromise=this.doHydrateChat(e,t,n),a=!0),await this.hydrationPromise}finally{this.hydrating=!1}a&&await this.serviceManager.fire({type:Qe.CHAT_READY})}async doHydrateChat(e,t,n){let a;const{serviceManager:s}=this;s.store.dispatch(Hn.addIsHydratingCounter(1)),this.alreadyHydrated||(a=await this.serviceManager.historyService.loadHistory(),s.humanAgentService&&await s.humanAgentService.initialize());const{config:i}=s.store.getState();if(a)s.store.dispatch(Hn.hydrateMessageHistory(a.messageHistory)),await this.createElementsForUserDefinedResponses(a.messageHistory),a.latestPanelLocalMessageItem&&this.openResponsePanel(a.latestPanelLocalMessageItem,!0);else if(!e){const e=s.store.getState();e.homeScreenConfig?.is_on?s.store.dispatch(Hn.setHomeScreenIsOpen(!0)):i.public.messaging?.skipWelcome||await s.actions.send(fa({id:Tt(At.MESSAGE),input:{text:""},history:{silent:!0,is_welcome_request:!0},thread_id:ma}),et.WELCOME_REQUEST,{},!0)}s.store.dispatch(Hn.chatWasHydrated()),s.store.dispatch(Hn.addIsHydratingCounter(-1));const r=i.public.serviceDesk.allowReconnect??!0;this.serviceManager?.humanAgentService?.handleHydration(r,Boolean(a)),this.alreadyHydrated=!0}getPublicWebChatState(){const e=this.serviceManager.store.getState(),{persistedToBrowserStorage:t}=e,{chatState:n,launcherState:a}=t;return{isConnectedWithHumanAgent:n.humanAgentState.isConnected,isWebChatOpen:a.viewState.mainWindow,isConnectingWithHumanAgent:e.humanAgentState.isConnecting,isHomeScreenOpen:n.homeScreenState.isHomeScreenOpen,isDebugEnabled:Qn(),hasUserSentMessage:n.hasSentNonWelcomeMessage,viewState:{...a.viewState},serviceDesk:{isConnected:n.humanAgentState.isConnected,isConnecting:e.humanAgentState.isConnecting,isSuspended:n.humanAgentState.isSuspended??!1},locale:this.serviceManager.store.getState().locale,intl:this.serviceManager.intl}}async sendWithCatch(e,t,n={},a=!1){try{await this.send(e,t,n,a)}catch(e){}}async send(e,t,n={},a=!1){const s="string"==typeof e?Ca(e):e;this.serviceManager.store.getState().persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen&&this.serviceManager.store.dispatch(Hn.setHomeScreenIsOpen(!1)),this.serviceManager.store.getState().responsePanelState.isOpen&&this.serviceManager.store.dispatch(Hn.setResponsePanelIsOpen(!1)),this.hydrationPromise||a?(a||await this.hydrationPromise,await this.doSend(s,t,n)):(this.serviceManager.store.dispatch(Hn.setHomeScreenIsOpen(!1)),await this.hydrateChat(s,t,n),await this.doSend(s,t,n))}async doSend(e,t,n={}){const{store:a}=this.serviceManager;fa(e);const s=e.history?.label||e.input.text;n.silent&&(e.history.silent=!0);const i=da(e,s);e.history.silent?a.dispatch(Hn.addMessage(e)):a.dispatch(Hn.addLocalMessageItem(i,e,!0)),n.setValueSelectedForMessageID&&a.dispatch(Hn.messageSetOptionSelected(n.setValueSelectedForMessageID,e)),fs(e),await this.serviceManager.messageService.send((0,d.A)(e),t,i.ui_state.id,n)}async receive(e,t=!1,n,a){const{restartCount:s}=this.serviceManager;e.id||(e.id=Tt(At.MESSAGE));const i={type:Qe.PRE_RECEIVE,data:e};if(await this.serviceManager.fire(i),s!==this.serviceManager.restartCount)return;if(t||this.serviceManager.store.dispatch(Hn.updateHasSentNonWelcomeMessage(!0)),s!==this.serviceManager.restartCount)return;const{languagePack:r}=this.serviceManager.store.getState();if(pa(e))this.processMessageResponse(e,t,n,a).catch(e=>{});else{const t=ba(r.errors_singleMessage,e.thread_id,mt.INLINE_ERROR);this.receive(t,!1)}fs(e),await this.serviceManager.fire({type:Qe.RECEIVE,data:e})}async removeMessages(e){this.serviceManager.store.dispatch(Hn.removeMessages(e))}async insertHistory(e){const t=this.serviceManager.mainWindow?.getMessagesScrollBottom(),n=this.serviceManager.store.getState(),a={notes:[{body:e}]},s=await this.serviceManager.historyService.loadHistory(a);if(!s)return;const i={allMessageItemsByID:n.allMessageItemsByID,allMessagesByID:n.allMessagesByID,botMessageState:n.botMessageState},r=(0,l.A)({},s.messageHistory,i);r.botMessageState.messageIDs=[...s.messageHistory.botMessageState.messageIDs,...i.botMessageState.messageIDs],r.botMessageState.localMessageIDs=[...s.messageHistory.botMessageState.localMessageIDs,...i.botMessageState.localMessageIDs],this.serviceManager.store.dispatch(Hn.hydrateMessageHistory(r)),await this.createElementsForUserDefinedResponses(s.messageHistory),this.serviceManager.mainWindow?.doAutoScroll({scrollToBottom:t})}async receiveChunk(e,t,n={}){const a=Ws();return this.chunkQueue.push({chunk:e,messageID:t,options:n,chunkPromise:a}),1===this.chunkQueue.length&&this.processChunkQueue(),a}async processChunkQueue(){const{chunk:e,options:t,chunkPromise:n}=this.chunkQueue[0];let{messageID:a}=this.chunkQueue[0];const{store:s}=this.serviceManager;try{const i=function(e){return Boolean(e.complete_item)}(e),r=function(e){return Boolean(e.partial_item)}(e),o=s.getState().botInputState.stopStreamingButtonState.isVisible;if(r){const t=e.partial_item.streaming_metadata;t?.cancellable&&!o&&s.dispatch(Hn.setStopStreamingButtonVisible(!0))}if(i||r){a||(a=e.streaming_metadata?.response_id),a&&!s.getState().allMessagesByID[a]&&s.dispatch(Hn.streamingStart(a));const n=e.partial_item||e.complete_item;a&&n&&s.dispatch(Hn.streamingAddChunk(a,n,i,t.disableFadeAnimation??!0)),e.partial_response?.message_options&&a&&s.dispatch(Hn.streamingMergeMessageOptions(a,e.partial_response.message_options)),a&&n&&await this.handleUserDefinedResponseItemsChunk(a,e,n)}else Ha(e)&&this.receive(e.final_response,t.isLatestWelcomeNode,null,{disableFadeAnimation:!0});(i||Ha(e))&&s.getState().botInputState.stopStreamingButtonState.isVisible&&(s.dispatch(Hn.setStopStreamingButtonDisabled(!1)),s.dispatch(Hn.setStopStreamingButtonVisible(!1))),this.chunkQueue.shift(),n.doResolve(),this.chunkQueue[0]&&this.processChunkQueue()}catch(e){this.chunkQueue.shift(),n.doReject(e),this.chunkQueue[0]&&this.processChunkQueue()}}getOrCreateUserDefinedElement(e){let t=this.serviceManager.userDefinedElementRegistry.get(e);return t||(t={element:document.createElement("div"),slotName:`slot-user-defined-${Tt()}`},t.element.setAttribute("slot",t.slotName),this.serviceManager.userDefinedElementRegistry.set(e,t)),t}async handleUserDefinedResponseItems(e,t){if(xa(e.item)){let n,a;e.item.user_defined?.silent||({element:n,slotName:a}=this.getOrCreateUserDefinedElement(e.ui_state.id));const s={type:Qe.USER_DEFINED_RESPONSE,data:{message:e.item,fullMessage:t,element:n,slot:a}};await this.serviceManager.fire(s)}else if(Ra(e.item)){const{itemsLocalMessageItemIDs:n,bodyLocalMessageItemIDs:a,footerLocalMessageItemIDs:s,gridLocalMessageItemIDs:i}=e.ui_state,{allMessageItemsByID:r}=this.serviceManager.store.getState(),o=e=>{const n=r[e];return this.handleUserDefinedResponseItems(n,t)};i?.length&&await ha(i,e=>ha(e,e=>ha(e,e=>o(e)))),n?.length&&await ha(n,o),a?.length&&await ha(a,o),s?.length&&await ha(s,o)}}async handleUserDefinedResponseItemsChunk(e,t,n){if(xa(n)){const a=Wa(e,n);let s,i;n.user_defined?.silent||({element:s,slotName:i}=this.getOrCreateUserDefinedElement(a));const r={type:Qe.CHUNK_USER_DEFINED_RESPONSE,data:{messageItem:n,chunk:t,element:s,slot:i}};await this.serviceManager.fire(r)}}async processMessageResponse(e,t,n,a={}){const{store:s}=this.serviceManager,{config:i}=s.getState(),r=this.serviceManager.restartCount,o=e.output.generic;e.request_id=n?.id,fa(e),s.dispatch(Hn.addMessage(e));let c=null;for(let n=0;n<o.length&&r===this.serviceManager.restartCount;n++){const l=o[n];if(l){const n=Sa(l),o=Ma(l),d=Fa(l,e,t,a.disableFadeAnimation),u=[];if(qa(d,e,!1,u,!0),s.dispatch(Hn.addNestedMessages(u)),o&&pa(e)){s.dispatch(Hn.addIsTypingCounter(1));const t={};if(!Oa(i)){const e='Web chat received a "connect_to_agent" message but there is no service desk configured. Check your chat configuration.';this.errorOccurred({errorType:ct.INTEGRATION_ERROR,message:e}),s.dispatch(Hn.setMessageUIStateInternalProperty(d.fullMessageID,"agent_no_service_desk",!0)),t.ui_state_internal.agent_no_service_desk=!0}const n=await(this.serviceManager.humanAgentService?.checkAreAnyHumanAgentsOnline(e));if(r===this.serviceManager.restartCount){s.dispatch(Hn.setMessageUIStateInternalProperty(d.fullMessageID,"agent_availability",n)),t.ui_state_internal=t.ui_state_internal||{},t.ui_state_internal.agent_availability=n;let a=!1;i.public.serviceDesk?.skipConnectHumanAgentCard&&(a=!0),s.dispatch(Hn.addIsTypingCounter(-1)),a&&n===lt.ONLINE&&this.serviceManager.humanAgentService.startChat(d,e)}}if(n){const e=_a(l);e&&s.dispatch(Hn.addIsTypingCounter(1)),await Yn(l.time),e&&r===this.serviceManager.restartCount&&s.dispatch(Hn.addIsTypingCounter(-1))}else await this.handleUserDefinedResponseItems(d,e),d.item.user_defined?.silent||r!==this.serviceManager.restartCount||(this.serviceManager.store.dispatch(Hn.addLocalMessageItem(d,e,!1,c)),c=d.ui_state.id)}}}openResponsePanel(e,t){this.serviceManager.store.dispatch(Hn.setResponsePanelContent(e,t)),this.serviceManager.store.dispatch(Hn.setResponsePanelIsOpen(!0))}async insertLocalMessageResponse(e){e.id=Tt(At.MESSAGE),await this.processMessageResponse(e,!1,null,{})}updateLanguagePack(e){const{languagePack:t,locale:n}=this.serviceManager.store.getState(),a={...t,...e};ca(this.serviceManager,n,a)}addNotification(e){this.serviceManager.store.dispatch(Hn.addNotification(e))}removeNotification(e){this.serviceManager.store.dispatch(Hn.removeNotifications({groupID:e}))}removeAllNotifications(){this.serviceManager.store.dispatch(Hn.removeAllNotifications())}updateCSSVariables(e,t={}){const{store:n}=this.serviceManager,{theme:a}=n.getState(),{carbonTheme:s,theme:i}=a;if(i===ot.CARBON_AI){const n=e;e={},t={},n&&Object.entries(n).forEach(([t])=>{ni.has(t)&&(e[t]=n[t])})}else e={...e},t={...t};const r=ei(e,t,s,i);n.dispatch(Hn.updateCSSVariables(r,e,t))}updateBotName(e){this.serviceManager.store.dispatch(Hn.updateBotName(e))}updateMainHeaderTitle(e){this.serviceManager.store.dispatch(Hn.updateMainHeaderTitle(e))}updateBotAvatarURL(e){this.serviceManager.store.dispatch(Hn.updateBotAvatarURL(e))}updateHomeScreenConfig(e){this.serviceManager.store.dispatch(Hn.updateHomeScreenConfig(e))}updateLauncherConfig(e){this.serviceManager.store.dispatch(Hn.updateLauncherConfig(e))}async changeView(e,t,n=!0,a=!1){const{store:s}=this.serviceManager,{viewState:r}=s.getState().persistedToBrowserStorage.launcherState;let o=function(e,t){const{viewState:n}=t.persistedToBrowserStorage.launcherState;let a;return a="string"==typeof e?{...Is,[e]:!0}:{...n,...e},a}(e,s.getState());return(0,i.A)(o,r)&&!a||(await this.fireViewChangeEventsAndChangeView(o,t),o=s.getState().persistedToBrowserStorage.launcherState.viewState,n&&o.mainWindow&&!s.getState().isHydrated&&this.hydrateChat().catch(e=>{})),o}async fireViewChangeEventsAndChangeView(e,t){const{store:n}=this.serviceManager;if(n.getState().viewChanging)throw new Error("The view may not be changed while a view change event is already running. Please make sure to resolve any promises from these events.");n.dispatch(Hn.setViewChanging(!0));const{viewState:a}=n.getState().persistedToBrowserStorage.launcherState,{viewChangeReason:s}=t,i=fs(a);try{const t={type:Qe.VIEW_PRE_CHANGE,reason:s,oldViewState:i,newViewState:e,cancelViewChange:!1};if(await this.serviceManager.fire(t),t.cancelViewChange)return;e=t.newViewState,n.dispatch(Hn.setViewState(fs(e)));const a={type:Qe.VIEW_CHANGE,reason:s,oldViewState:i,newViewState:e,cancelViewChange:!1};if(await this.serviceManager.fire(a),a.cancelViewChange)return void n.dispatch(Hn.setViewState(i));e=a.newViewState,n.dispatch(Hn.setViewState(fs(e)))}finally{n.dispatch(Hn.setViewChanging(!1))}}errorOccurred(e){e.catastrophicErrorType&&this.serviceManager.store.dispatch(Hn.setAppStateValue("catastrophicErrorType",e.catastrophicErrorType)),function(e,t){if(e)try{e(t)}catch(e){}}(this.serviceManager.additionalChatParameters.onError,e)}async restartConversation(e={}){const{skipHydration:t=!1,endHumanAgentConversation:n=!0,fireEvents:a=!0}=e;if(!this.restarting){this.restarting=!0;try{const{serviceManager:e}=this,{store:s}=e;a&&await e.fire({type:Qe.PRE_RESTART_CONVERSATION}),e.restartCount++,this.hydrating&&await this.hydrationPromise;const i=s.getState(),{isConnecting:r}=i.humanAgentState,{isConnected:o}=i.persistedToBrowserStorage.chatState.humanAgentState;(o||r)&&n&&await e.humanAgentService.endChat(!0,!1,!1),this.serviceManager.instance.updateInputFieldVisibility(!0),this.serviceManager.messageService.cancelAllMessageRequests(),s.dispatch(Hn.restartConversation()),t||(this.hydrationPromise=null),a&&await e.fire({type:Qe.RESTART_CONVERSATION}),this.hydrating&&await this.hydrationPromise,t||e.store.getState().isHydrated?s.dispatch(Hn.chatWasHydrated()):(this.hydrationPromise=null,s.getState().persistedToBrowserStorage.launcherState.viewState.mainWindow&&await e.actions.hydrateChat())}finally{this.restarting=!1}}}async destroySession(e){const{store:t}=this.serviceManager,{persistedToBrowserStorage:n}=t.getState(),a=n.launcherState.viewState,s=(0,d.A)(Ns);s.launcherState.viewState=e?a:Ts,this.serviceManager.messageService.cancelAllMessageRequests(),this.serviceManager.userSessionStorageService.clearLauncherSession(),this.serviceManager.userSessionStorageService.clearChatSession(),this.serviceManager.store.dispatch(Hn.setAppStateValue("persistedToBrowserStorage",s))}agentEndConversation(e){return this.serviceManager.humanAgentService.endChat(e)}agentUpdateIsSuspended(e){this.serviceManager.store.dispatch(function(e){return{type:ss,isSuspended:e}}(e))}async createElementsForUserDefinedResponses(e){await ha(Object.values(e.allMessageItemsByID),t=>{const n=e.allMessagesByID[t.fullMessageID];return this.handleUserDefinedResponseItems(t,n)})}}class si{constructor(){this.handlersByType=new Map,this.eventsTypesRunning=new Set,this.eventsRunningCount=0}async fire(e,t){ii("Before fire",e);const{type:n}=e;if(!n)throw new Error(`Attempted to fire an event with no type! ${JSON.stringify(e)}`);if(this.eventsTypesRunning.has(n))throw new Error(`An event of type ${n} is already running. Please make sure that you have resolved the Promises for any earlier events that were fired.`);try{this.eventsRunningCount++;try{this.eventsTypesRunning.add(n);const a=this.handlersByType.get(n);if(a&&a.length){const n=a.slice();await ha(n,function(n){return n(e,t)})}}finally{this.eventsTypesRunning.delete(n)}}finally{this.eventsRunningCount--,this.waitForEmptyPromise&&0===this.eventsRunningCount&&this.waitForEmptyPromise.doResolve()}ii("After fire",e)}fireSync(e,t){ii("Before fire",e);const{type:n}=e,a=this.handlersByType.get(n);if(a&&a.length){a.slice().forEach(n=>n(e,t))}ii("After fire",e)}async waitForEmpty(){0!==this.eventsRunningCount&&(this.waitForEmptyPromise||(this.waitForEmptyPromise=Ws()),await this.waitForEmptyPromise,this.waitForEmptyPromise=null)}on(e){return ua(e).forEach(({type:e,handler:t})=>{if(!e)throw new Error(`Attempted to listen to an event with no type: "${e}"!`);if("function"==typeof t){this.handlersByType.has(e)||this.handlersByType.set(e,[]);this.handlersByType.get(e).push(t)}}),this}off(e){return ua(e).forEach(({type:e,handler:t})=>{const n=this.handlersByType.get(e);if(n)if(t){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}else this.handlersByType.set(e,[])}),this}once(e){return ua(e).forEach(({type:e,handler:t})=>{if("function"==typeof t){const n=(a,s)=>(this.off({type:e,handler:n}),t(a,s));this.on({type:e,handler:n})}}),this}logListeners(){this.handlersByType.forEach((e,t)=>{e.forEach(e=>{})})}clear(){return this.handlersByType.clear(),this}}function ii(e,t){if(Qn()){(0,d.A)(t)}}function ri(e){const t={open(t=ys){const{store:n}=e;n.dispatch(Hn.setCustomPanelConfigOptions(t)),n.dispatch(Hn.setCustomPanelOpen(!0))},close(){e.store.dispatch(Hn.setCustomPanelOpen(!1))}};return Object.freeze(t)}async function oi(e,t){const n={},a={},s={serviceManager:t,allMessages:[],allMessagesByID:a,allLocalMessagesByID:n,threadMessagesByThreadID:{},responsesByRequestID:{},relatedMessageByID:{},localMessagesByOriginalMessageID:{},lastThreadID:null,loadedHistory:{messageHistory:{allMessageItemsByID:n,allMessagesByID:a,botMessageState:null},latestTransferToHumanAgentResponse:null,latestPanelLocalMessageItem:null}};return await async function(e,t){const{allMessages:n,allMessagesByID:a,responsesByRequestID:s,relatedMessageByID:i,serviceManager:r,localMessagesByOriginalMessageID:o}=t;if(!e?.length)return;e.forEach(e=>{const n=e=>{const{message:n}=e;(function(e){return e?.input?.message_type===ht.EVENT})(n)||!Ea(n)&&!pa(n)||function(e,t,n){e.history=e.history||{},e.ui_state_internal=e.ui_state_internal||{},e.ui_state_internal.from_history=!0,e.history.timestamp=new Date(n.time).getTime(),e.thread_id!==ma&&(t.lastThreadID=e.thread_id);t.allMessagesByID[e.id]=e,t.allMessages.push(e)}(n,t,e)};e.body.forEach(n)});for(let e=n.length-1;e>=0;e--){const t=n[e];t.history?.file_upload_status===Ve.UPLOADING&&(t.history.file_upload_status=Ve.COMPLETE,t.history.error_state=bt.FAILED),pa(t)&&t.history.silent?(n.splice(e,1),delete a[t.id]):(o[t.id]=[],pa(t)&&t.request_id?s[t.request_id]=t:Ea(t)&&t.history.related_message_id&&(i[t.history.related_message_id]=t))}if(!n.length)return;Object.freeze(n);const c={type:Qe.HISTORY_BEGIN,messages:n};await r.eventBus.fire(c,r.instance),n.forEach(fs),await r.eventBus.fire({type:Qe.HISTORY_END,messages:n},r.instance)}(e,s),s.allMessages.length?(function(e){const{allMessages:t,allLocalMessagesByID:n,localMessagesByOriginalMessageID:a}=e;t.forEach(t=>{if(Ea(t)){if(!t.history?.silent){const e=t.history?.label||t.input.text,s=da(t,e);a[t.id].push(s),n[s.ui_state.id]=s}}else{const s=function(e){if(pa(e))return e.output.generic;return null}(t);s?.length&&s.forEach(s=>{if(!Sa(s)){const i=Fa(s,t,!1);if(a[t.id].push(i),n[i.ui_state.id]=i,Ra(i.item)){const n=[];qa(i,t,!0,n,!0),n.forEach(t=>{const n=t.ui_state.id;e.loadedHistory.messageHistory.allMessageItemsByID[n]=t})}}})}!function(e,t){const{threadMessagesByThreadID:n}=t;let a=n[ma];a||(a=[],n[ma]=a);a.push(e)}(t,e)})}(s),function(e){const{loadedHistory:t,threadMessagesByThreadID:n,localMessagesByOriginalMessageID:a}=e;t.messageHistory.botMessageState=function(e,t){const n=[],a=[];e&&e.forEach(e=>{a.push(e.id),t[e.id].forEach(e=>{n.push(e.ui_state.id)})});return{...Rs,localMessageIDs:n,messageIDs:a}}(n[ma],a)}(s),function(e){const{responsesByRequestID:t,threadMessagesByThreadID:n,localMessagesByOriginalMessageID:a}=e,s=function(e,t){const n=function(e,t){if(e)for(let n=e.length-1;n>=0;n--)if(t(e[n],n,e))return n;return-1}(e,t);return-1===n?void 0:e[n]}(n[ma],e=>Ea(e)&&e.history.is_welcome_request);if(s){const e=t[s.id];e&&a[e.id].forEach(e=>{e.ui_state.isWelcomeResponse=!0})}}(s),function({allMessages:e,relatedMessageByID:t,localMessagesByOriginalMessageID:n}){e.forEach(e=>{pa(e)&&n[e.id].forEach(n=>{if(va(n.item)){const a=t[e.id];Ea(a)&&(n.ui_state.optionSelected=a)}else if(function(e){return e?.item.response_type===mt.DATE}(n)){const a=t[e.id];Ea(a)&&(n.ui_state.originalUserText=a.history.label)}})})}(s),s.loadedHistory):null}class ci{constructor(e){this.serviceManager=e}async loadHistory(e){const t=this.serviceManager.store.getState(),{config:n}=t,a=n.public;try{let t;if(e)t=e;else if(a.messaging?.customLoadHistory){const e=await a.messaging.customLoadHistory(this.serviceManager.instance);t={notes:[{body:e}]}}if(t){const e=t?.notes;return oi(e,this.serviceManager)}}catch(e){}return null}}class li{start(e,t,n,a,s){this.hasExceededMaxSilentLoading=!1,this.onEnd=t,this.onSilentLoading=setTimeout(()=>{this.hasExceededMaxSilentLoading=!0,e()},a),this.onMaxAttempt=setTimeout(()=>{n()},s)}end(){this.onMaxAttempt&&clearTimeout(this.onMaxAttempt),this.onSilentLoading&&clearTimeout(this.onSilentLoading),this.onEnd&&this.onEnd(this.hasExceededMaxSilentLoading),this.hasExceededMaxSilentLoading=null,this.onEnd=null}}const di=[1e3,3e3,5e3];var ui;!function(e){e[e.SILENT=1]="SILENT",e[e.VISIBLE=2]="VISIBLE"}(ui||(ui={}));class hi{constructor(e,t){this.pendingLocale=!1,this.localeIsExplicit=!1,this.serviceManager=e,this.messageLoadingManager=new li,this.queue={waiting:[],current:null};const n=t.messaging?.messageTimeoutSecs;this.timeoutMS=n?1e3*n:15e4}async processSuccess(e,t){const{requestOptions:n,isProcessed:a}=e;if(a)return;this.setMessageErrorState(e,bt.NONE);const{message:s}=e;t&&(s.input.message_type!==ht.EVENT&&(t.history=t.history||{},t.history.timestamp=t.history.timestamp||Date.now(),e.trackData.lastRequestTime=Date.now()-e.timeLastRequest,e.trackData.totalRequestTime=Date.now()-e.timeFirstRequest,await this.serviceManager.actions.receive(t,Boolean(e.message.history.is_welcome_request),s,n)),this.messageLoadingManager.end()),e.isProcessed||(e.sendMessagePromise.doResolve(),e.isProcessed=!0,this.moveToNextQueueItem())}addErrorMessage(){const{store:e}=this.serviceManager,t=e.getState().languagePack.errors_singleMessage,{originalMessage:n,localMessage:a}=za(t);e.dispatch(Hn.addLocalMessageItem(a,n,!0))}sendToAssistantAndUpdateErrorState(e){if(e.isProcessed)return;this.sendToAssistant(e);(6e3>Date.now()-e.timeFirstRequest?ui.SILENT:ui.VISIBLE)===ui.VISIBLE&&(this.setMessageErrorState(e,bt.RETRYING),this.queue.waiting.forEach(e=>{this.setMessageErrorState(e,bt.WAITING)}))}async processError(e,t,n){const{timeFirstRequest:a,timeLastRequest:s,tryCount:i,isProcessed:r,trackData:o,requestOptions:c}=e,l=Date.now()-a,d=this.timeoutMS>l&&i<di.length;if(!r)if(o.lastRequestTime=Date.now()-s,o.totalRequestTime=Date.now()-a,d&&n){o.numErrors++;const t=di[e.tryCount++];setTimeout(()=>{this.sendToAssistantAndUpdateErrorState(e)},t)}else c.silent&&this.addErrorMessage(),this.serviceManager.actions.errorOccurred({errorType:ct.MESSAGE_COMMUNICATION,message:"An error occurred sending a message",otherData:t}),this.rejectFinalErrorOnMessage(e,t)}rejectFinalErrorOnMessage(e,t="An undefined error occurred trying to send your message."){const{sendMessagePromise:n}=e;this.setMessageErrorState(e,bt.FAILED);const{message:a}=e;e===this.queue.current&&a.input.message_type!==ht.EVENT&&this.messageLoadingManager.end(),n.doReject(new Error(t)),e.isProcessed=!0,e===this.queue.current&&this.moveToNextQueueItem()}async sendToAssistant(e){const{store:t}=this.serviceManager,n=t.getState(),{customSendMessage:a}=n.config.public.messaging;if(e.timeLastRequest=Date.now(),!e.isProcessed)try{const n=(0,d.A)(e.message);e.message=n,t.dispatch(Hn.updateMessage(n));const s=new AbortController;e.sendMessageController=s,await a(n,{signal:s.signal,silent:e.requestOptions.silent},this.serviceManager.instance),await this.processSuccess(e,null)}catch(t){const n=t&&("string"==typeof t?t:JSON.stringify(t))||"There was an unidentified error.";this.processError(e,n,!a)}}async runQueueIfReady(){if(!this.queue.current&&this.queue.waiting.length>0){const{eventBus:e,store:t}=this.serviceManager;this.clearCurrentQueueItem(),this.queue.current=this.queue.waiting.shift();const{current:n}=this.queue,{message:a,source:s}=n,i=t.getState(),{config:r}=t.getState(),{public:o}=r;if(n.timeFirstRequest=Date.now(),a.input.message_type!==ht.EVENT){$a(i)&&(a.thread_id=ma);const r=o.messaging?.messageLoadingIndicatorTimeoutSecs||0===o.messaging?.messageLoadingIndicatorTimeoutSecs?1e3*o.messaging.messageLoadingIndicatorTimeoutSecs:4e3;if(this.messageLoadingManager.start(()=>{this.serviceManager.store.dispatch(Hn.addIsLoadingCounter(1))},e=>{e&&this.serviceManager.store.dispatch(Hn.addIsLoadingCounter(-1))},()=>{this.cancelMessageRequestByID(a.id,!0)},r,this.timeoutMS),n.isProcessed)return;const c=a.history?.label||a.input.text;if(await e.fire({type:Qe.PRE_SEND,data:a,source:s},this.serviceManager.instance),n.isProcessed)return;const l=da(a,c,n.localMessageID);a.history.silent||(t.dispatch(Hn.updateLocalMessageItem(l)),t.dispatch(Hn.updateMessage(a))),fs(a),await e.fire({type:Qe.SEND,data:a,source:s},this.serviceManager.instance)}this.sendToAssistant(n)}}addToMessageQueue(e,t,n,a,s={}){const i={localMessageID:n,message:e,sendMessagePromise:a,requestOptions:s||{},timeFirstRequest:0,timeLastRequest:0,trackData:{numErrors:0,lastRequestTime:0,totalRequestTime:0},tryCount:0,isProcessed:!1,source:t};this.queue.waiting.push(i),this.queue.current&&e.history?.error_state===bt.RETRYING&&this.setMessageErrorState(i,bt.WAITING)}clearCurrentQueueItem(){this.queue.current&&(this.queue.current=null)}moveToNextQueueItem(){this.clearCurrentQueueItem(),this.runQueueIfReady()}setMessageErrorState(e,t){const{message:n}=e,{allMessagesByID:a}=this.serviceManager.store.getState(),s=a[n.id];if(s){const a=s.history?.error_state;if(!(a===t||t===bt.NONE&&!a)){let a;if(t===bt.FAILED)a="errors_ariaMessageFailed";a&&this.serviceManager.store.dispatch(Hn.announceMessage({messageID:a})),this.serviceManager.store.dispatch(Hn.setMessageErrorState(n.id,t));const{allMessagesByID:s}=this.serviceManager.store.getState();e.message=s[n.id]}}}send(e,t,n,a){e.history.timestamp=e.history.timestamp||Date.now(),e.input=e.input||{},e.input.message_type=e.input.message_type||ht.TEXT;const s=Ws();return this.addToMessageQueue(e,t,n,s,a),this.runQueueIfReady(),s}cancelAllMessageRequests(){for(;this.queue.waiting.length;)this.cancelMessageRequestByID(this.queue.waiting[0].message.id,!1);this.queue.current&&(this.cancelMessageRequestByID(this.queue.current.message.id,!1),this.clearCurrentQueueItem())}async cancelMessageRequestByID(e,t){let n;if(this.queue.current?.message.id===e)n=this.queue.current;else{const t=this.queue.waiting.findIndex(t=>t.message.id===e);-1!==t&&(n=this.queue.waiting[t],this.queue.waiting.splice(t,1))}if(n){const{lastResponse:e,sendMessageController:a}=n;a?.abort("Message was cancelled"),this.rejectFinalErrorOnMessage(n,"Message was cancelled"),t&&this.serviceManager.actions.errorOccurred({errorType:ct.MESSAGE_COMMUNICATION,message:"Message was cancelled",otherData:await Jn(e)})}}}class gi{constructor(e){this.originalName=e,this.attributeSafe=e,this.suffix=function(e){const t=function(e){return e?e.trim():""}(e);return t?.length?`--${e}`:""}(e)}}class mi{constructor(){this.userDefinedElementRegistry=new Map,this.restartCount=0}async fire(e){return this.eventBus.fire(e,this.instance)}}let pi={};const fi={getItem(e){return pi[e]},setItem(e,t){pi[e]=t},removeItem(e){delete pi[e]},length:Object.keys(pi).length,clear(){pi={}},key(e){return Object.keys(pi)[e]}},Ei=We()?window.sessionStorage:fi;class _i{constructor(e){this.serviceManager=e,this.prefix=`CARBON_CHAT_SESSION${this.serviceManager?.namespace?.suffix||""}`}loadChatSession(){try{const e=Ei.getItem(this.getChatSessionKey()),t=e?JSON.parse(e):null;return t?.version===gs?t:(this.clearChatSession(),null)}catch(e){return this.clearChatSession(),null}}loadLauncherSession(){try{const e=Ei.getItem(this.getLauncherSessionKey()),t=e?JSON.parse(e):null;return t?.version===gs?(t.wasLoadedFromBrowser=!0,t):(this.clearLauncherSession(),null)}catch(e){return this.clearLauncherSession(),null}}persistChatSession(e){try{Ei.setItem(this.getChatSessionKey(),JSON.stringify(e))}catch(e){}}persistLauncherSession(e){try{Ei.setItem(this.getLauncherSessionKey(),JSON.stringify(e))}catch(e){}}clearChatSession(){try{Ei.removeItem(this.getChatSessionKey())}catch(e){}}clearLauncherSession(){try{Ei.removeItem(this.getLauncherSessionKey())}catch(e){}}getChatSessionKey(){return this.prefix}getLauncherSessionKey(){return this.prefix}}function Si(e,t){if(Array.isArray(t))return t}const vi={[Za]:(e,t)=>{const{isConnecting:n,localMessageID:a}=t;return{...e,humanAgentState:{...e.humanAgentState,isConnecting:n,activeLocalMessageID:a,numUnreadMessages:n?0:e.humanAgentState.numUnreadMessages},persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,humanAgentState:{...e.persistedToBrowserStorage.chatState.humanAgentState,isSuspended:!!n&&e.persistedToBrowserStorage.chatState.humanAgentState.isSuspended}}}}},[Ya]:(e,t)=>{const{isReconnecting:n}=t;return{...e,humanAgentState:{...e.humanAgentState,isReconnecting:n}}},[ja]:(e,t)=>e.humanAgentState.isConnecting?{...e,humanAgentState:{...e.humanAgentState,availability:e.humanAgentState.isConnecting?t.availability:null}}:e,[ts]:(e,{showRequest:t})=>({...e,humanAgentState:{...e.humanAgentState,showScreenShareRequest:t}}),[Ka]:(e,t)=>{const n={...e.persistedToBrowserStorage.chatState.humanAgentState.responseUserProfiles},{responseUserProfile:a}=t;return a&&(n[a.id]=a),{...e,humanAgentState:{...e.humanAgentState,isConnecting:!1,isReconnecting:!1,availability:null},persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,humanAgentState:{...e.persistedToBrowserStorage.chatState.humanAgentState,isConnected:!0,responseUserProfile:a,responseUserProfiles:n}}}}},[as]:(e,t)=>({...e,persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,humanAgentState:{...e.persistedToBrowserStorage.chatState.humanAgentState,serviceDeskState:t.state}}}}),[ss]:(e,t)=>e.humanAgentState.isConnecting||e.persistedToBrowserStorage.chatState.humanAgentState.isConnected?{...e,persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,humanAgentState:{...e.persistedToBrowserStorage.chatState.humanAgentState,isSuspended:t.isSuspended}}}}:e,[is]:(e,t)=>({...e,humanAgentState:{...e.humanAgentState,isHumanAgentTyping:t.isTyping}}),[Xa]:e=>({...e,botMessageState:{...e.botMessageState},humanAgentState:{...e.humanAgentState,isHumanAgentTyping:!1},persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,humanAgentState:{...e.persistedToBrowserStorage.chatState.humanAgentState,responseUserProfile:null}}}}),[Ja]:(e,t)=>{const n={...e.humanAgentState.inputState,...t.capabilities};return n.allowFileUploads||(n.files=[]),{...e,humanAgentState:{...e.humanAgentState,inputState:n}}},[ns]:(e,{isSharing:t})=>({...e,humanAgentState:{...e.humanAgentState,isScreenSharing:t}}),[es]:(e,t)=>({...e,humanAgentState:{...e.humanAgentState,fileUploadInProgress:t.fileUploadInProgress}}),[Qa]:e=>{let t=Bs(e,e.humanAgentState.activeLocalMessageID,"wasHumanAgentChatEnded",!0);return t={...t,humanAgentState:{...t.humanAgentState,isConnecting:!1,isReconnecting:!1,availability:null,activeLocalMessageID:null,isHumanAgentTyping:!1,inputState:{...t.humanAgentState.inputState,isReadonly:!1}},persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,humanAgentState:{...e.persistedToBrowserStorage.chatState.humanAgentState,isConnected:!1,isSuspended:!1,responseUserProfile:null}}}},t}},yi=new Set([pt.USER_ENDED_CHAT,pt.CHAT_WAS_ENDED,pt.RELOAD_WARNING]),Ci={[wt]:(e,t)=>(0,l.A)({},e,t.partialState),[Ot]:e=>({...e,isHydrated:!0}),[en]:e=>{let t={...e,botMessageState:{...e.botMessageState,localMessageIDs:[],messageIDs:[],isScrollAnchored:!1},allMessageItemsByID:{},allMessagesByID:{},iFramePanelState:{...bs},viewSourcePanelState:{...As},customPanelState:{...Cs},persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,homeScreenState:{...e.persistedToBrowserStorage.chatState.homeScreenState,showBackToBot:!1}}},isHydrated:!1,catastrophicErrorType:null};return t.homeScreenConfig.is_on&&(t=Ls(t,!0)),t},[Pt]:(e,t)=>({...e,...t.messageHistory}),[Dt]:(e,t)=>{const{messageItem:n,message:a,addMessage:s,addAfterID:i}=t,{id:r}=n.ui_state,o=a.history.silent;let c=e;s&&(c=Hs(c,a));const l=c.botMessageState.localMessageIDs.findIndex(e=>e===r),d=[...c.botMessageState.localMessageIDs];let u=l;if(-1!==l?d.splice(l,1):u=d.length,i){const e=d.findIndex(e=>e===i);-1!==e&&(u=e+1)}if(d.splice(u,0,r),!o){c={...c,allMessageItemsByID:{...c.allMessageItemsByID,[r]:n},botMessageState:{...c.botMessageState,localMessageIDs:d}},c.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen&&(c=Ls(c,!1));const t=!n.item.agent_message_type,s=e.persistedToBrowserStorage.launcherState.viewState.mainWindow;if(!(t||s&&e.isBrowserPageVisible)){!Ea(a)&&!yi.has(n.item.agent_message_type)&&(c={...c,humanAgentState:{...c.humanAgentState,numUnreadMessages:c.humanAgentState.numUnreadMessages+1}})}}return c},[Lt]:(e,{messageIDs:t})=>{const n=new Set(t),a={...e.allMessagesByID},s={...e.allMessageItemsByID},i=e.botMessageState.messageIDs.filter(e=>!n.has(e)),r=e.botMessageState.localMessageIDs.filter(e=>{const t=s[e],a=n.has(t?.fullMessageID);return a&&delete s[e],!a});t.forEach(e=>{delete a[e]});return{...e,allMessagesByID:a,allMessageItemsByID:s,botMessageState:{...e.botMessageState,messageIDs:i,localMessageIDs:r}}},[Bt]:(e,t)=>{const{messageItem:n}=t;return{...e,allMessageItemsByID:{...e.allMessageItemsByID,[n.ui_state.id]:n}}},[ln]:(e,t)=>{const{message:n}=t;return{...e,allMessagesByID:{...e.allMessagesByID,[n.id]:n}}},[nn]:(e,t)=>{const{message:n}=t,a=n.id;let s=e;if(pa(n)){const t=[];n.output.generic.forEach(e=>{const n=Wa(a,e);n&&t.push(n)});const i={...e.allMessageItemsByID},r=[];let o;const c=e.botMessageState.localMessageIDs.filter((n,s)=>{const c=e.allMessageItemsByID[n].fullMessageID===a;return c&&(void 0===o&&(o=s),t.includes(n)?r.push(n):delete i[n]),!c});if(r.length){const e=t.filter(e=>r.includes(e));e.length&&c.splice(o,0,...e)}s={...s,allMessageItemsByID:i,botMessageState:{...s.botMessageState,localMessageIDs:c}}}return Hs(s,n)},[Gt]:(e,t)=>{const n={...e.allMessageItemsByID};return n[t.messageID]={...e.allMessageItemsByID[t.messageID],ui_state:{...e.allMessageItemsByID[t.messageID].ui_state,optionSelected:t.sentMessage}},{...e,allMessageItemsByID:n}},[Wt]:(e,t)=>({...e,botMessageState:{...e.botMessageState,isLoadingCounter:Math.max(e.botMessageState.isLoadingCounter+t.addToIsLoading,0)}}),[Ut]:(e,t)=>({...e,botMessageState:{...e.botMessageState,isHydratingCounter:Math.max(e.botMessageState.isHydratingCounter+t.addToIsHydrating,0)}}),[Ht]:(e,t)=>({...e,[t.key]:t.value}),[rn]:(e,t)=>({...e,persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,...t.chatState}}}),[sn]:(e,t)=>e.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage===t.hasSentNonWelcomeMessage?e:{...e,persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,hasSentNonWelcomeMessage:t.hasSentNonWelcomeMessage},launcherState:{...e.persistedToBrowserStorage.launcherState,hasSentNonWelcomeMessage:t.hasSentNonWelcomeMessage}}},[$t]:(e,t)=>function(e,t){let{humanAgentState:n}=e,{showUnreadIndicator:a}=e.persistedToBrowserStorage.launcherState;return t.mainWindow&&e.isBrowserPageVisible&&(0!==n.numUnreadMessages&&(n={...n,numUnreadMessages:0}),a=!1),{...e,announceMessage:(s=e,r=t,(0,i.A)(s.persistedToBrowserStorage.launcherState.viewState,r)?s.announceMessage:{messageID:r.mainWindow?"window_ariaWindowOpened":"window_ariaWindowClosed"}),humanAgentState:n,persistedToBrowserStorage:{...e.persistedToBrowserStorage,launcherState:{...e.persistedToBrowserStorage.launcherState,viewState:t,showUnreadIndicator:a}}};var s,r}(e,t.viewState),[Ft]:(e,t)=>({...e,viewChanging:t.viewChanging}),[zt]:(e,t)=>({...e,initialViewChangeComplete:t.changeComplete}),[Nt]:(e,t)=>({...e,botName:t.name,headerDisplayName:e.theme.theme===ot.CARBON_AI?e.headerDisplayName:t.name}),[Rt]:(e,t)=>({...e,botAvatarURL:t.url}),[kt]:(e,t)=>({...e,launcher:{...e.launcher,config:{...e.launcher.config,mobile:{...e.launcher.config.mobile,avatar_url_override:t.source},desktop:{...e.launcher.config.desktop,avatar_url_override:t.source}}}}),[xt]:(e,t)=>({...e,headerDisplayName:t.title}),[qt]:(e,t)=>{const{config:n}=e,{variables:a}=t,s={public:{...n.public}};return{...e,config:s,cssVariableOverrides:a}},[an]:(e,t)=>{const n=t.homeScreenConfig;return{...e,homeScreenConfig:(0,p.A)({},e.homeScreenConfig,n,Si)}},[Vt]:(e,t)=>Bs(e,t.localMessageID,t.propertyName,t.propertyValue),[Zt]:(e,t)=>{const{messageID:n,propertyName:a,propertyValue:s}=t,i=e.allMessagesByID[n];return i?{...e,allMessagesByID:{...e.allMessagesByID,[n]:{...i,history:{...i.history,[a]:s}}}}:e},[jt]:(e,t)=>{const{messageID:n,propertyName:a,propertyValue:s}=t,i=e.allMessagesByID[n];return i?{...e,allMessagesByID:{...e.allMessagesByID,[n]:{...i,ui_state_internal:{...i.ui_state_internal,[a]:s}}}}:e},[Yt]:(e,t)=>{const n=e.allMessagesByID[t.messageID];return n?{...e,allMessagesByID:{...e.allMessagesByID,[t.messageID]:{...n,history:(0,l.A)({},n.history,t.history)}}}:e},[Qt]:(e,t)=>({...e,announceMessage:t.message}),[tn]:e=>({...e,persistedToBrowserStorage:{...e.persistedToBrowserStorage,chatState:{...e.persistedToBrowserStorage.chatState,disclaimersAccepted:{...e.persistedToBrowserStorage.chatState.disclaimersAccepted,[ke?window.location.hostname:"localhost"]:!0}}}}),[on]:(e,{isOpen:t})=>Ls(e,t),[fn]:e=>Ls(e,!e.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen,!0),[cn]:(e,t)=>{const n=(0,l.A)({},e.launcher.config,t.launcherConfig);return{...e,launcher:{...e.launcher,config:n},persistedToBrowserStorage:{...e.persistedToBrowserStorage,launcherState:{...e.persistedToBrowserStorage.launcherState,desktopLauncherIsExpanded:!(!n.is_on||!n.desktop.is_on)&&e.persistedToBrowserStorage.launcherState.desktopLauncherIsExpanded,mobileLauncherIsExtended:!(!n.is_on||!n.mobile.is_on)&&e.persistedToBrowserStorage.launcherState.mobileLauncherIsExtended}}}},[Kt]:(e,t)=>({...e,persistedToBrowserStorage:{...e.persistedToBrowserStorage,launcherState:{...e.persistedToBrowserStorage.launcherState,[t.propertyName]:t.propertyValue}}}),[Xt]:(e,t)=>{const n={...e,launcher:{...e.launcher,config:{...e.launcher.config}}};return t.launcherType&&t.launcherType!==Ze.DESKTOP||(n.launcher.config.desktop={...e.launcher.config.desktop,[t.propertyName]:t.propertyValue}),t.launcherType&&t.launcherType!==Ze.MOBILE||(n.launcher.config.mobile={...e.launcher.config.mobile,[t.propertyName]:t.propertyValue}),n},[Jt]:(e,t)=>Ds(e,{[t.propertyName]:t.propertyValue}),[dn]:e=>({...e,persistedToBrowserStorage:{...e.persistedToBrowserStorage,launcherState:{...e.persistedToBrowserStorage.launcherState,desktopLauncherIsExpanded:!1,desktopLauncherWasMinimized:!0}}}),[hn]:(e,{messageItem:t})=>({...e,iFramePanelState:{...e.iFramePanelState,messageItem:t,isOpen:!0},announceMessage:{messageID:"iframe_ariaOpenedPanel"}}),[un]:e=>({...e,iFramePanelState:{...e.iFramePanelState,isOpen:!1},announceMessage:{messageID:"iframe_ariaClosedPanel"}}),[gn]:(e,t)=>({...e,viewSourcePanelState:{...e.viewSourcePanelState,citationItem:t.citationItem,relatedSearchResult:t.relatedSearchResult,isOpen:t.isOpen}}),[pn]:(e,t)=>({...e,customPanelState:{...e.customPanelState,isOpen:t.isOpen}}),[mn]:(e,t)=>({...e,customPanelState:{...e.customPanelState,options:t.options}}),[En]:(e,t)=>bi(e,{...Ai(e,t.isInputToHumanAgent),...t.newState},t.isInputToHumanAgent),[_n]:(e,t)=>{let n;return n=e.persistedToBrowserStorage.launcherState.viewState.mainWindow&&t.isVisible?0:e.humanAgentState.numUnreadMessages,{...e,isBrowserPageVisible:t.isVisible,humanAgentState:{...e.humanAgentState,numUnreadMessages:n}}},[Sn]:(e,{file:t,isInputToHumanAgent:n})=>{const a=Ai(e,n);return bi(e,{...a,files:[...a.files,t]},n)},[yn]:(e,{fileID:t,isInputToHumanAgent:n})=>{const a=Ai(e,n),s=[...a.files],i=s.findIndex(e=>e.id===t);return-1!==i&&s.splice(i,1),bi(e,{...a,files:s},n)},[Cn]:(e,{localMessageItemID:t})=>{const n=e.botMessageState.localMessageIDs.filter(e=>e!==t),a={...e.allMessageItemsByID};return a[t]&&delete a[t],{...e,allMessageItemsByID:a,botMessageState:{...e.botMessageState,localMessageIDs:n}}},[Rn]:(e,{notification:t,notificationID:n})=>({...e,notifications:e.notifications.concat({id:n,notification:t})}),[xn]:(e,{groupID:t,notificationID:n})=>({...e,notifications:e.notifications.filter(e=>n?e.id!==n:e.notification.groupID!==t)}),[kn]:e=>({...e,notifications:[]}),[vn]:(e,{isInputToHumanAgent:t})=>bi(e,{...Ai(e,t),files:[]},t),[bn]:(e,{fileID:t,errorMessage:n,isInputToHumanAgent:a})=>{const s=Ai(e,a),i=[...s.files],r=i.findIndex(e=>e.id===t);return-1!==r&&(i[r]={...i[r],isError:!0,errorMessage:n,status:Ve.COMPLETE}),bi(e,{...s,files:i},a)},[An]:(e,{localMessageItems:t})=>{const n={...e.allMessageItemsByID};return t.forEach(e=>{n[e.ui_state.id]=e}),{...e,allMessageItemsByID:n}},[Mn]:(e,{isOpen:t})=>({...e,responsePanelState:{...e.responsePanelState,isOpen:t}}),[In]:(e,{localMessageItem:t,isMessageForInput:n})=>({...e,responsePanelState:{...e.responsePanelState,localMessageItem:t,isMessageForInput:n}}),[wn]:(e,{messageID:t})=>Hs(e,{id:t,output:{generic:[]},history:{timestamp:Date.now()}}),[Nn]:(e,{messageID:t,message_options:n})=>{const a=e.allMessagesByID[t],s=(0,l.A)({},a,{message_options:n});return a?{...e,allMessagesByID:{...e.allMessagesByID,[t]:s}}:e},[Tn]:(e,{chunkItem:t,fullMessageID:n,isCompleteItem:a,disableFadeAnimation:s})=>{const i=e.allMessagesByID[n],r=Wa(n,t),o=e.allMessageItemsByID[r];let c,{localMessageIDs:l}=e.botMessageState;if(o)if(a){const e={...o.item,...t};c={...o,item:e,ui_state:{...o.ui_state,isIntermediateStreaming:!1,streamingState:{chunks:[],isDone:!0}}}}else{const e=[...o?.ui_state.streamingState?.chunks||[],t];c={...o,ui_state:{...o?.ui_state,streamingState:{...o?.ui_state.streamingState,chunks:e}}}}else if(c=Fa(t,i,!1),c.ui_state.needsAnnouncement=!1,c.ui_state.disableFadeAnimation=s,c.ui_state.isIntermediateStreaming=!0,c.ui_state.streamingState=a?{chunks:[],isDone:!0}:{chunks:[t],isDone:!1},l=[...l,r],!c.item.response_type)throw new Error(`New chunk item does not have a response_type: ${JSON.stringify(t)}`);return{...e,allMessageItemsByID:{...e.allMessageItemsByID,[r]:c},botMessageState:{...e.botMessageState,localMessageIDs:l}}},[On]:(e,{chatHeaderConfig:t})=>({...e,chatHeaderState:{...e.chatHeaderState,config:{...e.chatHeaderState.config,...t}}}),[Pn]:(e,{isVisible:t})=>({...e,botInputState:{...e.botInputState,stopStreamingButtonState:{...e.botInputState.stopStreamingButtonState,isVisible:t}}}),[Dn]:(e,{isDisabled:t})=>({...e,botInputState:{...e.botInputState,stopStreamingButtonState:{...e.botInputState.stopStreamingButtonState,isDisabled:t}}}),[Ln]:(e,{currentStreamID:t})=>({...e,botInputState:{...e.botInputState,stopStreamingButtonState:{...e.botInputState.stopStreamingButtonState,currentStreamID:t}}}),[Bn]:(e,{config:t})=>({...e,headerAvatarConfig:t})};function bi(e,t,n){return n?{...e,humanAgentState:{...e.humanAgentState,inputState:t}}:{...e,botInputState:t}}function Ai(e,t){return t?e.humanAgentState.inputState:e.botInputState}function Mi(e,t){const n={carbonTheme:e.public.themeConfig?.carbonTheme||Os.carbonTheme,theme:e.public.themeConfig?.theme||Os.theme,corners:Ii(e),whiteLabelTheme:e.public.themeConfig?.whiteLabelTheme},a=function(e,t){let n;return n=e===ot.CARBON_AI?"watsonx":t.public.botName||"watsonx",n}(n.theme,e),s={...ks,notifications:[],botInputState:{fieldVisible:!0,isReadonly:!1,files:[],allowFileUploads:!1,allowMultipleFileUploads:!1,allowedFileUploadTypes:null,stopStreamingButtonState:{currentStreamID:null,isVisible:!1,isDisabled:!1},isReadonly:e.public.isReadonly,fieldVisible:!e.public.isReadonly},humanAgentState:{...xs},botName:a,headerDisplayName:null,botAvatarURL:e.public.botAvatarURL||null,headerAvatarConfig:null,chatWidthBreakpoint:null,chatWidth:null,chatHeight:null,cssVariableOverrides:ei({},n.theme===ot.WHITE_LABEL&&n.whiteLabelTheme||{},n.carbonTheme,n.theme),isHydrated:!1,languagePack:Mt,locale:"en",config:e,originalConfig:e,suspendScrollDetection:!1,homeScreenConfig:zn({}),persistedToBrowserStorage:{...Ns,chatState:{...Ns.chatState,homeScreenState:{...Ns.chatState.homeScreenState}}},launcher:(0,l.A)({},vs,{config:(0,l.A)({},{},{mobile:{}},{is_on:e.public.showLauncher})}),iFramePanelState:bs,viewSourcePanelState:As,isDestroyed:!1,customPanelState:Cs,viewChanging:!1,initialViewChangeComplete:!1,targetViewState:e.public.openChatByDefault?ws:Ts,responsePanelState:Ms,customMenuOptions:null,isBrowserPageVisible:!0,showNonHeaderBackgroundCover:!1,theme:n,layout:Ti(e),chatHeaderState:{config:null}},i=t.userSessionStorageService?.loadLauncherSession();i&&(s.targetViewState=i.viewState,i.viewState=Is,s.persistedToBrowserStorage.launcherState=i);const r=e.public.debug?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({name:"CarbonAIChat",instanceId:`Chat${t.namespace.suffix}`}):void 0;return(0,m.y$)(wi,s,r)}function Ii(e){return!1===Ti(e).showFrame||Be||e.public.themeConfig?.corners===Xe.SQUARE?Xe.SQUARE:Os.corners}function Ti(e){return e.public.themeConfig?.theme===ot.CARBON_AI?{showFrame:e.public.layout?.showFrame??!0,hasContentMaxWidth:e.public.layout?.hasContentMaxWidth??!0}:(0,l.A)({},Ps,e.public.layout)}function wi(e,t){return t&&Ci[t.type]?Ci[t.type](e,t):e}Object.assign(Ci,vi);async function Ni(e,t){const n=e.public,a=new mi;return a.additionalChatParameters=t,a.namespace=new gi(n.namespace),a.userSessionStorageService=new _i(a),a.actions=new ai(a),a.eventBus=new si,a.store=Mi(e,a),a.historyService=new ci(a),a.messageService=new hi(a,n),a.store.subscribe(function(e){let t=e.store.getState().persistedToBrowserStorage;return()=>{const{persistedToBrowserStorage:n}=e.store.getState();t!==n&&(t=n,e.userSessionStorageService.persistChatSession(n.chatState),e.userSessionStorageService.persistLauncherSession(n.launcherState))}}(a)),n.disableWindowTitleChanges||a.store.subscribe(function(e){const{store:t}=e;let n,a,s=t.getState();return()=>{const e=t.getState(),{humanAgentState:i}=t.getState(),{numUnreadMessages:r}=i;r!==s.humanAgentState.numUnreadMessages&&ke&&(r?(clearTimeout(a),n||(n=window.document.title),window.document.title=e.languagePack.agent_newMessage,a=setTimeout(()=>{window.document.title=`(${r}) ${n}`},1e4)):(clearTimeout(a),n&&(window.document.title=n,n=null))),s=e}}(a)),a.customPanelManager=function(e){const t={[Vn]:ri(e)};return Object.freeze({getPanel(){return t[Vn]}})}(a),ca(a,a.store.getState().locale,a.store.getState().languagePack),a.writeableElements={},ke&&(a.writeableElements={[Ke.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT]:document.createElement("div"),[Ke.WELCOME_NODE_BEFORE_ELEMENT]:document.createElement("div"),[Ke.HEADER_BOTTOM_ELEMENT]:document.createElement("div"),[Ke.BEFORE_INPUT_ELEMENT]:document.createElement("div"),[Ke.HOME_SCREEN_HEADER_BOTTOM_ELEMENT]:document.createElement("div"),[Ke.HOME_SCREEN_AFTER_STARTERS_ELEMENT]:document.createElement("div"),[Ke.HOME_SCREEN_BEFORE_INPUT_ELEMENT]:document.createElement("div"),[Ke.CUSTOM_PANEL_ELEMENT]:document.createElement("div")}),n.debug&&(Xn=!0),a}const Ri={openChatByDefault:!1,showLauncher:!0,shouldTakeFocusIfOpensAutomatically:!0,serviceDesk:{},messaging:{},themeConfig:{}};function ki(e,t){return{localMessages:e,originalMessage:t}}async function xi(e,t,n,a=!0){const s=function(e,t,n){const a=t?.nickname;let s;switch(e){case pt.HUMAN_AGENT_JOINED:s=a?"agent_agentJoinedName":"agent_agentJoinedNoName";break;case pt.RELOAD_WARNING:s="agent_youConnectedWarning";break;case pt.HUMAN_AGENT_LEFT_CHAT:s=a?"agent_agentLeftChat":"agent_agentLeftChatNoName";break;case pt.HUMAN_AGENT_ENDED_CHAT:s=a?"agent_agentEndedChat":"agent_agentEndedChatNoName";break;case pt.TRANSFER_TO_HUMAN_AGENT:s=a?"agent_transferring":"agent_transferringNoName";break;case pt.USER_ENDED_CHAT:s="agent_youEndedChat";break;case pt.CHAT_WAS_ENDED:s="agent_conversationWasEnded";break;case pt.DISCONNECTED:s="agent_disconnected";break;case pt.RECONNECTED:s="agent_reconnected";break;case pt.SHARING_REQUESTED:s="agent_sharingRequested";break;case pt.SHARING_ACCEPTED:s="agent_sharingAccepted";break;case pt.SHARING_DECLINED:s="agent_sharingDeclined";break;case pt.SHARING_CANCELLED:s="agent_sharingCancelled";break;case pt.SHARING_ENDED:s="agent_sharingEnded";break;default:return""}return s&&n.formatMessage({id:s},{personName:a})}(e,n,t.intl),i=Oi(e),{originalMessage:r,localMessage:o}=i;return o.item.text=s,n&&(r.message_options=r.message_options||{},r.message_options.response_user_profile=n),a&&await t.fire({type:Qe.HUMAN_AGENT_PRE_RECEIVE,data:r}),fs(r),a&&await t.fire({type:Qe.HUMAN_AGENT_RECEIVE,data:r}),i}function Oi(e){const t={response_type:mt.TEXT,agent_message_type:e},n=Aa(t);return{localMessage:Fa(t,n),originalMessage:n}}async function Pi(e,t,n){t&&await ha(e,async({localMessages:e,originalMessage:t})=>{await ha(e,async(e,a)=>{await n.actions.handleUserDefinedResponseItems(e,t),n.store.dispatch(Hn.addLocalMessageItem(e,t,0===a))})})}async function Di(e,t,n){const a=function(e){const{agent_botReturned:t}=e;if(!t)return null;const{originalMessage:n,localMessage:a}=Oi(null);return a.item.text=t,{originalMessage:n,localMessage:a}}(n.store.getState().languagePack);if(a){const s=n.restartCount;$e(()=>{s===n.restartCount&&Pi([ki([a.localMessage],a.originalMessage)],!t,n)},e)}}async function Li(e,t,n,a,s){const i=await xi(e,s,t,n);await Pi([ki([i.localMessage],i.originalMessage)],!a,s)}const{FROM_USER:Bi,RECONNECTED:Hi,DISCONNECTED:Wi,HUMAN_AGENT_ENDED_CHAT:Ui,HUMAN_AGENT_JOINED:$i,USER_ENDED_CHAT:Fi,CHAT_WAS_ENDED:zi,TRANSFER_TO_HUMAN_AGENT:qi,HUMAN_AGENT_LEFT_CHAT:Gi,RELOAD_WARNING:Vi,SHARING_CANCELLED:ji,SHARING_DECLINED:Zi,SHARING_ACCEPTED:Yi,SHARING_REQUESTED:Ki,SHARING_ENDED:Xi}=pt;class Qi{constructor(e){this.chatStarted=!1,this.showingDisconnectedError=!1,this.isHumanAgentTyping=!1,this.uploadingFiles=new Set,this.showLeaveWarning=!0,this.serviceManager=e}getCustomServiceDeskName(){return this.serviceManager.store.getState().config.public.serviceDeskFactory?this.serviceDesk.getName?.():void 0}async initialize(){if(this.serviceDesk)throw new Error("A service desk has already been created!");const{store:e,instance:t}=this.serviceManager,n=e.getState(),{config:a,persistedToBrowserStorage:s}=n,i=(0,d.A)(s.chatState.humanAgentState.serviceDeskState);if(this.serviceDeskCallback=new Ji(this.serviceManager,this),a.public.serviceDeskFactory){const e={callback:this.serviceDeskCallback,instance:t,persistedState:i};this.serviceDesk=await a.public.serviceDeskFactory(e),function(e){if(e)if("object"!=typeof e);else{["startChat","endChat","sendMessageToAgent"].forEach(t=>{e[t]});const t=e.getName?.();if(!t)throw Error("The custom service desk does not have a name.");if(t&&("string"!=typeof t||t.length>40))throw new Error(`The custom service desk name "${t}" is not valid.`)}else;}(this.serviceDesk)}this.showLeaveWarning=!this.serviceDesk?.reconnect}async startChat(e,t){if(!this.serviceDesk)throw new Error("A service desk has not been configured.");if(this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState.isSuspended&&await this.endChat(!0,!0,!1),this.chatStarted)throw new Error("A chat is already running. A call to endChat must be made before a new chat can start.");const{serviceManager:n}=this;try{this.chatStarted=!0,this.isHumanAgentTyping=!1,this.uploadingFiles.clear(),this.serviceManager.store.dispatch(ds(this.uploadingFiles.size>0));const a={type:Qe.HUMAN_AGENT_PRE_START_CHAT,message:t};if(await n.fire(a),a.cancelStartChat)return this.chatStarted=!1,await this.fireEndChat(!1,!0),void n.store.dispatch(rs(!1,null));const s=n.store.getState().config.public.serviceDesk?.agentJoinTimeoutSeconds;s&&(this.waitingForHumanAgentJoinedTimer=setTimeout(()=>this.handleHumanAgentJoinedTimeout(),1e3*s)),n.store.dispatch(rs(!0,e.ui_state.id)),await this.serviceDesk.startChat(t,{preStartChatPayload:a.preStartChatPayload})}catch(e){throw this.serviceDeskCallback&&await this.serviceDeskCallback.setErrorStatus({type:ut.CONNECTING,logInfo:e}),n.store.dispatch(rs(!1,null)),this.chatStarted=!1,this.cancelHumanAgentJoinedTimer(),e}}async firePreEndChat(e){const t={type:Qe.HUMAN_AGENT_PRE_END_CHAT,endedByHumanAgent:e,preEndChatPayload:null,cancelEndChat:!1};return await this.serviceManager.fire(t),t}async fireEndChat(e,t){await this.serviceManager.fire({type:Qe.HUMAN_AGENT_END_CHAT,endedByHumanAgent:e,requestCancelled:t})}async endChat(e,t=!0,n=!0){if(!this.chatStarted||!this.serviceDesk)return;const{isConnected:a}=this.persistedHumanAgentState();let s;if(a&&(s=await this.firePreEndChat(!1),s.cancelEndChat))return;const i=e?Fi:zi;await this.doEndChat(!1,s?.preEndChatPayload,t,n,i)}async doEndChat(e,t,n,a,s){const{isConnected:i}=this.persistedHumanAgentState(),r=this.isSuspended();this.cancelHumanAgentJoinedTimer(),this.closeScreenShareRequestModal(dt.CANCELLED);try{await Kn(this.serviceDesk.endChat({endedByHumanAgent:e,preEndChatPayload:t}),5e3)}catch(e){}if(i&&n){const{responseUserProfile:e}=this.persistedHumanAgentState();await Li(s,e,!0,r,this.serviceManager)}this.chatStarted=!1,this.isHumanAgentTyping=!1,this.serviceManager.store.dispatch(cs()),await this.fireEndChat(e,!i),i&&a&&await Di(1500,r,this.serviceManager)}async sendMessageToAgent(e,t){if(!this.serviceDesk||!this.chatStarted)return;const{serviceManager:n}=this;fs(t);const a=Ca(e);a.input.agent_message_type=Bi,await n.fire({type:Qe.HUMAN_AGENT_PRE_SEND,data:a,files:t});const s=da(a,a.input.text),i=s.ui_state.id,r=[];s.item.text&&r.push(ki([s],a)),t.forEach(e=>{const t=function(e){return fa({id:e.id,input:{text:e.file.name,message_type:gt.FILE,agent_message_type:pt.FROM_USER},history:{file_upload_status:Ve.UPLOADING}})}(e),n=da(t,t.input.text,e.id);r.push(ki([n],t)),this.uploadingFiles.add(e.id)}),this.serviceManager.store.dispatch(ds(this.uploadingFiles.size>0)),await Pi(r,!this.isSuspended(),n);let o=!1,c=!1;setTimeout(()=>{o||c||this.setMessageErrorState(s.fullMessageID,bt.RETRYING)},3e3),setTimeout(()=>{o||this.setMessageErrorState(s.fullMessageID,bt.FAILED)},2e4);const l={filesToUpload:t};try{await this.serviceDesk.sendMessageToAgent(a,i,l),o=!0,this.setMessageErrorState(s.fullMessageID,bt.NONE),await n.fire({type:Qe.HUMAN_AGENT_SEND,data:a,files:t})}catch(e){c=!0,this.setMessageErrorState(s.fullMessageID,bt.FAILED)}}filesSelectedForUpload(e){if(this.serviceDesk&&this.chatStarted)try{this.serviceDesk.filesSelectedForUpload?.(e)}catch(e){}}async userReadMessages(){if(this.serviceDesk&&this.chatStarted)try{await this.serviceDesk.userReadMessages()}catch(e){}}async checkAreAnyHumanAgentsOnline(e){let t;const n=this.serviceManager.restartCount;if(this.serviceDesk?.areAnyAgentsOnline)try{const n=this.serviceManager.store.getState().config.public.serviceDesk?.availabilityTimeoutSeconds,a=n?1e3*n:5e3,s=await Kn(this.serviceDesk.areAnyAgentsOnline(e),a);t=!0===s?lt.ONLINE:!1===s?lt.OFFLINE:lt.UNKNOWN}catch(e){t=lt.OFFLINE}else t=lt.UNKNOWN;return n===this.serviceManager.restartCount&&this.serviceManager.fire({type:Qe.HUMAN_AGENT_ARE_ANY_AGENTS_ONLINE,areAnyAgentsOnline:t}),t}async userTyping(e){if(this.serviceDesk&&this.chatStarted)try{await(this.serviceDesk.userTyping?.(e))}catch(e){}}setMessageErrorState(e,t){this.serviceManager.store.dispatch(Hn.setMessageErrorState(e,t))}async handleHumanAgentJoinedTimeout(){const e=this.serviceManager.store.getState().languagePack.errors_noHumanAgentsJoined,{originalMessage:t,localMessage:n}=za(e);await Pi([ki([n],t)],!this.isSuspended(),this.serviceManager),this.endChat(!1)}cancelHumanAgentJoinedTimer(){this.waitingForHumanAgentJoinedTimer&&(clearTimeout(this.waitingForHumanAgentJoinedTimer),this.waitingForHumanAgentJoinedTimer=null)}async screenShareUpdateRequestState(e){if(!this.persistedHumanAgentState().isConnected)return;let t;switch(this.closeScreenShareRequestModal(e),e){case dt.ACCEPTED:t=Yi;break;case dt.DECLINED:t=Zi;break;case dt.CANCELLED:t=ji;break;case dt.ENDED:t=Xi;break;default:return}await this.addHumanAgentLocalMessage(t)}async screenShareStop(){this.serviceManager.store.dispatch(hs(!1)),await this.addHumanAgentLocalMessage(Xi),await(this.serviceDesk?.screenShareStop?.())}async handleHydration(e,t){const{store:n}=this.serviceManager;let a=!1;const{isConnected:s}=this.persistedHumanAgentState();if(s){if(this.chatStarted=!0,e&&this.serviceDesk?.reconnect)try{n.dispatch(os(!0)),setTimeout(this.serviceManager.appWindow.requestFocus),a=await this.serviceDesk.reconnect()}catch(e){}if(n.dispatch(os(!1)),!this.persistedHumanAgentState().isConnected)return void(this.chatStarted=!1);if(setTimeout(this.serviceManager.appWindow.requestFocus),a)this.showLeaveWarning=!1;else{this.chatStarted=!1;const e=this.isSuspended();if(n.dispatch(cs()),t){const{responseUserProfile:t}=this.persistedHumanAgentState();await Li(pt.CHAT_WAS_ENDED,t,!1,e,this.serviceManager),await Di(0,e,this.serviceManager)}}}}closeScreenShareRequestModal(e){this.serviceManager.store.dispatch(us(!1)),this.screenShareRequestPromise&&(this.screenShareRequestPromise.doResolve(e),this.screenShareRequestPromise=null),this.serviceManager.store.dispatch(hs(e===dt.ACCEPTED))}async addHumanAgentLocalMessage(e,t,n=!0){t||(t=this.persistedHumanAgentState().responseUserProfile);const{localMessage:a,originalMessage:s}=await xi(e,this.serviceManager,t,n);await Pi([ki([a],s)],!this.isSuspended(),this.serviceManager)}persistedHumanAgentState(){return this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState}isSuspended(){return this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState.isSuspended}}class Ji{constructor(e,t){this.serviceManager=e,this.service=t}updateCapabilities(e){this.serviceManager.store.dispatch(function(e){return{type:Ja,capabilities:e}}((0,d.A)(e)))}async updateAgentAvailability(e){this.service.chatStarted&&this.serviceManager.store.dispatch(function(e){return{type:ja,availability:e}}(e))}async agentJoined(e){this.service.chatStarted&&(this.service.cancelHumanAgentJoinedTimer(),this.serviceManager.store.dispatch(ls(e)),await this.service.addHumanAgentLocalMessage($i,e),this.service.showLeaveWarning&&(await this.service.addHumanAgentLocalMessage(Vi,null,!1),this.service.showLeaveWarning=!1))}async agentReadMessages(){this.service.chatStarted}async agentTyping(e){this.persistedHumanAgentState().isConnected&&e!==this.service.isHumanAgentTyping&&(this.serviceManager.store.dispatch(function(e){return{type:is,isTyping:e}}(e)),this.service.isHumanAgentTyping=e)}async sendMessageToUser(e,t){if(!this.service.chatStarted||!e)return;const n="string"==typeof e?ba(e):e;fa(n),n.output?.generic?.length&&n.output.generic.forEach(e=>{e.agent_message_type||(e.agent_message_type=pt.FROM_HUMAN_AGENT)});const{serviceManager:a}=this;let s;void 0===t?s=this.persistedHumanAgentState().responseUserProfile:(s=this.persistedHumanAgentState().responseUserProfiles[t],s||(s=this.persistedHumanAgentState().responseUserProfile)),await a.fire({type:Qe.HUMAN_AGENT_PRE_RECEIVE,data:n,responseUserProfile:s}),n.message_options=n.message_options||{},n.message_options.response_user_profile=s;const i=n.output.generic.map(e=>Fa(e,n));await Pi([ki(i,n)],!this.service.isSuspended(),this.serviceManager),await a.fire({type:Qe.HUMAN_AGENT_RECEIVE,data:n,responseUserProfile:s})}async beginTransferToAnotherAgent(e){this.service.chatStarted&&(e&&this.serviceManager.store.dispatch(ls(e)),await this.service.addHumanAgentLocalMessage(qi,e))}async agentLeftChat(){this.service.chatStarted&&(await this.service.addHumanAgentLocalMessage(Gi),this.service.isHumanAgentTyping=!1,this.serviceManager.store.dispatch({type:Xa}))}async agentEndedChat(){if(!this.service.chatStarted)return;const e=await this.service.firePreEndChat(!0);e.cancelEndChat||await this.service.doEndChat(!0,e.preEndChatPayload,!0,!0,Ui)}async setErrorStatus(e){if(!this.service.chatStarted)return;const{type:t,logInfo:n}=e,{store:a}=this.serviceManager,{isConnecting:s}=a.getState().humanAgentState;switch(s&&e.type===ut.DISCONNECTED&&e.isDisconnected&&(e={type:ut.CONNECTING}),e.type){case ut.DISCONNECTED:e.isDisconnected?(this.service.showingDisconnectedError=!0,await this.service.addHumanAgentLocalMessage(Wi,null,!0),a.dispatch(Hn.updateInputState({isReadonly:!0},!0))):this.service.showingDisconnectedError&&(this.service.showingDisconnectedError=!1,await this.service.addHumanAgentLocalMessage(Hi,null,!0),a.dispatch(Hn.updateInputState({isReadonly:!1},!0)));break;case ut.CONNECTING:{const{languagePack:t}=this.serviceManager.store.getState(),n=e.messageToUser||t.errors_connectingToHumanAgent,{originalMessage:a,localMessage:i}=za(n);await Pi([ki([i],a)],!this.service.isSuspended(),this.serviceManager),this.serviceManager.store.dispatch(rs(!1,null)),this.service.chatStarted=!1,this.service.cancelHumanAgentJoinedTimer(),await this.service.fireEndChat(!1,s);break}case ut.USER_MESSAGE:this.service.setMessageErrorState(e.messageID,bt.FAILED)}}async setFileUploadStatus(e,t,n){const{store:a}=this.serviceManager;if(a.getState().allMessagesByID[e])if(Ve.COMPLETE,t){if(a.dispatch(Hn.setMessageResponseHistoryProperty(e,"file_upload_status",Ve.COMPLETE)),a.dispatch(Hn.setMessageResponseHistoryProperty(e,"error_state",bt.FAILED)),bt.FAILED,n){const{originalMessage:e,localMessage:t}=za(n);t.item.agent_message_type=pt.INLINE_ERROR,await Pi([ki([t],e)],!this.service.isSuspended(),this.serviceManager)}}else a.dispatch(Hn.setMessageResponseHistoryProperty(e,"file_upload_status",Ve.SUCCESS)),a.dispatch(Hn.announceMessage({messageID:"fileSharing_ariaAnnounceSuccess"}));else t&&a.dispatch(Hn.fileUploadInputError(e,n,!0));this.service.uploadingFiles.delete(e),this.serviceManager.store.dispatch(ds(this.service.uploadingFiles.size>0))}async screenShareRequest(){return this.persistedHumanAgentState().isConnected?(this.service.screenShareRequestPromise||(this.service.screenShareRequestPromise=Ws(),this.serviceManager.store.dispatch(us(!0)),await this.service.addHumanAgentLocalMessage(Ki)),this.service.screenShareRequestPromise):Promise.reject(new Error("Cannot request screen sharing if no chat is in progress."))}async screenShareEnded(){const e=this.serviceManager.store.getState().humanAgentState.isScreenSharing,t=this.service.screenShareRequestPromise;this.service.closeScreenShareRequestModal(dt.CANCELLED),e?(this.serviceManager.store.dispatch(hs(!1)),await this.service.addHumanAgentLocalMessage(Xi)):t&&await this.service.addHumanAgentLocalMessage(ji)}persistedHumanAgentState(){return this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState}persistedState(){return this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState.serviceDeskState}updatePersistedState(e,t=!0){const{store:n}=this.serviceManager;let a;a=t?(0,l.A)({},n.getState().persistedToBrowserStorage.chatState.humanAgentState.serviceDeskState,e):(0,d.A)(e),n.dispatch(function(e){return{type:as,state:e}}(fs(a)))}}o.extend(c);let er=class{constructor(e,t,n){const a=(0,l.A)({},Ri,e);this.additionalChatParameters=n||{},this.appConfig={public:a},this.customHostElement=t}async start(){try{return(await this.startInternal()).instance}catch(e){return null}}async startInternal(){this.serviceManager=await Ni(this.appConfig,this.additionalChatParameters);const[e,t,n]=await Promise.all([sa(this.serviceManager.store.getState().languagePack),aa(this.serviceManager.store.getState().locale),Promise.resolve(this.additionalChatParameters.render)]);var a;this.serviceManager.customHostElement=this.customHostElement,this.serviceManager.humanAgentService=(a=this.serviceManager,new Qi(a)),ca(this.serviceManager,t.name,e),o.locale(t);const s=async()=>{await n({serviceManager:this.serviceManager});const e=this.serviceManager.store.getState(),{wasLoadedFromBrowser:t}=e.persistedToBrowserStorage.launcherState,{targetViewState:a}=e,{openChatByDefault:s}=e.config.public;if(a.mainWindow){let e=nt.SESSION_HISTORY;s&&!t&&(e=nt.OPEN_BY_DEFAULT),await this.serviceManager.actions.changeView(a,{mainWindowOpenReason:e})}else{const e=Je.WEB_CHAT_LOADED,t=!1,n=(0,i.A)(a,Is);await this.serviceManager.actions.changeView(a,{viewChangeReason:e},t,n)}return this.serviceManager.store.dispatch(Hn.setInitialViewChangeComplete(!0)),this.serviceManager.instance};return this.serviceManager.instance=function({serviceManager:e,callRender:t}){let n=!1,a={render:()=>n?Promise.resolve(a):(n=!0,t()),on:t=>(e.eventBus.on(t),a),off:t=>(e.eventBus.off(t),a),once:t=>(e.eventBus.once(t),a),updateLanguagePack:t=>e.actions.updateLanguagePack(t),updateLocale:t=>{const n=aa(t),a=sa(e.store.getState().languagePack);return Promise.all([n,a]).then(([t,n])=>{o.locale(t),ca(e,t.name,n),e.messageService.pendingLocale=!0,e.messageService.localeIsExplicit=!0})},updateCSSVariables:(t,n)=>e.actions.updateCSSVariables(t,n),send:async(t,n)=>{if($n(e.store.getState()).isReadonly)throw new Error("You are unable to send messages in read only mode.");return e.actions.send(t,et.INSTANCE_SEND,n)},doAutoScroll:(t={})=>{e.mainWindow?.doAutoScroll?.(t)},destroy:()=>{e.store.dispatch(Hn.setAppStateValue("isDestroyed",!0)),e.container?.remove(),a=void 0},updateInputFieldVisibility:t=>{e.store.dispatch(Hn.updateInputState({fieldVisible:t},!1))},updateInputIsDisabled:t=>{e.store.dispatch(Hn.updateInputState({isReadonly:t},!1))},updateBotUnreadIndicatorVisibility:t=>{e.store.dispatch(Hn.setLauncherProperty("showUnreadIndicator",t))},changeView:async t=>{let a=!1;n||(a=!0);const s=Object.values(je);"string"==typeof t?s.includes(t)||(s.join(", "),a=!0):"object"==typeof t?Object.keys(t).forEach(e=>{s.includes(e)||(s.join(", "),a=!0)}):a=!0,a||await e.actions.changeView(t,{viewChangeReason:Je.CALLED_CHANGE_VIEW})},notifications:{addNotification:t=>{e.actions.addNotification(t)},removeNotifications:t=>{e.actions.removeNotification(t)},removeAllNotifications:()=>{e.actions.removeAllNotifications()}},updateMainHeaderTitle:t=>{t||(t=null),e.actions.updateMainHeaderTitle(t)},updateHomeScreenConfig:t=>{const n=(0,d.A)(t);e.store.getState().theme.theme===ot.CARBON_AI&&t?.background&&delete n.background,e.actions.updateHomeScreenConfig(zn(n))},getState:()=>e.actions.getPublicWebChatState(),writeableElements:la(e),scrollToMessage:(t,n)=>{e.mainWindow?.doScrollToMessage(t,n)},updateLauncherConfig:t=>e.actions.updateLauncherConfig(t),customPanels:e.customPanelManager,updateCustomMenuOptions:t=>{e.store.dispatch(Hn.setAppStateValue("customMenuOptions",t))},restartConversation:async()=>a.messaging.restartConversation(),updateIsLoadingCounter(t){const{store:n}=e;if("increase"===t)n.dispatch(Hn.addIsLoadingCounter(1));else if("decrease"===t){if(n.getState().botMessageState.isLoadingCounter<=0)return;n.dispatch(Hn.addIsLoadingCounter(-1))}},updateIsChatLoadingCounter(t){const{store:n}=e;if("increase"===t)n.dispatch(Hn.addIsHydratingCounter(1));else if("decrease"===t){if(n.getState().botMessageState.isHydratingCounter<=0)return;n.dispatch(Hn.addIsHydratingCounter(-1))}},updateHeaderConfig:t=>{const n=(0,d.A)(t);e.store.dispatch(Hn.updateChatHeaderConfig(n))},updateMainHeaderAvatar:t=>{e.store.dispatch(Hn.updateMainHeaderAvatar(t))},updateBotName:t=>e.actions.updateBotName(t),updateBotAvatarURL:t=>e.actions.updateBotAvatarURL(t),elements:{getMainWindow:function(){return{addClassName:t=>e.mainWindow?.addClassName(t),removeClassName:t=>e.mainWindow?.removeClassName(t)}},getMessageInput:function(){return{getHTMLElement:()=>e.mainWindow?.getMessageInput()?.getHTMLElement(),setValue:t=>e.mainWindow?.getMessageInput()?.setValue(t),setEnableEnterKey:t=>e.mainWindow?.getMessageInput()?.setEnableEnterKey(t),addChangeListener:t=>e.mainWindow?.getMessageInput()?.addChangeListener(t),removeChangeListener:t=>e.mainWindow?.getMessageInput()?.removeChangeListener(t)}},getHomeScreenInput:function(){return{getHTMLElement:()=>e.mainWindow?.getHomeScreenInput()?.getHTMLElement(),setValue:t=>e.mainWindow?.getHomeScreenInput()?.setValue(t),setEnableEnterKey:t=>e.mainWindow?.getHomeScreenInput()?.setEnableEnterKey(t),addChangeListener:t=>e.mainWindow?.getHomeScreenInput()?.addChangeListener(t),removeChangeListener:t=>e.mainWindow?.getHomeScreenInput()?.removeChangeListener(t)}}},messaging:{addMessage:(t,n={})=>(e.messageService.messageLoadingManager.end(),e.actions.receive(t,n?.isLatestWelcomeNode??!1,null,{disableFadeAnimation:n?.disableFadeAnimation})),addMessageChunk:async(t,n={})=>{e.messageService.messageLoadingManager.end();try{await e.actions.receiveChunk(t,null,n)}catch(e){throw e}},removeMessages:async t=>e.actions.removeMessages(t),clearConversation:()=>e.actions.restartConversation({skipHydration:!0,endHumanAgentConversation:!1,fireEvents:!1}),insertHistory:t=>e.actions.insertHistory(t),restartConversation:async()=>e.actions.restartConversation()},requestFocus:()=>{e.appWindow?.requestFocus()},serviceDesk:{endConversation:()=>e.actions.agentEndConversation(!1),updateIsSuspended:async t=>e.actions.agentUpdateIsSuspended(t)}};if(e.store.getState().config.public.exposeServiceManagerForTesting){const{instance:t,...n}=e;a.serviceManager=n}return e.store.getState().config.public.debug,a}({serviceManager:this.serviceManager,callRender:()=>{const e=s();return this.serviceManager.renderPromise=e,e}}),{instance:this.serviceManager.instance,serviceManager:this.serviceManager}}};const tr=r.createContext(null),nr=r.createContext(null);function ar(){return(0,r.useContext)(nr)}const sr=Ne(function(){const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const n=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),n});function ir(e,t,n,a=!1){setTimeout(()=>{e&&(a&&e.scroll?e.scroll({top:t,left:n,behavior:"smooth"}):(e.scrollTop=t,e.scrollLeft=n))})}function rr(e,t=!1){e&&document.activeElement!==e&&(0,S.tabbable)(e,{getShadowRoot:!0})&&e.focus({preventScroll:t})}function or(e,t=!1,n=!1){e&&(t?setTimeout(()=>{or(e)}):e.current&&rr(e.current,n))}function cr(e){const t=(0,S.tabbable)(e,{getShadowRoot:!0});return!!t?.length&&(rr(t[0]),!0)}const lr=r.forwardRef((e,t)=>r.createElement("div",{ref:t,...e,className:`WACVisuallyHidden ${e.className||""}`},e.children));lr.displayName="VisuallyHidden";const dr=new Set(["button","date","datetime-local","email","file","month","number","range","reset","search","submit","tel","text","time","url","week"]);class ur extends r.PureComponent{constructor(){super(...arguments),this.ref1=r.createRef(),this.ref2=r.createRef(),this.useRef1=!0,this.doAnnouncements=()=>{const e=[];this.pendingValues.forEach(t=>{"string"==typeof t?e.push(t):hr(t,e)});const t=this.useRef1?this.ref1.current:this.ref2.current;if(t){t.innerText=e.join(" ");(this.useRef1?this.ref2.current:this.ref1.current).innerHTML=""}this.useRef1=!this.useRef1,this.pendingValues=null}}announceValue(e){if(e)if(this.pendingValues||(this.pendingValues=[],setTimeout(this.doAnnouncements,250)),"string"==typeof e||function(e){return void 0!==e.nodeType}(e))this.pendingValues.push(e);else if(e.messageID){const t=this.props.intl.formatMessage({id:e.messageID},e.messageValues);this.pendingValues.push(t)}else this.pendingValues.push(e.messageText)}render(){return r.createElement(lr,{className:"WACAriaAnnouncer"},r.createElement("div",{ref:this.ref1,"aria-live":"polite"}),r.createElement("div",{ref:this.ref2,"aria-live":"polite"}))}}function hr(e,t){!function(e){return 1===e?.nodeType}(e)?function(e){return 3===e?.nodeType}(e)&&gr(e.data,t):ke&&"none"===window.getComputedStyle(e).display||"true"===e.getAttribute("aria-hidden")||e.hasAttribute("data-wac-exclude-node-read")||(gr(e.getAttribute("aria-label"),t),function(e){return"INPUT"===e?.tagName}(e)&&dr.has(e.type.toLowerCase())?""===e.value?gr(e.placeholder,t):gr(e.value,t):!function(e){return"TEXTAREA"===e?.tagName}(e)?function(e){return"IMG"===e?.tagName}(e)&&gr(e.alt,t):""===e.value&&gr(e.placeholder,t),e.shadowRoot&&e.shadowRoot.childNodes?.forEach(e=>{hr(e,t)}),e.childNodes&&e.childNodes.forEach(e=>{hr(e,t)}))}function gr(e,t){e&&(e=e.trim())&&t.push(e.replaceAll("\n"," "))}function mr(e){const t=(0,g.tz)(),{store:n}=ar(),a=(0,r.useRef)(),s=(0,r.useCallback)(e=>{e&&(a.current?a.current.announceValue(e):setTimeout(()=>a.current?.announceValue(e)))},[]),i=(0,r.useRef)();return(0,r.useEffect)(()=>n.subscribe(()=>{const e=n.getState().announceMessage;e!==i.current&&(s(e),i.current=e)}),[n,s]),r.createElement(tr.Provider,{value:s},e.children,r.createElement(ur,{intl:t,ref:a}))}const pr=r.createContext(null);function fr(){return(0,r.useContext)(pr)}const Er=e=>{(0,r.useEffect)(e,[])};function _r(e){const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e}),t.current}function Sr(e,t){return t?e.launcher_isOpen:e.launcher_isClosed}var vr;function yr(e,t){return t?`${t}-${e}`:e}!function(e){e.CLOSE_CHAT="close_chat",e.LAUNCHER="launcher_open_chat",e.INPUT="input_field",e.INPUT_SEND="input_send"}(vr||(vr={}));const Cr=(0,r.forwardRef)(function(e,t){const{onToggleOpen:n,languagePack:a,unreadHumanAgentCount:s,intl:i,showUnreadIndicator:o,className:c,tabIndex:l,launcherHidden:d}=e,u=(0,E.d4)(e=>e.theme.theme===ot.CARBON_AI?void 0:e.launcher.config.desktop.avatar_url_override),h=(0,E.d4)(e=>e.theme.theme===ot.CARBON_AI),g=r.createRef();(0,r.useImperativeHandle)(t,()=>({requestFocus:()=>{or(g)}}));let m=Sr(a,d);0!==s&&(m+=`. ${i.formatMessage({id:"icon_ariaUnreadMessages"},{count:s})}`);let p=h?r.createElement(v.A,{size:24,className:"WACLauncher_svg"}):r.createElement(y.A,{size:24,className:"WACLauncher__svg"});return u&&(p=r.createElement("img",{className:"WACLauncher__Avatar",src:u,alt:"","aria-hidden":!0})),r.createElement("div",{className:f("WACLauncher__ButtonContainer","WACLauncher__ButtonContainer--round",c,{"WACLauncher__ButtonContainer--hidden":d})},r.createElement(C.$nd,{"aria-label":m,className:"WACLauncher__Button","data-testid":vr.LAUNCHER,kind:_s.PRIMARY,type:"button",onClick:n,ref:g,tabIndex:l},p,(0!==s||o)&&r.createElement("div",{className:"WAC__countIndicator"},0!==s?s:"")))});function br(e){const{languagePack:t,intl:n,launcherConfig:a,launcherComplexRef:s,launcherRef:i,onOpen:o,onMinimize:c,unreadHumanAgentCount:l,showUnreadIndicator:d,desktopLauncherIsExpanded:u,launcherHidden:h,className:g}=e,{launcher_desktopGreeting:m,launcher_closeButton:p,launcher_ariaIsExpanded:E}=t;return r.createElement("div",{className:f("WACLauncher__ButtonContainer","WACLauncherComplex__Container",g,{"WACLauncher__ButtonContainer--hidden":h}),ref:s},r.createElement("button",{className:"WACLauncherComplex__ContentButton",type:"button",onClick:o,disabled:!u},r.createElement("div",{className:f("WACWidget__textEllipsis",{WACLauncherComplex__Text:!h})},a.desktop.title?a.desktop.title:m)),r.createElement(Cr,{languagePack:t,intl:n,ref:i,onToggleOpen:o,className:"WACLauncherComplex__SmallLauncherContainer",unreadHumanAgentCount:l,showUnreadIndicator:d,launcherHidden:h}),r.createElement(C.vwO,{className:"WACLauncher__CloseButton","aria-label":E,onClick:c,disabled:!u},r.createElement("div",{className:"WACLauncher__CloseButtonInnerWrapper"},r.createElement(b.A,{className:"WACLauncher__CloseButtonIcon"}),p)))}const Ar=e=>{const{launcherRef:t,onDoToggle:n,requestFocus:a,launcherHidden:s}=e,i=ar(),o=fr(),c=(0,g.tz)(),l=(0,E.d4)(e=>e.persistedToBrowserStorage.launcherState),{desktopLauncherWasMinimized:d,desktopLauncherIsExpanded:u,bounceTurn:h,showUnreadIndicator:m,viewState:p}=l,f=(0,E.d4)(e=>e.launcher).config,{time_to_expand:_,new_expand_time:S}=f.desktop,v=f.desktop.is_on,y=(0,E.d4)(e=>e.humanAgentState.numUnreadMessages),[C,b]=(0,r.useState)(""),[A,M]=(0,r.useState)(""),I=(0,r.useRef)(),T=(0,r.useRef)();T.current=s;const w=(0,r.useRef)(!1),N=(0,r.useRef)();N.current=h;const R=(0,r.useRef)(),k=(0,r.useRef)(),x=(0,r.useRef)(),O=(0,r.useRef)(),P=(0,r.useRef)(),D=(0,r.useRef)(),L=(0,r.useCallback)(()=>{const e=`${I.current?.offsetHeight}px`;I.current?.style?.setProperty&&I.current.style.setProperty("--cds-chat-LAUNCHER-desktop-expanded-height",e)},[]),B=(0,r.useCallback)(()=>{T.current||(i.store.dispatch(Hn.setLauncherProperty("desktopLauncherIsExpanded",!0)),L(),M("WACLauncherComplex__Container--introAnimation"))},[L,i.store]),H=(0,r.useCallback)(()=>{R.current=setTimeout(()=>{B()},_)},[_,B]),W=(0,r.useCallback)(()=>{clearTimeout(R.current),clearTimeout(k.current)},[]),U=(0,r.useCallback)(()=>{T.current||b("WACLauncher__ButtonContainer--bounceAnimation")},[]),$=(0,r.useCallback)(()=>{T.current||(b("WACLauncher__ButtonContainer--noAnimation"),N.current++,i.store.dispatch(Hn.setLauncherProperty("bounceTurn",N.current)))},[i.store]),F=(0,r.useCallback)(()=>{1===N.current?(x.current=setTimeout(()=>{U()},ps[0]),O.current=setTimeout(()=>{$()},ps[0]+500),P.current=setTimeout(()=>{U()},ps[0]+ps[1]),D.current=setTimeout(()=>{$()},ps[0]+ps[1]+500)):2===N.current&&(P.current=setTimeout(()=>{U()},ps[1]),D.current=setTimeout(()=>{$()},ps[1]+500))},[$,U]),z=(0,r.useCallback)(()=>{clearTimeout(x.current),clearTimeout(O.current),clearTimeout(P.current),clearTimeout(D.current)},[]),q=(0,r.useCallback)(()=>{W(),i.store.dispatch(Hn.setLauncherMinimized()),z(),i.store.dispatch(Hn.setLauncherProperty("bounceTurn",3)),w.current=!1,b("WACLauncher__ButtonContainer--noAnimation")},[z,W,i.store]);Er(()=>{if(u)w.current=!0;else{if(!d&&v)return H(),()=>{W()};if(d&&3!==h)return F(),()=>{z()}}}),(0,r.useEffect)(()=>{p.launcher&&w.current&&(L(),M("WACLauncherComplex__Container--simpleAnimation"),w.current=!1)},[L,p.launcher]),(0,r.useEffect)(()=>{p.mainWindow&&q()},[p,q]),(0,r.useEffect)(()=>{S&&(z(),W(),H(),i.store.dispatch(Hn.setLauncherConfigProperty("new_expand_time",!1,Ze.DESKTOP)))},[k,R,S,H,W,z,i.store]);const G=_r(f.desktop.title);(0,r.useEffect)(()=>{G!==f.desktop.title&&(f.desktop.title||G)&&L()},[L,f,G]);const V=(0,r.useCallback)(()=>{M("WACLauncherComplex__Container--closeAnimation"),setTimeout(()=>{b("WACLauncher__ButtonContainer--noAnimation"),i.store.dispatch(Hn.setLauncherMinimized()),setTimeout(a)},400)},[a,i.store]),j=(0,r.useCallback)(()=>{q(),n()},[n,q]);let Z;return Z=u?r.createElement(br,{languagePack:o,intl:c,launcherComplexRef:I,launcherRef:t,launcherConfig:f,onOpen:j,onMinimize:V,unreadHumanAgentCount:y,showUnreadIndicator:m,desktopLauncherIsExpanded:u,launcherHidden:s,className:A}):r.createElement(Cr,{languagePack:o,intl:c,ref:t,onToggleOpen:j,unreadHumanAgentCount:y,showUnreadIndicator:m,className:C,launcherHidden:s}),Z};function Mr(e,t,n,a){if(e)if(e.classList.add(t),"number"==typeof n)setTimeout(()=>{e.classList.remove(t),a&&a()},n);else{const s=i=>{n&&i.animationName!==n||(e.removeEventListener("animationend",s),e.removeEventListener("animationcancel",s),e.classList.remove(t),a&&a())};e.addEventListener("animationend",s),e.addEventListener("animationcancel",s)}}function Ir(){return(0,r.useContext)(tr)}const Tr=400;function wr({fadeOutElement:e,fadeInElement:t,fadeInTime:n=600},a){e&&(e.classList.remove("WACLauncherExtended__Element--hidden"),Mr(e,"WACLauncherExtended__Element--FadeOut",500,()=>{e.classList.add("WACLauncherExtended__Element--hidden"),e.classList.remove("WACLauncherExtended__Element--FadeOut"),!t&&a&&a()})),t&&setTimeout(()=>{t.classList.remove("WACLauncherExtended__Element--hidden"),Mr(t,"WACLauncherExtended__Element--FadeIn",600,()=>{t.classList.remove("WACLauncherExtended__Element--FadeIn"),a&&a()})},n)}const Nr=r.memo((0,r.forwardRef)(function(e,t){const{unreadHumanAgentCount:n,showUnreadIndicator:a,launcherConfig:s,isExtended:i,playExtendAnimation:o,onToggleOpen:c,onSwipeRight:l,onReduceEnd:d,className:u,launcherHidden:h}=e,m=Ir(),p=fr(),_=(0,g.tz)(),S=(0,E.d4)(e=>e.theme.theme===ot.CARBON_AI?void 0:e.launcher.config.mobile.avatar_url_override),[v,b]=(0,r.useState)(o),[A,M]=(0,r.useState)(!1),I=_r(i),T=(0,r.useRef)(),w=(0,r.useRef)(),N=(0,r.useRef)(),R=(0,r.useRef)(),k=(0,r.useRef)({touchStartX:null,touchStartY:null}),x=!i&&I,O=i&&v,P=i&&!v,D=s.mobile.title||p.launcher_mobileGreeting;let L=Sr(p,h);0!==n&&(L+=`. ${_.formatMessage({id:"icon_ariaUnreadMessages"},{count:n})}`);let B=r.createElement(y.A,{size:24,className:"WACLauncher__svg"});return S&&(B=r.createElement("img",{className:"WACLauncher__Avatar",src:S,"aria-hidden":!0,alt:""})),(0,r.useImperativeHandle)(t,()=>({requestFocus:()=>{or(T)},launcherContainerElement:()=>w.current})),(0,r.useEffect)(()=>{!function(e,t,n){const a=68,s=function(){const e=Le?32:64;if(!ke)return Tr;const{width:t,height:n}=window.screen,a=Math.min(n,t)-e;return Math.min(a,Tr)}()-a+12;e.style.setProperty("width",`${s}px`),t.style.setProperty("width",s-12+"px"),t.style.setProperty("display","flex");const{clientWidth:i}=t.querySelector(".WACLauncherExtended__GreetingText");let r=i+a+1;r>Tr&&(r=Tr);t.removeAttribute("style"),e.removeAttribute("style"),n.style.setProperty("--cds-chat--LAUNCHER-EXTENDED-width",`${r}px`)}(R.current,N.current,w.current)},[m,P,D]),(0,r.useEffect)(()=>{if(i){v?wr({fadeInElement:N.current,fadeInTime:300},()=>{b(!1)}):M(!0);const e=T.current,t=e=>{!function(e,t,n){const{touchStartX:a,touchStartY:s}=t;if(null===a||null===s)return;const{clientX:i,clientY:r}=e,o=i-a,c=r-s;Math.abs(o)>Math.abs(c)&&o>0&&n();t.touchStartX=null,t.touchStartY=null}(e.touches[0],k.current,l)},n=e=>{const{clientX:n,clientY:a}=e.touches[0],s=k.current;s.touchStartX=n,s.touchStartY=a,T.current.addEventListener("touchmove",t)};return e.addEventListener("touchstart",n),()=>{e.removeEventListener("touchmove",t),e.removeEventListener("touchstart",n)}}if(x){const e=()=>{d(),b(!0),w.current.removeEventListener("animationend",e)};w.current.addEventListener("animationend",e),wr({fadeOutElement:N.current})}},[v,m,i,D,d,l,x]),r.createElement("div",{className:f("WACLauncher__ButtonContainer WACLauncher__ButtonContainer--round WACLauncherExtended__Container",u,{"WACLauncher__ButtonContainer--hidden":h,"WACLauncherExtended__Button--extended":P,"WACLauncherExtended__Button--extendedAnimation":O,"WACLauncherExtended__Button--reducedAnimation":x}),ref:w},r.createElement(C.$nd,{"aria-label":L,className:"WACLauncher__Button WACLauncherExtended__Button",kind:_s.PRIMARY,type:"button",ref:T,onClick:c},r.createElement("div",{className:"WACLauncherExtended__WrapperContainer"},r.createElement("div",{className:"WACLauncherExtended__Wrapper"},r.createElement("div",{className:"WACLauncherExtended__TextHolder",ref:R},r.createElement("div",{className:f("WACLauncherExtended__Greeting",{"WACLauncherExtended__Element--hidden":!A}),ref:N},r.createElement("div",{className:"WACLauncherExtended__GreetingText","aria-hidden":!i},D))),r.createElement("div",{className:"WACLauncher__IconHolder"},B))),(0!==n||a)&&r.createElement("div",{className:"WAC__countIndicator"},0!==n?n:"")))}));function Rr(e){const{launcherRef:t,onToggleOpen:n,launcherHidden:a}=e,s=ar(),{config:i}=(0,E.d4)(e=>e.launcher),o=(0,E.d4)(e=>e.humanAgentState.numUnreadMessages),{mobileLauncherIsExtended:c,mobileLauncherWasReduced:l,mobileLauncherDisableBounce:d,bounceTurn:u,showUnreadIndicator:h,viewState:g}=(0,E.d4)(e=>e.persistedToBrowserStorage.launcherState),[m,p]=(0,r.useState)(!1),_=_r(c),S=_r(l),v=(0,r.useRef)(u).current,y=(0,r.useRef)(l).current,C=(0,r.useRef)(null),b=(0,r.useRef)(null),A=(0,r.useRef)(null),M=(0,r.useRef)(y&&!d),{time_to_expand:I,new_expand_time:T,time_to_reduce:w}=i.mobile,N=i.mobile.is_on,R=void 0===_&&!c,k=void 0!==_&&!_&&c,x=k||void 0!==S&&!S&&l||m,O=(0,r.useCallback)(()=>{l||s.store.dispatch(Hn.setLauncherProperty("mobileLauncherWasReduced",!0))},[l,s]),P=(0,r.useCallback)(()=>{!function(){const e=C.current,t=b.current;t&&(clearTimeout(t),b.current=null);e&&(clearTimeout(e),C.current=null)}(),c&&(document.removeEventListener("scroll",P),s.store.dispatch(Hn.setLauncherProperty("mobileLauncherIsExtended",!1)))},[c,s]),D=(0,r.useCallback)(()=>{C.current=setTimeout(()=>{c||k||(s.store.dispatch(Hn.setLauncherProperty("mobileLauncherWasReduced",!1)),s.store.dispatch(Hn.setLauncherProperty("mobileLauncherIsExtended",!0)))},I)},[c,k,s.store,I]),L=(0,r.useCallback)(()=>{const e=A.current;e&&(e(),A.current=null),s.store.dispatch(Hn.setLauncherProperty("mobileLauncherDisableBounce",!0)),P(),O()},[P,s.store,O]);Er(()=>{if(!l&&R&&N)D();else if(M.current){const e=t?.current?.launcherContainerElement();if(e){const t=()=>{if(M.current){let n=v;e.removeEventListener("animationend",t),p(!0),A.current=function(e,t,n,a){const{startingIndex:s,beforeAll:i,afterAll:r,beforeEach:o,afterEach:c}=a;let l=s||0,d=!1,u=null;function h(){i&&0===l&&i();const e=l===n.length;e||d?e&&r&&r():u=setTimeout(m,n[l])}function g(){c&&c(),l++,e.removeEventListener("animationend",g),e.classList.remove(t),h()}function m(){o&&o(),e.addEventListener("animationend",g),e.classList.add(t)}return h(),()=>{d=!0,clearTimeout(u),e.classList.remove(t),e.removeEventListener("animationend",g)}}(e,"WACLauncher__ButtonContainer--bounceAnimation",ps,{startingIndex:v-1,afterEach:()=>{n++,s.store.dispatch(Hn.setLauncherProperty("bounceTurn",n))},afterAll:()=>{s.store.dispatch(Hn.setLauncherProperty("mobileLauncherDisableBounce",!0))}})}};e.addEventListener("animationend",t)}}}),(0,r.useEffect)(()=>{g.mainWindow&&L()},[g,L]),(0,r.useEffect)(()=>{if(T){M.current&&(M.current=!1);const e=A.current;e&&(e(),A.current=null),C.current&&clearTimeout(C.current),D(),s.store.dispatch(Hn.setLauncherConfigProperty("new_expand_time",!1,Ze.MOBILE))}},[D,T,s.store,M]);const B=(0,r.useCallback)(()=>{L(),n()},[n,L]),H=(0,r.useCallback)(()=>{P()},[P]);return(0,r.useEffect)(()=>{c&&(b.current=setTimeout(()=>{P()},w),document.addEventListener("scroll",P))},[c,P,w,s]),r.createElement(Nr,{className:f({"WACLauncher__ButtonContainer--noAnimation":x}),ref:t,launcherConfig:i,showUnreadIndicator:h,unreadHumanAgentCount:o,isExtended:c,playExtendAnimation:R,onToggleOpen:B,onSwipeRight:H,onReduceEnd:O,launcherHidden:a})}function kr(){const e=ar(),t=(0,r.useRef)(),n=(0,E.d4)(e=>e.persistedToBrowserStorage.launcherState.viewState),a=(0,E.d4)(e=>e.initialViewChangeComplete),s=!n.launcher,i=(0,r.useCallback)(()=>{t.current?.requestFocus()},[t]),o=(0,r.useCallback)(()=>e.actions.changeView(je.MAIN_WINDOW,{mainWindowOpenReason:nt.DEFAULT_LAUNCHER}),[e.actions]);let c;return function(e,t){const n=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(n.current)return e();n.current=!0},t)}(()=>{n.launcher&&!n.mainWindow&&a&&t.current?.requestFocus()},[n]),c=Be?r.createElement(Rr,{launcherRef:t,onToggleOpen:o,launcherHidden:s}):r.createElement(Ar,{launcherRef:t,onDoToggle:o,requestFocus:i,launcherHidden:s}),c}const xr=r.createContext(null);const Or=(e,t)=>{try{customElements.define(e,t)}catch(e){}return t},Pr=(e,t)=>{const{kind:n,elements:a}=t;return{kind:n,elements:a,finisher(t){try{customElements.define(e,t)}catch(e){}}}};function Dr(e){return t=>"function"==typeof t?Or(e,t):Pr(e,t)}const Lr="cds--aichat",Br="cds-aichat";const Hr=`${Br}-inline-loading`;let Wr=class extends T.WF{constructor(){super(...arguments),this.bounce=!1,this.loop=!1,this.quickLoad=!1,this.carbonTheme="g10"}getAnimationEffect(){const e=[];return!0===this.quickLoad&&e.push("quick-load"),!0===this.bounce&&!0===this.loop&&e.push("vertical"),!1===this.bounce&&!0===this.loop&&e.push("linear"),!0===this.bounce&&!1===this.loop&&e.push("vertical--no-loop"),e.length?e.join(" "):"linear--no-loop"}render(){return T.qy`<div
      data-carbon-theme=${this.carbonTheme}
      class=${this.getAnimationEffect()}
    >
      <svg class="dots" viewBox="0 0 32 32">
        <circle class="dot dot--left" cx="8" cy="16" />
        <circle class="dot dot--center" cx="16" cy="16" r="2" />
        <circle class="dot dot--right" cx="24" cy="16" r="2" />
      </svg>
    </div>`}};Wr.styles=T.AH`
    ${(0,T.iz)(".dots{\n  block-size:32px;\n  inline-size:32px;\n}\n\n.dot{\n  fill:none;\n  r:0;\n  stroke-width:0;\n  transform:translateY(0);\n}\n\n[data-carbon-theme=white] .dot,\n[data-carbon-theme=g10] .dot{\n  stroke:#001d6c;\n}\n\n[data-carbon-theme=g90] .dot,\n[data-carbon-theme=g100] .dot{\n  stroke:#f4f4f4;\n}\n\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--left{\n    animation:none;\n    animation-delay:1s, 1s, 2s, 2s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:25% 50%;\n  }\n}\n.linear .dot--left{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1s, 1s, 2s, 2s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:25% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--center{\n    animation:none;\n    animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:50% 50%;\n  }\n}\n.linear .dot--center{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:50% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--right{\n    animation:none;\n    animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:75% 50%;\n  }\n}\n.linear .dot--right{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:75% 50%;\n}\n\n[dir=rtl] .linear .dot--left{\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s, 7.334s, 7.334s;\n}\n[dir=rtl] .linear .dot--center{\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s, 7.167s, 7.167s;\n}\n[dir=rtl] .linear .dot--right{\n  animation-delay:1s, 1s, 2s, 2s, 7s, 7s;\n}\n\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--left{\n    animation:none;\n    animation-delay:1s, 1s, 2s, 2s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:25% 50%;\n  }\n}\n.linear--no-loop .dot--left{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1s, 1s, 2s, 2s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:25% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--center{\n    animation:none;\n    animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:50% 50%;\n  }\n}\n.linear--no-loop .dot--center{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:50% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--right{\n    animation:none;\n    animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:75% 50%;\n  }\n}\n.linear--no-loop .dot--right{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:75% 50%;\n}\n\n[dir=rtl] .linear--no-loop .dot--left{\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n}\n[dir=rtl] .linear--no-loop .dot--center{\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n}\n[dir=rtl] .linear--no-loop .dot--right{\n  animation-delay:1s, 1s, 2s, 2s;\n}\n\n@keyframes linear-load-size{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:0;\n  }\n  25%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:2.5px;\n  }\n  83.3%{\n    r:0.875px;\n  }\n  100%{\n    r:0.875px;\n  }\n}\n@keyframes linear-load-stroke{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    stroke-width:0;\n  }\n  8.33%{\n    stroke-width:1.72;\n  }\n  100%{\n    stroke-width:1.72;\n  }\n}\n@keyframes linear-loop-size{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:0.875px;\n  }\n  25%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:2.5px;\n  }\n  91.66%{\n    r:0.875px;\n  }\n  100%{\n    r:0.875px;\n  }\n}\n@keyframes linear-loop-stroke{\n  0%{\n    animation-timing-function:cubic-bezier(0.4, 0.14, 1, 1);\n    stroke-width:1.72;\n  }\n  100%{\n    stroke-width:1.72;\n  }\n}\n@keyframes linear-unload-size{\n  0%{\n    r:0.875px;\n  }\n  8.33%{\n    r:0.875px;\n  }\n  33.33%{\n    animation-timing-function:cubic-bezier(0.4, 0.14, 1, 1);\n    r:2.5px;\n  }\n  58.33%{\n    r:0;\n  }\n  100%{\n    r:0;\n  }\n}\n@keyframes linear-unload-stroke{\n  0%{\n    stroke-width:1.72;\n  }\n  50%{\n    stroke-width:1.72;\n  }\n  58.33%{\n    stroke-width:0;\n  }\n  100%{\n    stroke-width:0;\n  }\n}\n@media (prefers-reduced-motion: reduce){\n  .dot--left,\n  .dot--center,\n  .dot--right{\n    animation:none;\n    transition:none;\n  }\n}")}
  `,It([(0,w.MZ)({type:Boolean})],Wr.prototype,"bounce",void 0),It([(0,w.MZ)({type:Boolean})],Wr.prototype,"loop",void 0),It([(0,w.MZ)({type:Boolean})],Wr.prototype,"quickLoad",void 0),It([(0,w.MZ)({type:String})],Wr.prototype,"carbonTheme",void 0),Wr=It([Dr(Hr)],Wr);const Ur=(0,I.a)({tagName:Hr,elementClass:Wr,react:r});function $r(e){const t=r.forwardRef((t,n)=>{const a=(0,r.useContext)(tr);return r.createElement(e,{...t,ref:n,ariaAnnouncer:a})});return t.displayName=`withAriaAnnouncer(${e.displayName||e.name||"Component"})`,t}class Fr extends r.PureComponent{constructor(){super(...arguments),this.state={isMounted:!1},this.onceAnnounced=!1}componentDidMount(){this.setState({isMounted:!0}),this.onceAnnounced||(this.props.announceOnce&&setTimeout(()=>{this.props.ariaAnnouncer(this.props.announceOnce)}),this.onceAnnounced=!0)}render(){return r.createElement("div",{"aria-live":"polite"},this.state.isMounted&&this.props.children)}}const zr=$r(Fr);function qr(e){const{responseUserProfile:t,languagePack:n,width:a,height:s}=e,i=t?.nickname,o=t?.profile_picture_url,[c,l]=(0,r.useState)(!1);let d;const u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{l(!1)},[o]),(0,r.useLayoutEffect)(()=>{u&&a&&s&&(u.current.style.setProperty("inline-size",a),u.current.style.setProperty("block-size",s))},[a,s]),d=!c&&o?r.createElement("img",{src:o,alt:n.agent_ariaResponseUserAvatar,onError:()=>l(!0)}):i?.match(/^[\x20-\xFE]+$/)?r.createElement("div",{"aria-label":n.agent_ariaResponseUserAvatar,className:"WACResponseUserAvatar__Circle",ref:u},r.createElement("div",{className:"WACResponseUserAvatar__Letter"},i.charAt(0))):r.createElement(R.A,{size:32,width:a?Number(a.replace("px","")):void 0,height:s?Number(s.replace("px","")):void 0,"aria-label":n.agent_ariaResponseUserAvatar}),r.createElement("div",{className:"WACResponseUserAvatar"},d)}function Gr(e){return null==e}function Vr(e){e.inline.ruler.before("emphasis","highlight",(e,t)=>{const n="==",a=e.pos;if(e.src.slice(a,a+2)!==n)return!1;if(t)return!1;const s=e.posMax;let i=a+2;for(;i<s;){if(e.src.slice(i,i+2)===n){const t=e.src.slice(a+2,i);if(t.trim()){e.push("highlight_open","mark",1).markup=n;e.push("text","",0).content=t;return e.push("highlight_close","mark",-1).markup=n,e.pos=i+2,!0}break}i++}return!1})}let jr=class extends T.WF{constructor(){super(...arguments),this.language="",this.content="",this.dark=!1,this.throttledHighlight=(0,M.A)(async()=>{try{const e=await Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.bind(n,37005)),t="default"in e?e.default:e,a=this.renderRoot.querySelector("code");let s="";s=this.language&&t.getLanguage(this.language)?t.highlight(this.content,{language:this.language}).value:t.highlightAuto(this.content).value,a&&(a.innerHTML=s)}catch(e){}},150)}updated(){this.throttledHighlight()}render(){const e=this.dark?"cds-aichat-code--dark":"cds-aichat-code--light";return T.qy`<pre class="${e}"><code class="language-${this.language}"></code></pre>`}};jr.styles=T.AH`
    ${(0,T.iz)(":host{\n  display:block;\n}\n:host h1{\n  font-size:var(--cds-heading-06-font-size, 2.625rem);\n  font-weight:var(--cds-heading-06-font-weight, 300);\n  line-height:var(--cds-heading-06-line-height, 1.199);\n  letter-spacing:var(--cds-heading-06-letter-spacing, 0);\n}\n:host h2{\n  font-size:var(--cds-heading-05-font-size, 2rem);\n  font-weight:var(--cds-heading-05-font-weight, 400);\n  line-height:var(--cds-heading-05-line-height, 1.25);\n  letter-spacing:var(--cds-heading-05-letter-spacing, 0);\n}\n:host h3{\n  font-size:var(--cds-heading-04-font-size, 1.75rem);\n  font-weight:var(--cds-heading-04-font-weight, 400);\n  line-height:var(--cds-heading-04-line-height, 1.28572);\n  letter-spacing:var(--cds-heading-04-letter-spacing, 0);\n}\n:host h4{\n  font-size:var(--cds-heading-03-font-size, 1.25rem);\n  font-weight:var(--cds-heading-03-font-weight, 400);\n  line-height:var(--cds-heading-03-line-height, 1.4);\n  letter-spacing:var(--cds-heading-03-letter-spacing, 0);\n}\n:host h5{\n  font-size:var(--cds-heading-02-font-size, 1rem);\n  font-weight:var(--cds-heading-02-font-weight, 600);\n  line-height:var(--cds-heading-02-line-height, 1.5);\n  letter-spacing:var(--cds-heading-02-letter-spacing, 0);\n}\n:host h6{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n:host p{\n  font-size:var(--cds-body-02-font-size, 1rem);\n  font-weight:var(--cds-body-02-font-weight, 400);\n  line-height:var(--cds-body-02-line-height, 1.5);\n  letter-spacing:var(--cds-body-02-letter-spacing, 0);\n}\n:host a{\n  color:var(--cds-link-primary, #0062fe);\n}\n:host em{\n  font-style:italic;\n}\n\npre.cds-aichat-code--dark{\n}\npre.cds-aichat-code--dark pre code.hljs{\n  display:block;\n  overflow-x:auto;\n  padding:1em;\n}\npre.cds-aichat-code--dark code.hljs{\n  padding:3px 5px;\n}\npre.cds-aichat-code--dark .hljs{\n  background:#2b2b2b;\n  color:#f8f8f2;\n}\npre.cds-aichat-code--dark .hljs-comment,\npre.cds-aichat-code--dark .hljs-quote{\n  color:#d4d0ab;\n}\npre.cds-aichat-code--dark .hljs-variable,\npre.cds-aichat-code--dark .hljs-template-variable,\npre.cds-aichat-code--dark .hljs-tag,\npre.cds-aichat-code--dark .hljs-name,\npre.cds-aichat-code--dark .hljs-selector-id,\npre.cds-aichat-code--dark .hljs-selector-class,\npre.cds-aichat-code--dark .hljs-regexp,\npre.cds-aichat-code--dark .hljs-deletion{\n  color:#ffa07a;\n}\npre.cds-aichat-code--dark .hljs-number,\npre.cds-aichat-code--dark .hljs-built_in,\npre.cds-aichat-code--dark .hljs-literal,\npre.cds-aichat-code--dark .hljs-type,\npre.cds-aichat-code--dark .hljs-params,\npre.cds-aichat-code--dark .hljs-meta,\npre.cds-aichat-code--dark .hljs-link{\n  color:#f5ab35;\n}\npre.cds-aichat-code--dark .hljs-attribute{\n  color:#ffd700;\n}\npre.cds-aichat-code--dark .hljs-string,\npre.cds-aichat-code--dark .hljs-symbol,\npre.cds-aichat-code--dark .hljs-bullet,\npre.cds-aichat-code--dark .hljs-addition{\n  color:#abe338;\n}\npre.cds-aichat-code--dark .hljs-title,\npre.cds-aichat-code--dark .hljs-section{\n  color:#00e0e0;\n}\npre.cds-aichat-code--dark .hljs-keyword,\npre.cds-aichat-code--dark .hljs-selector-tag{\n  color:#dcc6e0;\n}\npre.cds-aichat-code--dark .hljs-emphasis{\n  font-style:italic;\n}\npre.cds-aichat-code--dark .hljs-strong{\n  font-weight:bold;\n}\n@media screen and (-ms-high-contrast: active){\n  pre.cds-aichat-code--dark .hljs-addition,\n  pre.cds-aichat-code--dark .hljs-attribute,\n  pre.cds-aichat-code--dark .hljs-built_in,\n  pre.cds-aichat-code--dark .hljs-bullet,\n  pre.cds-aichat-code--dark .hljs-comment,\n  pre.cds-aichat-code--dark .hljs-link,\n  pre.cds-aichat-code--dark .hljs-literal,\n  pre.cds-aichat-code--dark .hljs-meta,\n  pre.cds-aichat-code--dark .hljs-number,\n  pre.cds-aichat-code--dark .hljs-params,\n  pre.cds-aichat-code--dark .hljs-string,\n  pre.cds-aichat-code--dark .hljs-symbol,\n  pre.cds-aichat-code--dark .hljs-type,\n  pre.cds-aichat-code--dark .hljs-quote{\n    color:highlight;\n  }\n  pre.cds-aichat-code--dark .hljs-keyword,\n  pre.cds-aichat-code--dark .hljs-selector-tag{\n    font-weight:bold;\n  }\n}\n\npre.cds-aichat-code--light{\n}\npre.cds-aichat-code--light pre code.hljs{\n  display:block;\n  overflow-x:auto;\n  padding:1em;\n}\npre.cds-aichat-code--light code.hljs{\n  padding:3px 5px;\n}\npre.cds-aichat-code--light .hljs{\n  background:#fefefe;\n  color:#545454;\n}\npre.cds-aichat-code--light .hljs-comment,\npre.cds-aichat-code--light .hljs-quote{\n  color:#696969;\n}\npre.cds-aichat-code--light .hljs-variable,\npre.cds-aichat-code--light .hljs-template-variable,\npre.cds-aichat-code--light .hljs-tag,\npre.cds-aichat-code--light .hljs-name,\npre.cds-aichat-code--light .hljs-selector-id,\npre.cds-aichat-code--light .hljs-selector-class,\npre.cds-aichat-code--light .hljs-regexp,\npre.cds-aichat-code--light .hljs-deletion{\n  color:#d91e18;\n}\npre.cds-aichat-code--light .hljs-number,\npre.cds-aichat-code--light .hljs-built_in,\npre.cds-aichat-code--light .hljs-literal,\npre.cds-aichat-code--light .hljs-type,\npre.cds-aichat-code--light .hljs-params,\npre.cds-aichat-code--light .hljs-meta,\npre.cds-aichat-code--light .hljs-link{\n  color:#aa5d00;\n}\npre.cds-aichat-code--light .hljs-attribute{\n  color:#aa5d00;\n}\npre.cds-aichat-code--light .hljs-string,\npre.cds-aichat-code--light .hljs-symbol,\npre.cds-aichat-code--light .hljs-bullet,\npre.cds-aichat-code--light .hljs-addition{\n  color:#008000;\n}\npre.cds-aichat-code--light .hljs-title,\npre.cds-aichat-code--light .hljs-section{\n  color:#007faa;\n}\npre.cds-aichat-code--light .hljs-keyword,\npre.cds-aichat-code--light .hljs-selector-tag{\n  color:#7928a1;\n}\npre.cds-aichat-code--light .hljs-emphasis{\n  font-style:italic;\n}\npre.cds-aichat-code--light .hljs-strong{\n  font-weight:bold;\n}\n@media screen and (-ms-high-contrast: active){\n  pre.cds-aichat-code--light .hljs-addition,\n  pre.cds-aichat-code--light .hljs-attribute,\n  pre.cds-aichat-code--light .hljs-built_in,\n  pre.cds-aichat-code--light .hljs-bullet,\n  pre.cds-aichat-code--light .hljs-comment,\n  pre.cds-aichat-code--light .hljs-link,\n  pre.cds-aichat-code--light .hljs-literal,\n  pre.cds-aichat-code--light .hljs-meta,\n  pre.cds-aichat-code--light .hljs-number,\n  pre.cds-aichat-code--light .hljs-params,\n  pre.cds-aichat-code--light .hljs-string,\n  pre.cds-aichat-code--light .hljs-symbol,\n  pre.cds-aichat-code--light .hljs-type,\n  pre.cds-aichat-code--light .hljs-quote{\n    color:highlight;\n  }\n  pre.cds-aichat-code--light .hljs-keyword,\n  pre.cds-aichat-code--light .hljs-selector-tag{\n    font-weight:bold;\n  }\n}\n\npre{\n  overflow:auto hidden;\n  padding:1rem;\n  border:solid 1px var(--cds-chat-bubble-border, #e0e0e0);\n  background-color:var(--cds-layer-02, #ffffff);\n  white-space:pre-wrap;\n}")}
  `,It([(0,w.MZ)({type:String})],jr.prototype,"language",void 0),It([(0,w.MZ)({type:String})],jr.prototype,"content",void 0),It([(0,w.MZ)({type:Boolean})],jr.prototype,"dark",void 0),jr=It([Dr("cds-aichat-code")],jr);const Zr=(0,B.dI)({...H.A,attrs:{...H.A.attrs,slot:"icon"}});function Yr(e){const{tableTitle:t,tableDescription:n,headers:a,filterPlaceholderText:s,locale:i,_handleDownload:r,_rowsWithIDs:o,_allowFiltering:c,_handleFilterEvent:l}=e;return T.qy`<cds-custom-layer level="1"
    ><cds-custom-table
      size="md"
      locale=${i}
      .isSortable=${c}
      .useZebraStyles=${!0}
      @cds-custom-table-filtered=${l}
    >
      ${t&&T.qy`<cds-custom-table-header-title slot="title"
        >${t}</cds-custom-table-header-title
      >`}
      ${n&&T.qy`<cds-custom-table-header-description slot="description"
        >${n}</cds-custom-table-header-description
      >`}
      ${T.qy`<cds-custom-table-toolbar slot="toolbar">
      <cds-custom-table-toolbar-content>
        ${c?T.qy`<cds-custom-table-toolbar-search
              persistent
              placeholder=${s}
            ></cds-custom-table-toolbar-search>`:""}
        <cds-custom-button @click=${r}
          >${(0,W.T)(Zr)}</cds-custom-button
        >
      </cds-custom-table-toolbar-content>
    </cds-custom-table-toolbar>`} ${T.qy`<cds-custom-table-head>
      <cds-custom-table-header-row>
        ${a.map(e=>T.qy`<cds-custom-table-header-cell
              >${e}</cds-custom-table-header-cell
            >`)}
      </cds-custom-table-header-row>
    </cds-custom-table-head>`} ${T.qy`<cds-custom-table-body>
      ${(0,U.u)(o,e=>e.id,e=>T.qy`<cds-custom-table-row id=${e.id}
            >${e.cells.map(e=>T.qy`<cds-custom-table-cell>${e}</cds-custom-table-cell>`)}</cds-custom-table-row
          >`)}
    </cds-custom-table-body>`}
    </cds-custom-table></cds-custom-layer
  >`}const Kr=[5,10,15,20,50];const Xr="cds-aichat-table";let Qr=class extends T.WF{constructor(){super(...arguments),this.dark=!1,this._defaultPageSize=5,this._isValid=!0,this._currentPageNumber=1,this._currentPageSize=this.defaultPageSize,this._rowsPerPageChanged=!1,this._rowsWithIDs=[],this._handlePageChangeEvent=e=>{this._updateVisibleRows(e.detail?.page,e.detail?.pageSize),e.stopPropagation()},this._handlePageSizeChangeEvent=e=>{this._rowsPerPageChanged=!0,this._currentPageSize=e.detail?.pageSize,this._updateVisibleRows(),e.stopPropagation()},this._handleFilterEvent=e=>{this._filterVisibleRowIDs=new Set(e?.detail?.unfilteredRows.map(e=>e.id)),this._currentPageNumber=1,this._updateVisibleRows(),e.stopPropagation()}}get defaultPageSize(){return this._defaultPageSize}set defaultPageSize(e){this._defaultPageSize=e}connectedCallback(){super.connectedCallback(),this._setupParentResizeObserver()}disconnectedCallback(){super.disconnectedCallback(),this._cleanupParentResizeObserver()}firstUpdated(e){this._setPageSize(),this._updateParentWidthCSSProperty()}_setupParentResizeObserver(){"undefined"!=typeof ResizeObserver&&this.parentElement&&(this._parentResizeObserver=new ResizeObserver((0,L.A)(e=>{for(const t of e){const e=t.target.offsetWidth;e>0&&this.style.setProperty("--cds-chat-table-width",`${e}px`)}},100)),this._parentResizeObserver.observe(this.parentElement))}_cleanupParentResizeObserver(){this._parentResizeObserver&&(this._parentResizeObserver.disconnect(),this._parentResizeObserver=void 0)}_updateParentWidthCSSProperty(){if(this.parentElement){let e=this.parentElement.offsetWidth;0===e&&(e=399),e>0&&(this.style.setProperty("--cds-chat-table-width",`${e}px`),5===this._defaultPageSize&&(this._defaultPageSize=e>400?10:5,5===this._currentPageSize&&(this._currentPageSize=this._defaultPageSize)))}}updated(e){(e.has("headers")||e.has("rows"))&&void 0!==this.headers&&void 0!==this.rows&&this._calcIsTableValid(),e.has("rows")&&void 0!==this.rows&&(this._initializeRowsArrays(),this._setPageSize())}_calcIsTableValid(){const e=this.headers.length;this._isValid=!this.rows.some(t=>t.cells.length!==e)}_initializeRowsArrays(){this._rowsWithIDs=[],this._filterVisibleRowIDs=new Set,this.rows.forEach((e,t)=>{const n=t.toString();this._rowsWithIDs.push({...e,id:n}),this._filterVisibleRowIDs.add(n)})}_setPageSize(){this._allowFiltering=this.rows.length>this._currentPageSize,this._updateVisibleRows()}_updateVisibleRows(e=this._currentPageNumber,t=this._currentPageSize){this._currentPageNumber=e;const n=Array.from(this.renderRoot.querySelectorAll("cds-custom-table-row"));n.forEach(e=>e.style.setProperty("display","none"));const a=n.filter(e=>this._filterVisibleRowIDs.has(e.id)),s=e*t-1;for(let n=(e-1)*t;n<=s;n++)a[n]?.removeAttribute("style")}async _handleDownload(){const e=[this.headers,...this.rows.map(e=>e.cells)];try{const{stringify:t}=await Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.bind(n,91884)),a=t(e),s=`data:text/csv;charset=utf-8,${encodeURIComponent(a)}`,i=document.createElement("a");i.setAttribute("href",s),i.setAttribute("download","table-data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(e){}}render(){const e=this.dark?"cds--g90":"cds--white";return this.loading?function(e=5){return T.qy`<cds-custom-table-skeleton
    row-count=${e}
    column-count="2"
    .showHeader=${!1}
  >
  </cds-custom-table-skeleton>`}(this._currentPageSize):this.rows.length>this._currentPageSize||this._rowsPerPageChanged?T.qy`<div class="cds-ai-chat-table-container ${e}">
        ${Yr(this)}
        ${function(e){const{_currentPageSize:t,_currentPageNumber:n,_filterVisibleRowIDs:a,rows:s,previousPageText:i,nextPageText:r,itemsPerPageText:o,getPaginationSupplementalText:c,getPaginationStatusText:l,_handlePageChangeEvent:d,_handlePageSizeChangeEvent:u}=e;if(!a||!a.size)return T.qy``;const h=a.size,g=s.length,m=Kr.filter(e=>e<g);return T.qy`<cds-custom-pagination
    page-size=${t}
    page=${n}
    total-items=${h}
    totalPages=${Math.ceil(h/t)}
    backward-text=${i}
    forward-text=${r}
    items-per-page-text=${o}
    .formatSupplementalText=${c}
    .formatStatusWithDeterminateTotal=${l}
    @cds-custom-pagination-changed-current=${d}
    @cds-custom-page-sizes-select-changed=${u}
  >
    ${m.map(e=>T.qy`<cds-custom-select-item value="${e}"
          >${e}</cds-custom-select-item
        >`)}
    <cds-custom-select-item value="${g}"
      >${g}</cds-custom-select-item
    >
  </cds-custom-pagination>`}({_currentPageSize:this._currentPageSize,_currentPageNumber:this._currentPageNumber,_filterVisibleRowIDs:this._filterVisibleRowIDs,rows:this.rows,previousPageText:this.previousPageText,nextPageText:this.nextPageText,itemsPerPageText:this.itemsPerPageText,getPaginationSupplementalText:this.getPaginationSupplementalText,getPaginationStatusText:this.getPaginationStatusText,_handlePageChangeEvent:this._handlePageChangeEvent,_handlePageSizeChangeEvent:this._handlePageSizeChangeEvent})}
      </div>`:T.qy`<div class="cds-ai-chat-table-container ${e}">
      ${Yr(this)}
    </div>`}};Qr.styles=T.AH`
    ${(0,T.iz)("cds-custom-table-header-title,\ncds-custom-table-header-description,\ncds-custom-table-toolbar{\n  position:sticky;\n  inline-size:var(--cds-chat-table-width, auto);\n  inset-inline-start:0;\n}\n\n:dir(rtl) cds-custom-table-header-title,\n:dir(rtl) cds-custom-table-header-description,\n:dir(rtl) cds-custom-table-toolbar{\n  right:0;\n  left:unset;\n}\n\ncds-custom-table-header-title,\ncds-custom-table-header-description{\n  padding:0 1rem;\n  inline-size:calc(var(--cds-chat-table-width, auto) - 1rem - 1rem);\n  margin-inline:-1rem;\n}\n\ncds-custom-table-header-description{\n  margin-block-end:-0.5rem;\n}\n\ncds-custom-pagination,\ncds-custom-table{\n  grid-column:1;\n  inline-size:100%;\n}\n\n.cds-ai-chat-table-container{\n  display:grid;\n  grid-template-columns:minmax(max-content, 1fr);\n  inline-size:100%;\n  overflow-x:auto;\n}\n\n.cds-ai-chat-table-container.cds--white{\n  --cds-ai-aura-end:rgba(255, 255, 255, 0);\n  --cds-ai-aura-hover-background:#edf5ff;\n  --cds-ai-aura-hover-end:rgba(255, 255, 255, 0);\n  --cds-ai-aura-hover-start:rgba(69, 137, 255, 0.32);\n  --cds-ai-aura-start:rgba(69, 137, 255, 0.1);\n  --cds-ai-aura-start-sm:rgba(69, 137, 255, 0.16);\n  --cds-ai-border-end:#78a9ff;\n  --cds-ai-border-start:rgba(166, 200, 255, 0.64);\n  --cds-ai-border-strong:#4589ff;\n  --cds-ai-drop-shadow:rgba(15, 98, 254, 0.1);\n  --cds-ai-inner-shadow:rgba(69, 137, 255, 0.1);\n  --cds-ai-overlay:rgba(0, 17, 65, 0.5);\n  --cds-ai-popover-background:#ffffff;\n  --cds-ai-popover-caret-bottom:#78a9ff;\n  --cds-ai-popover-caret-bottom-background:#eaf1ff;\n  --cds-ai-popover-caret-bottom-background-actions:#e9effa;\n  --cds-ai-popover-caret-center:#a0c3ff;\n  --cds-ai-popover-shadow-outer-01:rgba(0, 67, 206, 0.06);\n  --cds-ai-popover-shadow-outer-02:rgba(0, 0, 0, 0.04);\n  --cds-ai-skeleton-background:#d0e2ff;\n  --cds-ai-skeleton-element-background:#4589ff;\n  --cds-background:#ffffff;\n  --cds-background-active:rgba(141, 141, 141, 0.5);\n  --cds-background-brand:#0f62fe;\n  --cds-background-hover:rgba(141, 141, 141, 0.12);\n  --cds-background-inverse:#393939;\n  --cds-background-inverse-hover:#474747;\n  --cds-background-selected:rgba(141, 141, 141, 0.2);\n  --cds-background-selected-hover:rgba(141, 141, 141, 0.32);\n  --cds-border-disabled:#c6c6c6;\n  --cds-border-interactive:#0f62fe;\n  --cds-border-inverse:#161616;\n  --cds-border-strong-01:#8d8d8d;\n  --cds-border-strong-02:#8d8d8d;\n  --cds-border-strong-03:#8d8d8d;\n  --cds-border-subtle-00:#e0e0e0;\n  --cds-border-subtle-01:#c6c6c6;\n  --cds-border-subtle-02:#e0e0e0;\n  --cds-border-subtle-03:#c6c6c6;\n  --cds-border-subtle-selected-01:#c6c6c6;\n  --cds-border-subtle-selected-02:#c6c6c6;\n  --cds-border-subtle-selected-03:#c6c6c6;\n  --cds-border-tile-01:#c6c6c6;\n  --cds-border-tile-02:#a8a8a8;\n  --cds-border-tile-03:#c6c6c6;\n  --cds-chat-avatar-agent:#393939;\n  --cds-chat-avatar-bot:#6f6f6f;\n  --cds-chat-avatar-user:#0f62fe;\n  --cds-chat-bubble-agent:#ffffff;\n  --cds-chat-bubble-border:#e0e0e0;\n  --cds-chat-bubble-user:#e0e0e0;\n  --cds-chat-button:#0f62fe;\n  --cds-chat-button-active:rgba(141, 141, 141, 0.5);\n  --cds-chat-button-hover:rgba(141, 141, 141, 0.12);\n  --cds-chat-button-selected:rgba(141, 141, 141, 0.2);\n  --cds-chat-button-text-hover:#0043ce;\n  --cds-chat-button-text-selected:#525252;\n  --cds-chat-header-background:#ffffff;\n  --cds-chat-prompt-background:#ffffff;\n  --cds-chat-prompt-border-end:rgba(244, 244, 244, 0);\n  --cds-chat-prompt-border-start:#f4f4f4;\n  --cds-chat-shell-background:#ffffff;\n  --cds-field-01:#f4f4f4;\n  --cds-field-02:#ffffff;\n  --cds-field-03:#f4f4f4;\n  --cds-field-hover-01:#e8e8e8;\n  --cds-field-hover-02:#e8e8e8;\n  --cds-field-hover-03:#e8e8e8;\n  --cds-focus:#0f62fe;\n  --cds-focus-inset:#ffffff;\n  --cds-focus-inverse:#ffffff;\n  --cds-highlight:#d0e2ff;\n  --cds-icon-disabled:rgba(22, 22, 22, 0.25);\n  --cds-icon-interactive:#0f62fe;\n  --cds-icon-inverse:#ffffff;\n  --cds-icon-on-color:#ffffff;\n  --cds-icon-on-color-disabled:#8d8d8d;\n  --cds-icon-primary:#161616;\n  --cds-icon-secondary:#525252;\n  --cds-interactive:#0f62fe;\n  --cds-layer-01:#f4f4f4;\n  --cds-layer-02:#ffffff;\n  --cds-layer-03:#f4f4f4;\n  --cds-layer-accent-01:#e0e0e0;\n  --cds-layer-accent-02:#e0e0e0;\n  --cds-layer-accent-03:#e0e0e0;\n  --cds-layer-accent-active-01:#a8a8a8;\n  --cds-layer-accent-active-02:#a8a8a8;\n  --cds-layer-accent-active-03:#a8a8a8;\n  --cds-layer-accent-hover-01:#d1d1d1;\n  --cds-layer-accent-hover-02:#d1d1d1;\n  --cds-layer-accent-hover-03:#d1d1d1;\n  --cds-layer-active-01:#c6c6c6;\n  --cds-layer-active-02:#c6c6c6;\n  --cds-layer-active-03:#c6c6c6;\n  --cds-layer-background-01:#ffffff;\n  --cds-layer-background-02:#f4f4f4;\n  --cds-layer-background-03:#ffffff;\n  --cds-layer-hover-01:#e8e8e8;\n  --cds-layer-hover-02:#e8e8e8;\n  --cds-layer-hover-03:#e8e8e8;\n  --cds-layer-selected-01:#e0e0e0;\n  --cds-layer-selected-02:#e0e0e0;\n  --cds-layer-selected-03:#e0e0e0;\n  --cds-layer-selected-disabled:#8d8d8d;\n  --cds-layer-selected-hover-01:#d1d1d1;\n  --cds-layer-selected-hover-02:#d1d1d1;\n  --cds-layer-selected-hover-03:#d1d1d1;\n  --cds-layer-selected-inverse:#161616;\n  --cds-link-inverse:#78a9ff;\n  --cds-link-inverse-active:#f4f4f4;\n  --cds-link-inverse-hover:#a6c8ff;\n  --cds-link-inverse-visited:#be95ff;\n  --cds-link-primary:#0f62fe;\n  --cds-link-primary-hover:#0043ce;\n  --cds-link-secondary:#0043ce;\n  --cds-link-visited:#8a3ffc;\n  --cds-overlay:rgba(22, 22, 22, 0.5);\n  --cds-shadow:rgba(0, 0, 0, 0.3);\n  --cds-skeleton-background:#e8e8e8;\n  --cds-skeleton-element:#c6c6c6;\n  --cds-support-caution-major:#ff832b;\n  --cds-support-caution-minor:#f1c21b;\n  --cds-support-caution-undefined:#8a3ffc;\n  --cds-support-error:#da1e28;\n  --cds-support-error-inverse:#fa4d56;\n  --cds-support-info:#0043ce;\n  --cds-support-info-inverse:#4589ff;\n  --cds-support-success:#24a148;\n  --cds-support-success-inverse:#42be65;\n  --cds-support-warning:#f1c21b;\n  --cds-support-warning-inverse:#f1c21b;\n  --cds-text-disabled:rgba(22, 22, 22, 0.25);\n  --cds-text-error:#da1e28;\n  --cds-text-helper:#6f6f6f;\n  --cds-text-inverse:#ffffff;\n  --cds-text-on-color:#ffffff;\n  --cds-text-on-color-disabled:#8d8d8d;\n  --cds-text-placeholder:rgba(22, 22, 22, 0.4);\n  --cds-text-primary:#161616;\n  --cds-text-secondary:#525252;\n  --cds-toggle-off:#8d8d8d;\n  --cds-spacing-01:0.125rem;\n  --cds-spacing-02:0.25rem;\n  --cds-spacing-03:0.5rem;\n  --cds-spacing-04:0.75rem;\n  --cds-spacing-05:1rem;\n  --cds-spacing-06:1.5rem;\n  --cds-spacing-07:2rem;\n  --cds-spacing-08:2.5rem;\n  --cds-spacing-09:3rem;\n  --cds-spacing-10:4rem;\n  --cds-spacing-11:5rem;\n  --cds-spacing-12:6rem;\n  --cds-spacing-13:10rem;\n  --cds-fluid-spacing-01:0;\n  --cds-fluid-spacing-02:2vw;\n  --cds-fluid-spacing-03:5vw;\n  --cds-fluid-spacing-04:10vw;\n  --cds-caption-01-font-size:0.75rem;\n  --cds-caption-01-font-weight:400;\n  --cds-caption-01-line-height:1.33333;\n  --cds-caption-01-letter-spacing:0.32px;\n  --cds-caption-02-font-size:0.875rem;\n  --cds-caption-02-font-weight:400;\n  --cds-caption-02-line-height:1.28572;\n  --cds-caption-02-letter-spacing:0.32px;\n  --cds-label-01-font-size:0.75rem;\n  --cds-label-01-font-weight:400;\n  --cds-label-01-line-height:1.33333;\n  --cds-label-01-letter-spacing:0.32px;\n  --cds-label-02-font-size:0.875rem;\n  --cds-label-02-font-weight:400;\n  --cds-label-02-line-height:1.28572;\n  --cds-label-02-letter-spacing:0.16px;\n  --cds-helper-text-01-font-size:0.75rem;\n  --cds-helper-text-01-line-height:1.33333;\n  --cds-helper-text-01-letter-spacing:0.32px;\n  --cds-helper-text-02-font-size:0.875rem;\n  --cds-helper-text-02-font-weight:400;\n  --cds-helper-text-02-line-height:1.28572;\n  --cds-helper-text-02-letter-spacing:0.16px;\n  --cds-body-short-01-font-size:0.875rem;\n  --cds-body-short-01-font-weight:400;\n  --cds-body-short-01-line-height:1.28572;\n  --cds-body-short-01-letter-spacing:0.16px;\n  --cds-body-short-02-font-size:1rem;\n  --cds-body-short-02-font-weight:400;\n  --cds-body-short-02-line-height:1.375;\n  --cds-body-short-02-letter-spacing:0;\n  --cds-body-long-01-font-size:0.875rem;\n  --cds-body-long-01-font-weight:400;\n  --cds-body-long-01-line-height:1.42857;\n  --cds-body-long-01-letter-spacing:0.16px;\n  --cds-body-long-02-font-size:1rem;\n  --cds-body-long-02-font-weight:400;\n  --cds-body-long-02-line-height:1.5;\n  --cds-body-long-02-letter-spacing:0;\n  --cds-code-01-font-family:'IBM Plex Mono', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', monospace;\n  --cds-code-01-font-size:0.75rem;\n  --cds-code-01-font-weight:400;\n  --cds-code-01-line-height:1.33333;\n  --cds-code-01-letter-spacing:0.32px;\n  --cds-code-02-font-family:'IBM Plex Mono', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', monospace;\n  --cds-code-02-font-size:0.875rem;\n  --cds-code-02-font-weight:400;\n  --cds-code-02-line-height:1.42857;\n  --cds-code-02-letter-spacing:0.32px;\n  --cds-heading-01-font-size:0.875rem;\n  --cds-heading-01-font-weight:600;\n  --cds-heading-01-line-height:1.42857;\n  --cds-heading-01-letter-spacing:0.16px;\n  --cds-heading-02-font-size:1rem;\n  --cds-heading-02-font-weight:600;\n  --cds-heading-02-line-height:1.5;\n  --cds-heading-02-letter-spacing:0;\n  --cds-productive-heading-01-font-size:0.875rem;\n  --cds-productive-heading-01-font-weight:600;\n  --cds-productive-heading-01-line-height:1.28572;\n  --cds-productive-heading-01-letter-spacing:0.16px;\n  --cds-productive-heading-02-font-size:1rem;\n  --cds-productive-heading-02-font-weight:600;\n  --cds-productive-heading-02-line-height:1.375;\n  --cds-productive-heading-02-letter-spacing:0;\n  --cds-productive-heading-03-font-size:1.25rem;\n  --cds-productive-heading-03-font-weight:400;\n  --cds-productive-heading-03-line-height:1.4;\n  --cds-productive-heading-03-letter-spacing:0;\n  --cds-productive-heading-04-font-size:1.75rem;\n  --cds-productive-heading-04-font-weight:400;\n  --cds-productive-heading-04-line-height:1.28572;\n  --cds-productive-heading-04-letter-spacing:0;\n  --cds-productive-heading-05-font-size:2rem;\n  --cds-productive-heading-05-font-weight:400;\n  --cds-productive-heading-05-line-height:1.25;\n  --cds-productive-heading-05-letter-spacing:0;\n  --cds-productive-heading-06-font-size:2.625rem;\n  --cds-productive-heading-06-font-weight:300;\n  --cds-productive-heading-06-line-height:1.199;\n  --cds-productive-heading-06-letter-spacing:0;\n  --cds-productive-heading-07-font-size:3.375rem;\n  --cds-productive-heading-07-font-weight:300;\n  --cds-productive-heading-07-line-height:1.19;\n  --cds-productive-heading-07-letter-spacing:0;\n  --cds-expressive-paragraph-01-font-size:1.5rem;\n  --cds-expressive-paragraph-01-font-weight:300;\n  --cds-expressive-paragraph-01-line-height:1.334;\n  --cds-expressive-paragraph-01-letter-spacing:0;\n  --cds-expressive-heading-01-font-size:0.875rem;\n  --cds-expressive-heading-01-font-weight:600;\n  --cds-expressive-heading-01-line-height:1.42857;\n  --cds-expressive-heading-01-letter-spacing:0.16px;\n  --cds-expressive-heading-02-font-size:1rem;\n  --cds-expressive-heading-02-font-weight:600;\n  --cds-expressive-heading-02-line-height:1.5;\n  --cds-expressive-heading-02-letter-spacing:0;\n  --cds-expressive-heading-03-font-size:1.25rem;\n  --cds-expressive-heading-03-font-weight:400;\n  --cds-expressive-heading-03-line-height:1.4;\n  --cds-expressive-heading-03-letter-spacing:0;\n  --cds-expressive-heading-04-font-size:1.75rem;\n  --cds-expressive-heading-04-font-weight:400;\n  --cds-expressive-heading-04-line-height:1.28572;\n  --cds-expressive-heading-04-letter-spacing:0;\n  --cds-expressive-heading-05-font-size:2rem;\n  --cds-expressive-heading-05-font-weight:400;\n  --cds-expressive-heading-05-line-height:1.25;\n  --cds-expressive-heading-05-letter-spacing:0;\n  --cds-expressive-heading-06-font-size:2rem;\n  --cds-expressive-heading-06-font-weight:600;\n  --cds-expressive-heading-06-line-height:1.25;\n  --cds-expressive-heading-06-letter-spacing:0;\n  --cds-quotation-01-font-family:'IBM Plex Serif', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', serif;\n  --cds-quotation-01-font-size:1.25rem;\n  --cds-quotation-01-font-weight:400;\n  --cds-quotation-01-line-height:1.3;\n  --cds-quotation-01-letter-spacing:0;\n  --cds-quotation-02-font-family:'IBM Plex Serif', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', serif;\n  --cds-quotation-02-font-size:2rem;\n  --cds-quotation-02-font-weight:300;\n  --cds-quotation-02-line-height:1.25;\n  --cds-quotation-02-letter-spacing:0;\n  --cds-display-01-font-size:2.625rem;\n  --cds-display-01-font-weight:300;\n  --cds-display-01-line-height:1.19;\n  --cds-display-01-letter-spacing:0;\n  --cds-display-02-font-size:2.625rem;\n  --cds-display-02-font-weight:600;\n  --cds-display-02-line-height:1.19;\n  --cds-display-02-letter-spacing:0;\n  --cds-display-03-font-size:2.625rem;\n  --cds-display-03-font-weight:300;\n  --cds-display-03-line-height:1.19;\n  --cds-display-03-letter-spacing:0;\n  --cds-display-04-font-size:2.625rem;\n  --cds-display-04-font-weight:300;\n  --cds-display-04-line-height:1.19;\n  --cds-display-04-letter-spacing:0;\n  --cds-legal-01-font-size:0.75rem;\n  --cds-legal-01-font-weight:400;\n  --cds-legal-01-line-height:1.33333;\n  --cds-legal-01-letter-spacing:0.32px;\n  --cds-legal-02-font-size:0.875rem;\n  --cds-legal-02-font-weight:400;\n  --cds-legal-02-line-height:1.28572;\n  --cds-legal-02-letter-spacing:0.16px;\n  --cds-body-compact-01-font-size:0.875rem;\n  --cds-body-compact-01-font-weight:400;\n  --cds-body-compact-01-line-height:1.28572;\n  --cds-body-compact-01-letter-spacing:0.16px;\n  --cds-body-compact-02-font-size:1rem;\n  --cds-body-compact-02-font-weight:400;\n  --cds-body-compact-02-line-height:1.375;\n  --cds-body-compact-02-letter-spacing:0;\n  --cds-heading-compact-01-font-size:0.875rem;\n  --cds-heading-compact-01-font-weight:600;\n  --cds-heading-compact-01-line-height:1.28572;\n  --cds-heading-compact-01-letter-spacing:0.16px;\n  --cds-heading-compact-02-font-size:1rem;\n  --cds-heading-compact-02-font-weight:600;\n  --cds-heading-compact-02-line-height:1.375;\n  --cds-heading-compact-02-letter-spacing:0;\n  --cds-body-01-font-size:0.875rem;\n  --cds-body-01-font-weight:400;\n  --cds-body-01-line-height:1.42857;\n  --cds-body-01-letter-spacing:0.16px;\n  --cds-body-02-font-size:1rem;\n  --cds-body-02-font-weight:400;\n  --cds-body-02-line-height:1.5;\n  --cds-body-02-letter-spacing:0;\n  --cds-heading-03-font-size:1.25rem;\n  --cds-heading-03-font-weight:400;\n  --cds-heading-03-line-height:1.4;\n  --cds-heading-03-letter-spacing:0;\n  --cds-heading-04-font-size:1.75rem;\n  --cds-heading-04-font-weight:400;\n  --cds-heading-04-line-height:1.28572;\n  --cds-heading-04-letter-spacing:0;\n  --cds-heading-05-font-size:2rem;\n  --cds-heading-05-font-weight:400;\n  --cds-heading-05-line-height:1.25;\n  --cds-heading-05-letter-spacing:0;\n  --cds-heading-06-font-size:2.625rem;\n  --cds-heading-06-font-weight:300;\n  --cds-heading-06-line-height:1.199;\n  --cds-heading-06-letter-spacing:0;\n  --cds-heading-07-font-size:3.375rem;\n  --cds-heading-07-font-weight:300;\n  --cds-heading-07-line-height:1.19;\n  --cds-heading-07-letter-spacing:0;\n  --cds-fluid-heading-03-font-size:1.25rem;\n  --cds-fluid-heading-03-font-weight:400;\n  --cds-fluid-heading-03-line-height:1.4;\n  --cds-fluid-heading-03-letter-spacing:0;\n  --cds-fluid-heading-04-font-size:1.75rem;\n  --cds-fluid-heading-04-font-weight:400;\n  --cds-fluid-heading-04-line-height:1.28572;\n  --cds-fluid-heading-04-letter-spacing:0;\n  --cds-fluid-heading-05-font-size:2rem;\n  --cds-fluid-heading-05-font-weight:400;\n  --cds-fluid-heading-05-line-height:1.25;\n  --cds-fluid-heading-05-letter-spacing:0;\n  --cds-fluid-heading-06-font-size:2rem;\n  --cds-fluid-heading-06-font-weight:600;\n  --cds-fluid-heading-06-line-height:1.25;\n  --cds-fluid-heading-06-letter-spacing:0;\n  --cds-fluid-paragraph-01-font-size:1.5rem;\n  --cds-fluid-paragraph-01-font-weight:300;\n  --cds-fluid-paragraph-01-line-height:1.334;\n  --cds-fluid-paragraph-01-letter-spacing:0;\n  --cds-fluid-quotation-01-font-family:'IBM Plex Serif', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', serif;\n  --cds-fluid-quotation-01-font-size:1.25rem;\n  --cds-fluid-quotation-01-font-weight:400;\n  --cds-fluid-quotation-01-line-height:1.3;\n  --cds-fluid-quotation-01-letter-spacing:0;\n  --cds-fluid-quotation-02-font-family:'IBM Plex Serif', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', serif;\n  --cds-fluid-quotation-02-font-size:2rem;\n  --cds-fluid-quotation-02-font-weight:300;\n  --cds-fluid-quotation-02-line-height:1.25;\n  --cds-fluid-quotation-02-letter-spacing:0;\n  --cds-fluid-display-01-font-size:2.625rem;\n  --cds-fluid-display-01-font-weight:300;\n  --cds-fluid-display-01-line-height:1.19;\n  --cds-fluid-display-01-letter-spacing:0;\n  --cds-fluid-display-02-font-size:2.625rem;\n  --cds-fluid-display-02-font-weight:600;\n  --cds-fluid-display-02-line-height:1.19;\n  --cds-fluid-display-02-letter-spacing:0;\n  --cds-fluid-display-03-font-size:2.625rem;\n  --cds-fluid-display-03-font-weight:300;\n  --cds-fluid-display-03-line-height:1.19;\n  --cds-fluid-display-03-letter-spacing:0;\n  --cds-fluid-display-04-font-size:2.625rem;\n  --cds-fluid-display-04-font-weight:300;\n  --cds-fluid-display-04-line-height:1.19;\n  --cds-fluid-display-04-letter-spacing:0;\n  --cds-layer:var(--cds-layer-01, #f4f4f4);\n  --cds-layer-active:var(--cds-layer-active-01, #c6c6c6);\n  --cds-layer-background:var(--cds-layer-background-01, #ffffff);\n  --cds-layer-hover:var(--cds-layer-hover-01, #e8e8e8);\n  --cds-layer-selected:var(--cds-layer-selected-01, #e0e0e0);\n  --cds-layer-selected-hover:var(--cds-layer-selected-hover-01, #d1d1d1);\n  --cds-layer-accent:var(--cds-layer-accent-01, #e0e0e0);\n  --cds-layer-accent-hover:var(--cds-layer-accent-hover-01, #d1d1d1);\n  --cds-layer-accent-active:var(--cds-layer-accent-active-01, #a8a8a8);\n  --cds-field:var(--cds-field-01, #f4f4f4);\n  --cds-field-hover:var(--cds-field-hover-01, #e8e8e8);\n  --cds-border-subtle:var(--cds-border-subtle-00, #e0e0e0);\n  --cds-border-subtle-selected:var(--cds-border-subtle-selected-01, #c6c6c6);\n  --cds-border-strong:var(--cds-border-strong-01, #8d8d8d);\n  --cds-border-tile:var(--cds-border-tile-01, #c6c6c6);\n}\n@media screen and (-ms-high-contrast: active), (forced-colors: active){\n  .cds-ai-chat-table-container.cds--white{\n    --cds-icon-primary:ButtonText;\n    --cds-icon-secondary:ButtonText;\n    --cds-icon-interactive:ButtonText;\n    --cds-icon-disabled:GrayText;\n    --cds-icon-on-color-disabled:GrayText;\n    --cds-icon-inverse:SelectedItemText;\n    --cds-icon-on-color:SelectedItemText;\n    --cds-button-disabled:GrayText;\n    --cds-interactive:ButtonText;\n    --cds-link-primary:LinkText;\n    --cds-link-primary-hover:LinkText;\n    --cds-link-secondary:LinkText;\n    --cds-link-inverse:SelectedItemText;\n    --cds-link-inverse-hover:SelectedItemText;\n    --cds-link-inverse-visited:SelectedItemText;\n    --cds-link-visited:VisitedText;\n    --cds-background-selected:SelectedItem;\n    --cds-background-selected-hover:SelectedItem;\n    --cds-background-inverse:SelectedItem;\n    --cds-layer-selected-inverse:SelectedItem;\n  }\n}\n\n.cds-ai-chat-table-container.cds--g90{\n  --cds-ai-aura-end:rgba(0, 0, 0, 0);\n  --cds-ai-aura-hover-background:#474747;\n  --cds-ai-aura-hover-end:rgba(0, 0, 0, 0);\n  --cds-ai-aura-hover-start:rgba(69, 137, 255, 0.4);\n  --cds-ai-aura-start:rgba(69, 137, 255, 0.1);\n  --cds-ai-aura-start-sm:rgba(69, 137, 255, 0.16);\n  --cds-ai-border-end:#4589ff;\n  --cds-ai-border-start:rgba(166, 200, 255, 0.36);\n  --cds-ai-border-strong:#78a9ff;\n  --cds-ai-drop-shadow:rgba(0, 0, 0, 0.28);\n  --cds-ai-inner-shadow:rgba(69, 137, 255, 0.16);\n  --cds-ai-overlay:rgba(0, 0, 0, 0.5);\n  --cds-ai-popover-background:#161616;\n  --cds-ai-popover-caret-bottom:#4589ff;\n  --cds-ai-popover-caret-bottom-background:#202d45;\n  --cds-ai-popover-caret-bottom-background-actions:#1e283a;\n  --cds-ai-popover-caret-center:#4870b5;\n  --cds-ai-popover-shadow-outer-01:rgba(0, 0, 0, 0.12);\n  --cds-ai-popover-shadow-outer-02:rgba(0, 0, 0, 0.08);\n  --cds-ai-skeleton-background:rgba(120, 169, 255, 0.5);\n  --cds-ai-skeleton-element-background:rgba(120, 169, 255, 0.3);\n  --cds-background:#262626;\n  --cds-background-active:rgba(141, 141, 141, 0.4);\n  --cds-background-brand:#0f62fe;\n  --cds-background-hover:rgba(141, 141, 141, 0.16);\n  --cds-background-inverse:#f4f4f4;\n  --cds-background-inverse-hover:#e8e8e8;\n  --cds-background-selected:rgba(141, 141, 141, 0.24);\n  --cds-background-selected-hover:rgba(141, 141, 141, 0.32);\n  --cds-border-disabled:rgba(141, 141, 141, 0.5);\n  --cds-border-interactive:#4589ff;\n  --cds-border-inverse:#f4f4f4;\n  --cds-border-strong-01:#8d8d8d;\n  --cds-border-strong-02:#a8a8a8;\n  --cds-border-strong-03:#c6c6c6;\n  --cds-border-subtle-00:#525252;\n  --cds-border-subtle-01:#6f6f6f;\n  --cds-border-subtle-02:#8d8d8d;\n  --cds-border-subtle-03:#8d8d8d;\n  --cds-border-subtle-selected-01:#8d8d8d;\n  --cds-border-subtle-selected-02:#a8a8a8;\n  --cds-border-subtle-selected-03:#a8a8a8;\n  --cds-border-tile-01:#6f6f6f;\n  --cds-border-tile-02:#8d8d8d;\n  --cds-border-tile-03:#a8a8a8;\n  --cds-chat-avatar-agent:#c6c6c6;\n  --cds-chat-avatar-bot:#8d8d8d;\n  --cds-chat-avatar-user:#4589ff;\n  --cds-chat-bubble-agent:#262626;\n  --cds-chat-bubble-border:#525252;\n  --cds-chat-bubble-user:#393939;\n  --cds-chat-button:#78a9ff;\n  --cds-chat-button-active:rgba(141, 141, 141, 0.4);\n  --cds-chat-button-hover:rgba(141, 141, 141, 0.16);\n  --cds-chat-button-selected:rgba(141, 141, 141, 0.24);\n  --cds-chat-button-text-hover:#a6c8ff;\n  --cds-chat-button-text-selected:#c6c6c6;\n  --cds-chat-header-background:#262626;\n  --cds-chat-prompt-background:#161616;\n  --cds-chat-prompt-border-end:rgba(38, 38, 38, 0);\n  --cds-chat-prompt-border-start:#262626;\n  --cds-chat-shell-background:#262626;\n  --cds-field-01:#393939;\n  --cds-field-02:#525252;\n  --cds-field-03:#6f6f6f;\n  --cds-field-hover-01:#474747;\n  --cds-field-hover-02:#636363;\n  --cds-field-hover-03:#5e5e5e;\n  --cds-focus:#ffffff;\n  --cds-focus-inset:#161616;\n  --cds-focus-inverse:#0f62fe;\n  --cds-highlight:#002d9c;\n  --cds-icon-disabled:rgba(244, 244, 244, 0.25);\n  --cds-icon-interactive:#ffffff;\n  --cds-icon-inverse:#161616;\n  --cds-icon-on-color:#ffffff;\n  --cds-icon-on-color-disabled:rgba(255, 255, 255, 0.25);\n  --cds-icon-primary:#f4f4f4;\n  --cds-icon-secondary:#c6c6c6;\n  --cds-interactive:#4589ff;\n  --cds-layer-01:#393939;\n  --cds-layer-02:#525252;\n  --cds-layer-03:#6f6f6f;\n  --cds-layer-accent-01:#525252;\n  --cds-layer-accent-02:#6f6f6f;\n  --cds-layer-accent-03:#8d8d8d;\n  --cds-layer-accent-active-01:#8d8d8d;\n  --cds-layer-accent-active-02:#393939;\n  --cds-layer-accent-active-03:#525252;\n  --cds-layer-accent-hover-01:#636363;\n  --cds-layer-accent-hover-02:#5e5e5e;\n  --cds-layer-accent-hover-03:#7a7a7a;\n  --cds-layer-active-01:#6f6f6f;\n  --cds-layer-active-02:#8d8d8d;\n  --cds-layer-active-03:#393939;\n  --cds-layer-background-01:#262626;\n  --cds-layer-background-02:#393939;\n  --cds-layer-background-03:#525252;\n  --cds-layer-hover-01:#474747;\n  --cds-layer-hover-02:#636363;\n  --cds-layer-hover-03:#5e5e5e;\n  --cds-layer-selected-01:#525252;\n  --cds-layer-selected-02:#6f6f6f;\n  --cds-layer-selected-03:#525252;\n  --cds-layer-selected-disabled:#a8a8a8;\n  --cds-layer-selected-hover-01:#636363;\n  --cds-layer-selected-hover-02:#5e5e5e;\n  --cds-layer-selected-hover-03:#636363;\n  --cds-layer-selected-inverse:#f4f4f4;\n  --cds-link-inverse:#0f62fe;\n  --cds-link-inverse-active:#161616;\n  --cds-link-inverse-hover:#0043ce;\n  --cds-link-inverse-visited:#8a3ffc;\n  --cds-link-primary:#78a9ff;\n  --cds-link-primary-hover:#a6c8ff;\n  --cds-link-secondary:#a6c8ff;\n  --cds-link-visited:#be95ff;\n  --cds-overlay:rgba(0, 0, 0, 0.65);\n  --cds-shadow:rgba(0, 0, 0, 0.8);\n  --cds-skeleton-background:#333333;\n  --cds-skeleton-element:#525252;\n  --cds-support-caution-major:#ff832b;\n  --cds-support-caution-minor:#f1c21b;\n  --cds-support-caution-undefined:#a56eff;\n  --cds-support-error:#ff8389;\n  --cds-support-error-inverse:#da1e28;\n  --cds-support-info:#4589ff;\n  --cds-support-info-inverse:#0043ce;\n  --cds-support-success:#42be65;\n  --cds-support-success-inverse:#24a148;\n  --cds-support-warning:#f1c21b;\n  --cds-support-warning-inverse:#f1c21b;\n  --cds-text-disabled:rgba(244, 244, 244, 0.25);\n  --cds-text-error:#ffb3b8;\n  --cds-text-helper:#c6c6c6;\n  --cds-text-inverse:#161616;\n  --cds-text-on-color:#ffffff;\n  --cds-text-on-color-disabled:rgba(255, 255, 255, 0.25);\n  --cds-text-placeholder:rgba(244, 244, 244, 0.4);\n  --cds-text-primary:#f4f4f4;\n  --cds-text-secondary:#c6c6c6;\n  --cds-toggle-off:#8d8d8d;\n  --cds-spacing-01:0.125rem;\n  --cds-spacing-02:0.25rem;\n  --cds-spacing-03:0.5rem;\n  --cds-spacing-04:0.75rem;\n  --cds-spacing-05:1rem;\n  --cds-spacing-06:1.5rem;\n  --cds-spacing-07:2rem;\n  --cds-spacing-08:2.5rem;\n  --cds-spacing-09:3rem;\n  --cds-spacing-10:4rem;\n  --cds-spacing-11:5rem;\n  --cds-spacing-12:6rem;\n  --cds-spacing-13:10rem;\n  --cds-fluid-spacing-01:0;\n  --cds-fluid-spacing-02:2vw;\n  --cds-fluid-spacing-03:5vw;\n  --cds-fluid-spacing-04:10vw;\n  --cds-caption-01-font-size:0.75rem;\n  --cds-caption-01-font-weight:400;\n  --cds-caption-01-line-height:1.33333;\n  --cds-caption-01-letter-spacing:0.32px;\n  --cds-caption-02-font-size:0.875rem;\n  --cds-caption-02-font-weight:400;\n  --cds-caption-02-line-height:1.28572;\n  --cds-caption-02-letter-spacing:0.32px;\n  --cds-label-01-font-size:0.75rem;\n  --cds-label-01-font-weight:400;\n  --cds-label-01-line-height:1.33333;\n  --cds-label-01-letter-spacing:0.32px;\n  --cds-label-02-font-size:0.875rem;\n  --cds-label-02-font-weight:400;\n  --cds-label-02-line-height:1.28572;\n  --cds-label-02-letter-spacing:0.16px;\n  --cds-helper-text-01-font-size:0.75rem;\n  --cds-helper-text-01-line-height:1.33333;\n  --cds-helper-text-01-letter-spacing:0.32px;\n  --cds-helper-text-02-font-size:0.875rem;\n  --cds-helper-text-02-font-weight:400;\n  --cds-helper-text-02-line-height:1.28572;\n  --cds-helper-text-02-letter-spacing:0.16px;\n  --cds-body-short-01-font-size:0.875rem;\n  --cds-body-short-01-font-weight:400;\n  --cds-body-short-01-line-height:1.28572;\n  --cds-body-short-01-letter-spacing:0.16px;\n  --cds-body-short-02-font-size:1rem;\n  --cds-body-short-02-font-weight:400;\n  --cds-body-short-02-line-height:1.375;\n  --cds-body-short-02-letter-spacing:0;\n  --cds-body-long-01-font-size:0.875rem;\n  --cds-body-long-01-font-weight:400;\n  --cds-body-long-01-line-height:1.42857;\n  --cds-body-long-01-letter-spacing:0.16px;\n  --cds-body-long-02-font-size:1rem;\n  --cds-body-long-02-font-weight:400;\n  --cds-body-long-02-line-height:1.5;\n  --cds-body-long-02-letter-spacing:0;\n  --cds-code-01-font-family:'IBM Plex Mono', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', monospace;\n  --cds-code-01-font-size:0.75rem;\n  --cds-code-01-font-weight:400;\n  --cds-code-01-line-height:1.33333;\n  --cds-code-01-letter-spacing:0.32px;\n  --cds-code-02-font-family:'IBM Plex Mono', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', monospace;\n  --cds-code-02-font-size:0.875rem;\n  --cds-code-02-font-weight:400;\n  --cds-code-02-line-height:1.42857;\n  --cds-code-02-letter-spacing:0.32px;\n  --cds-heading-01-font-size:0.875rem;\n  --cds-heading-01-font-weight:600;\n  --cds-heading-01-line-height:1.42857;\n  --cds-heading-01-letter-spacing:0.16px;\n  --cds-heading-02-font-size:1rem;\n  --cds-heading-02-font-weight:600;\n  --cds-heading-02-line-height:1.5;\n  --cds-heading-02-letter-spacing:0;\n  --cds-productive-heading-01-font-size:0.875rem;\n  --cds-productive-heading-01-font-weight:600;\n  --cds-productive-heading-01-line-height:1.28572;\n  --cds-productive-heading-01-letter-spacing:0.16px;\n  --cds-productive-heading-02-font-size:1rem;\n  --cds-productive-heading-02-font-weight:600;\n  --cds-productive-heading-02-line-height:1.375;\n  --cds-productive-heading-02-letter-spacing:0;\n  --cds-productive-heading-03-font-size:1.25rem;\n  --cds-productive-heading-03-font-weight:400;\n  --cds-productive-heading-03-line-height:1.4;\n  --cds-productive-heading-03-letter-spacing:0;\n  --cds-productive-heading-04-font-size:1.75rem;\n  --cds-productive-heading-04-font-weight:400;\n  --cds-productive-heading-04-line-height:1.28572;\n  --cds-productive-heading-04-letter-spacing:0;\n  --cds-productive-heading-05-font-size:2rem;\n  --cds-productive-heading-05-font-weight:400;\n  --cds-productive-heading-05-line-height:1.25;\n  --cds-productive-heading-05-letter-spacing:0;\n  --cds-productive-heading-06-font-size:2.625rem;\n  --cds-productive-heading-06-font-weight:300;\n  --cds-productive-heading-06-line-height:1.199;\n  --cds-productive-heading-06-letter-spacing:0;\n  --cds-productive-heading-07-font-size:3.375rem;\n  --cds-productive-heading-07-font-weight:300;\n  --cds-productive-heading-07-line-height:1.19;\n  --cds-productive-heading-07-letter-spacing:0;\n  --cds-expressive-paragraph-01-font-size:1.5rem;\n  --cds-expressive-paragraph-01-font-weight:300;\n  --cds-expressive-paragraph-01-line-height:1.334;\n  --cds-expressive-paragraph-01-letter-spacing:0;\n  --cds-expressive-heading-01-font-size:0.875rem;\n  --cds-expressive-heading-01-font-weight:600;\n  --cds-expressive-heading-01-line-height:1.42857;\n  --cds-expressive-heading-01-letter-spacing:0.16px;\n  --cds-expressive-heading-02-font-size:1rem;\n  --cds-expressive-heading-02-font-weight:600;\n  --cds-expressive-heading-02-line-height:1.5;\n  --cds-expressive-heading-02-letter-spacing:0;\n  --cds-expressive-heading-03-font-size:1.25rem;\n  --cds-expressive-heading-03-font-weight:400;\n  --cds-expressive-heading-03-line-height:1.4;\n  --cds-expressive-heading-03-letter-spacing:0;\n  --cds-expressive-heading-04-font-size:1.75rem;\n  --cds-expressive-heading-04-font-weight:400;\n  --cds-expressive-heading-04-line-height:1.28572;\n  --cds-expressive-heading-04-letter-spacing:0;\n  --cds-expressive-heading-05-font-size:2rem;\n  --cds-expressive-heading-05-font-weight:400;\n  --cds-expressive-heading-05-line-height:1.25;\n  --cds-expressive-heading-05-letter-spacing:0;\n  --cds-expressive-heading-06-font-size:2rem;\n  --cds-expressive-heading-06-font-weight:600;\n  --cds-expressive-heading-06-line-height:1.25;\n  --cds-expressive-heading-06-letter-spacing:0;\n  --cds-quotation-01-font-family:'IBM Plex Serif', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', serif;\n  --cds-quotation-01-font-size:1.25rem;\n  --cds-quotation-01-font-weight:400;\n  --cds-quotation-01-line-height:1.3;\n  --cds-quotation-01-letter-spacing:0;\n  --cds-quotation-02-font-family:'IBM Plex Serif', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', serif;\n  --cds-quotation-02-font-size:2rem;\n  --cds-quotation-02-font-weight:300;\n  --cds-quotation-02-line-height:1.25;\n  --cds-quotation-02-letter-spacing:0;\n  --cds-display-01-font-size:2.625rem;\n  --cds-display-01-font-weight:300;\n  --cds-display-01-line-height:1.19;\n  --cds-display-01-letter-spacing:0;\n  --cds-display-02-font-size:2.625rem;\n  --cds-display-02-font-weight:600;\n  --cds-display-02-line-height:1.19;\n  --cds-display-02-letter-spacing:0;\n  --cds-display-03-font-size:2.625rem;\n  --cds-display-03-font-weight:300;\n  --cds-display-03-line-height:1.19;\n  --cds-display-03-letter-spacing:0;\n  --cds-display-04-font-size:2.625rem;\n  --cds-display-04-font-weight:300;\n  --cds-display-04-line-height:1.19;\n  --cds-display-04-letter-spacing:0;\n  --cds-legal-01-font-size:0.75rem;\n  --cds-legal-01-font-weight:400;\n  --cds-legal-01-line-height:1.33333;\n  --cds-legal-01-letter-spacing:0.32px;\n  --cds-legal-02-font-size:0.875rem;\n  --cds-legal-02-font-weight:400;\n  --cds-legal-02-line-height:1.28572;\n  --cds-legal-02-letter-spacing:0.16px;\n  --cds-body-compact-01-font-size:0.875rem;\n  --cds-body-compact-01-font-weight:400;\n  --cds-body-compact-01-line-height:1.28572;\n  --cds-body-compact-01-letter-spacing:0.16px;\n  --cds-body-compact-02-font-size:1rem;\n  --cds-body-compact-02-font-weight:400;\n  --cds-body-compact-02-line-height:1.375;\n  --cds-body-compact-02-letter-spacing:0;\n  --cds-heading-compact-01-font-size:0.875rem;\n  --cds-heading-compact-01-font-weight:600;\n  --cds-heading-compact-01-line-height:1.28572;\n  --cds-heading-compact-01-letter-spacing:0.16px;\n  --cds-heading-compact-02-font-size:1rem;\n  --cds-heading-compact-02-font-weight:600;\n  --cds-heading-compact-02-line-height:1.375;\n  --cds-heading-compact-02-letter-spacing:0;\n  --cds-body-01-font-size:0.875rem;\n  --cds-body-01-font-weight:400;\n  --cds-body-01-line-height:1.42857;\n  --cds-body-01-letter-spacing:0.16px;\n  --cds-body-02-font-size:1rem;\n  --cds-body-02-font-weight:400;\n  --cds-body-02-line-height:1.5;\n  --cds-body-02-letter-spacing:0;\n  --cds-heading-03-font-size:1.25rem;\n  --cds-heading-03-font-weight:400;\n  --cds-heading-03-line-height:1.4;\n  --cds-heading-03-letter-spacing:0;\n  --cds-heading-04-font-size:1.75rem;\n  --cds-heading-04-font-weight:400;\n  --cds-heading-04-line-height:1.28572;\n  --cds-heading-04-letter-spacing:0;\n  --cds-heading-05-font-size:2rem;\n  --cds-heading-05-font-weight:400;\n  --cds-heading-05-line-height:1.25;\n  --cds-heading-05-letter-spacing:0;\n  --cds-heading-06-font-size:2.625rem;\n  --cds-heading-06-font-weight:300;\n  --cds-heading-06-line-height:1.199;\n  --cds-heading-06-letter-spacing:0;\n  --cds-heading-07-font-size:3.375rem;\n  --cds-heading-07-font-weight:300;\n  --cds-heading-07-line-height:1.19;\n  --cds-heading-07-letter-spacing:0;\n  --cds-fluid-heading-03-font-size:1.25rem;\n  --cds-fluid-heading-03-font-weight:400;\n  --cds-fluid-heading-03-line-height:1.4;\n  --cds-fluid-heading-03-letter-spacing:0;\n  --cds-fluid-heading-04-font-size:1.75rem;\n  --cds-fluid-heading-04-font-weight:400;\n  --cds-fluid-heading-04-line-height:1.28572;\n  --cds-fluid-heading-04-letter-spacing:0;\n  --cds-fluid-heading-05-font-size:2rem;\n  --cds-fluid-heading-05-font-weight:400;\n  --cds-fluid-heading-05-line-height:1.25;\n  --cds-fluid-heading-05-letter-spacing:0;\n  --cds-fluid-heading-06-font-size:2rem;\n  --cds-fluid-heading-06-font-weight:600;\n  --cds-fluid-heading-06-line-height:1.25;\n  --cds-fluid-heading-06-letter-spacing:0;\n  --cds-fluid-paragraph-01-font-size:1.5rem;\n  --cds-fluid-paragraph-01-font-weight:300;\n  --cds-fluid-paragraph-01-line-height:1.334;\n  --cds-fluid-paragraph-01-letter-spacing:0;\n  --cds-fluid-quotation-01-font-family:'IBM Plex Serif', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', serif;\n  --cds-fluid-quotation-01-font-size:1.25rem;\n  --cds-fluid-quotation-01-font-weight:400;\n  --cds-fluid-quotation-01-line-height:1.3;\n  --cds-fluid-quotation-01-letter-spacing:0;\n  --cds-fluid-quotation-02-font-family:'IBM Plex Serif', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', serif;\n  --cds-fluid-quotation-02-font-size:2rem;\n  --cds-fluid-quotation-02-font-weight:300;\n  --cds-fluid-quotation-02-line-height:1.25;\n  --cds-fluid-quotation-02-letter-spacing:0;\n  --cds-fluid-display-01-font-size:2.625rem;\n  --cds-fluid-display-01-font-weight:300;\n  --cds-fluid-display-01-line-height:1.19;\n  --cds-fluid-display-01-letter-spacing:0;\n  --cds-fluid-display-02-font-size:2.625rem;\n  --cds-fluid-display-02-font-weight:600;\n  --cds-fluid-display-02-line-height:1.19;\n  --cds-fluid-display-02-letter-spacing:0;\n  --cds-fluid-display-03-font-size:2.625rem;\n  --cds-fluid-display-03-font-weight:300;\n  --cds-fluid-display-03-line-height:1.19;\n  --cds-fluid-display-03-letter-spacing:0;\n  --cds-fluid-display-04-font-size:2.625rem;\n  --cds-fluid-display-04-font-weight:300;\n  --cds-fluid-display-04-line-height:1.19;\n  --cds-fluid-display-04-letter-spacing:0;\n  --cds-layer:var(--cds-layer-01, #f4f4f4);\n  --cds-layer-active:var(--cds-layer-active-01, #c6c6c6);\n  --cds-layer-background:var(--cds-layer-background-01, #ffffff);\n  --cds-layer-hover:var(--cds-layer-hover-01, #e8e8e8);\n  --cds-layer-selected:var(--cds-layer-selected-01, #e0e0e0);\n  --cds-layer-selected-hover:var(--cds-layer-selected-hover-01, #d1d1d1);\n  --cds-layer-accent:var(--cds-layer-accent-01, #e0e0e0);\n  --cds-layer-accent-hover:var(--cds-layer-accent-hover-01, #d1d1d1);\n  --cds-layer-accent-active:var(--cds-layer-accent-active-01, #a8a8a8);\n  --cds-field:var(--cds-field-01, #f4f4f4);\n  --cds-field-hover:var(--cds-field-hover-01, #e8e8e8);\n  --cds-border-subtle:var(--cds-border-subtle-00, #e0e0e0);\n  --cds-border-subtle-selected:var(--cds-border-subtle-selected-01, #c6c6c6);\n  --cds-border-strong:var(--cds-border-strong-01, #8d8d8d);\n  --cds-border-tile:var(--cds-border-tile-01, #c6c6c6);\n}\n@media screen and (-ms-high-contrast: active), (forced-colors: active){\n  .cds-ai-chat-table-container.cds--g90{\n    --cds-icon-primary:ButtonText;\n    --cds-icon-secondary:ButtonText;\n    --cds-icon-interactive:ButtonText;\n    --cds-icon-disabled:GrayText;\n    --cds-icon-on-color-disabled:GrayText;\n    --cds-icon-inverse:SelectedItemText;\n    --cds-icon-on-color:SelectedItemText;\n    --cds-button-disabled:GrayText;\n    --cds-interactive:ButtonText;\n    --cds-link-primary:LinkText;\n    --cds-link-primary-hover:LinkText;\n    --cds-link-secondary:LinkText;\n    --cds-link-inverse:SelectedItemText;\n    --cds-link-inverse-hover:SelectedItemText;\n    --cds-link-inverse-visited:SelectedItemText;\n    --cds-link-visited:VisitedText;\n    --cds-background-selected:SelectedItem;\n    --cds-background-selected-hover:SelectedItem;\n    --cds-background-inverse:SelectedItem;\n    --cds-layer-selected-inverse:SelectedItem;\n  }\n}")}
  `,It([(0,w.MZ)({type:String,attribute:"table-title"})],Qr.prototype,"tableTitle",void 0),It([(0,w.MZ)({type:String,attribute:"table-description"})],Qr.prototype,"tableDescription",void 0),It([(0,w.MZ)({type:Array})],Qr.prototype,"headers",void 0),It([(0,w.MZ)({type:Array})],Qr.prototype,"rows",void 0),It([(0,w.MZ)({type:Boolean,attribute:"loading"})],Qr.prototype,"loading",void 0),It([(0,w.MZ)({type:String,attribute:"filter-placeholder-text"})],Qr.prototype,"filterPlaceholderText",void 0),It([(0,w.MZ)({type:String,attribute:"previous-page-text"})],Qr.prototype,"previousPageText",void 0),It([(0,w.MZ)({type:String,attribute:"next-page-text"})],Qr.prototype,"nextPageText",void 0),It([(0,w.MZ)({type:String,attribute:"items-per-page-text"})],Qr.prototype,"itemsPerPageText",void 0),It([(0,w.MZ)({type:String,attribute:"locale"})],Qr.prototype,"locale",void 0),It([(0,w.MZ)({type:Boolean})],Qr.prototype,"dark",void 0),It([(0,w.wk)()],Qr.prototype,"_defaultPageSize",void 0),It([(0,w.MZ)({type:Number,attribute:"default-page-size"})],Qr.prototype,"defaultPageSize",null),It([(0,w.MZ)({type:Function,attribute:!1})],Qr.prototype,"getPaginationSupplementalText",void 0),It([(0,w.MZ)({type:Function,attribute:!1})],Qr.prototype,"getPaginationStatusText",void 0),It([(0,w.wk)()],Qr.prototype,"_isValid",void 0),It([(0,w.wk)()],Qr.prototype,"_currentPageNumber",void 0),It([(0,w.wk)()],Qr.prototype,"_currentPageSize",void 0),It([(0,w.wk)()],Qr.prototype,"_rowsPerPageChanged",void 0),It([(0,w.wk)()],Qr.prototype,"_filterVisibleRowIDs",void 0),It([(0,w.wk)()],Qr.prototype,"_rowsWithIDs",void 0),It([(0,w.wk)()],Qr.prototype,"_allowFiltering",void 0),Qr=It([Dr(Xr)],Qr);const Jr=new P.A({html:!0,breaks:!0,linkify:!0}).use(D,{leftDelimiter:"{{",rightDelimiter:"}}",allowedAttributes:["target","rel","class","id"]}).use(Vr),eo=new P.A({html:!1,breaks:!0,linkify:!0}).use(D,{leftDelimiter:"{{",rightDelimiter:"}}",allowedAttributes:["target","rel","class","id"]}).use(Vr);function to(e){const t={key:"root",token:{type:"root",tag:"",nesting:0,level:0,content:"",attrs:null,children:null,markup:"",block:!0,hidden:!1,map:null,info:"",meta:null},children:[]},n=[t];return e.forEach(e=>{const t={key:no(e),token:e,children:[]};"inline"===e.type&&e.children?.length&&(t.children=to(e.children).children);const a=n[n.length-1];1===e.nesting?(a.children.push(t),n.push(t)):-1===e.nesting?n.pop():a.children.push(t)}),t}function no(e){const t=e.map?e.map.join("-"):"";return`${e.type}:${e.tag}:${t}`}function ao(e,t){if(!e||e.key!==t.key)return t;const n={key:t.key,token:t.token,children:[]},a=new Map(e.children.map(e=>[e.key,e]));return t.children.forEach(e=>{const t=a.get(e.key);t?n.children.push(ao(t,e)):n.children.push(e)}),n}function so(e,t,n=!0){const a=function(e,t=!0){return t?Jr.parse(e,{}):eo.parse(e,{})}(e,n);return ao(t,to(a))}const io=[],ro=[],oo={},co=({count:e})=>`${e} items`,lo=({start:e,end:t,count:n})=>`${e}–${t} of ${n} items`;function uo(e){if("text"===e.token.type)return e.token.content;if("code_inline"===e.token.type)return e.token.content;let t="";for(const n of e.children)t+=uo(n);return t}function ho(e,t){const{token:n,children:a}=e,{context:s,dark:i,sanitize:r}=t;if("html_block"===n.type||"html_inline"===n.type){let e=n.content;return r&&(e=k.A.sanitize(e,{CUSTOM_ELEMENT_HANDLING:{tagNameCheck:()=>!0,attributeNameCheck:()=>!0,allowCustomizedBuiltInElements:!0}})),T.qy`${(0,O._)(e)}`}if("text"===n.type)return T.qy`${n.content}`;if("code_inline"===n.type)return T.qy`<code>${n.content}</code>`;if("fence"===n.type){const e=n.info?.trim()??"";return T.qy`<cds-aichat-code
      .language=${e}
      .content=${n.content}
      .dark=${i}
    ></cds-aichat-code>`}const o=n.tag,c=(n.attrs||[]).reduce((e,[t,n])=>(e[t]=n,e),{});let l=c;r&&(l=Object.fromEntries(Object.entries(c).filter(([e,t])=>{const n=k.A.sanitize(`<a ${e}="${t}">`,{RETURN_DOM:!0}).firstChild;return null!==n?.getAttribute(e)})));let d,u=s;return"thead"===o&&(u={...s,isInThead:!0}),d=1===a.length&&"text"===a[0].token.type?T.qy`${a[0].token.content}`:T.qy`${(0,x.u)(a,(e,t)=>{const n=`${t}:${e.token.type}:${e.token.tag}`;return e.token.type?.includes("table")?`table-${n}`:`stable-${n}`},(e,n)=>ho(e,{...t,context:{...u,parentChildren:a,currentIndex:n}}))}`,o?function(e,t,n,a,s,i,r){if("root"===t.type)return n;switch(e){case"p":return T.qy`<p ...=${a}>${n}</p>`;case"blockquote":return T.qy`<blockquote ...=${a}>${n}</blockquote>`;case"pre":return T.qy`<pre ...=${a}>${n}</pre>`;case"h1":return T.qy`<h1 ...=${a}>${n}</h1>`;case"h2":return T.qy`<h2 ...=${a}>${n}</h2>`;case"h3":return T.qy`<h3 ...=${a}>${n}</h3>`;case"h4":return T.qy`<h4 ...=${a}>${n}</h4>`;case"h5":return T.qy`<h5 ...=${a}>${n}</h5>`;case"h6":return T.qy`<h6 ...=${a}>${n}</h6>`;case"ul":{const e=t.level>1;return T.qy`<cds-custom-unordered-list ?nested=${e} ...=${a}>
        ${n}
      </cds-custom-unordered-list>`}case"ol":{const e=t.level>1;return T.qy`<cds-custom-ordered-list ?nested=${e} ...=${a}>
        ${n}
      </cds-custom-ordered-list>`}case"li":return T.qy`<cds-custom-list-item ...=${a}
        >${n}</cds-custom-list-item
      >`;case"strong":return T.qy`<strong ...=${a}>${n}</strong>`;case"em":return T.qy`<em ...=${a}>${n}</em>`;case"code":return T.qy`<code ...=${a}>${n}</code>`;case"del":return T.qy`<del ...=${a}>${n}</del>`;case"sub":return T.qy`<sub ...=${a}>${n}</sub>`;case"sup":return T.qy`<sup ...=${a}>${n}</sup>`;case"span":return T.qy`<span ...=${a}>${n}</span>`;case"i":return T.qy`<i ...=${a}>${n}</i>`;case"b":return T.qy`<b ...=${a}>${n}</b>`;case"small":return T.qy`<small ...=${a}>${n}</small>`;case"mark":return T.qy`<mark ...=${a}>${n}</mark>`;case"ins":return T.qy`<ins ...=${a}>${n}</ins>`;case"s":return T.qy`<s ...=${a}>${n}</s>`;case"kbd":return T.qy`<kbd ...=${a}>${n}</kbd>`;case"var":return T.qy`<var ...=${a}>${n}</var>`;case"samp":return T.qy`<samp ...=${a}>${n}</samp>`;case"cite":return T.qy`<cite ...=${a}>${n}</cite>`;case"abbr":return T.qy`<abbr ...=${a}>${n}</abbr>`;case"dfn":return T.qy`<dfn ...=${a}>${n}</dfn>`;case"time":return T.qy`<time ...=${a}>${n}</time>`;case"q":return T.qy`<q ...=${a}>${n}</q>`;case"a":return a.target||(a.target="_blank"),T.qy`<a ...=${a}>${n}</a>`;case"table":{if(!r)return T.qy`<div>Error: Missing table data</div>`;const{streaming:e,context:t,localization:n}=s;let i,o,c=!1;if(e&&t?.parentChildren&&void 0!==t?.currentIndex){const{parentChildren:e,currentIndex:n}=t;c=!(n<e.length-1)}if(c)i=io,o=ro;else{const e=function(e){const t=[],n=[];for(const a of e.children)if("thead"===a.token.tag){for(const e of a.children)if("tr"===e.token.tag)for(const n of e.children)"th"===n.token.tag&&t.push(uo(n))}else if("tbody"===a.token.tag)for(const e of a.children)if("tr"===e.token.tag){const t=[];for(const n of e.children)"td"===n.token.tag&&t.push(uo(n));n.push(t)}return{headers:t,rows:n}}(r);i=e.headers,o=e.rows.map(e=>({cells:e}))}const l=c?oo:a,d=n?.table;return T.qy`<div class="cds-aichat-table-holder">
        <cds-aichat-table
          .headers=${i}
          .rows=${o}
          .loading=${c}
          .filterPlaceholderText=${d?.filterPlaceholderText||"Filter table..."}
          .previousPageText=${d?.previousPageText||"Previous page"}
          .nextPageText=${d?.nextPageText||"Next page"}
          .itemsPerPageText=${d?.itemsPerPageText||"Items per page:"}
          .locale=${d?.locale||"en"}
          .getPaginationSupplementalText=${d?.getPaginationSupplementalText||co}
          .getPaginationStatusText=${d?.getPaginationStatusText||lo}
          .dark=${s.dark}
          ...=${l}
        ></cds-aichat-table>
      </div>`}default:return T.qy`<div ...=${a}>${n}</div>`}}(o,n,d,l,t,0,e):d}let go=class extends T.WF{constructor(){super(...arguments),this.debug=!1,this.sanitizeHTML=!1,this.shouldRemoveHTMLBeforeMarkdownConversion=!1,this.streaming=!1,this.dark=!1,this.fullText="",this.tokenTree={key:"root",token:{type:"root",tag:"",nesting:0,level:0,content:"",attrs:null,children:null,markup:"",block:!0,hidden:!1,map:null,info:"",meta:null},children:[]},this.renderedContent=null,this.scheduleTokenParse=(0,M.A)(async()=>{this.debug&&this.fullText;try{this.tokenTree=so(this.fullText,this.tokenTree,!this.shouldRemoveHTMLBeforeMarkdownConversion),this.renderedContent=ho(this.tokenTree,{sanitize:this.sanitizeHTML,streaming:this.streaming}),this.debug&&this.renderedContent}catch(e){}},100),this.scheduleRender=(0,M.A)(async()=>{this.renderedContent=ho(this.tokenTree,{sanitize:this.sanitizeHTML,streaming:this.streaming})},50)}set markdown(e){if(e!==this.fullText){const t=this.fullText;this.fullText=e??"",this.requestUpdate("markdown",t),this.debug,this.scheduleTokenParse()}}get markdown(){return this.fullText}updated(e){super.updated(e),e.has("markdown")&&this.scheduleTokenParse()}willUpdate(e){(e.has("sanitizeHTML")||e.has("streaming"))&&this.scheduleRender()}};It([(0,w.MZ)({type:Boolean})],go.prototype,"debug",void 0),It([(0,w.MZ)({type:String})],go.prototype,"markdown",null),It([(0,w.MZ)({type:Boolean})],go.prototype,"sanitizeHTML",void 0),It([(0,w.MZ)({type:Boolean})],go.prototype,"shouldRemoveHTMLBeforeMarkdownConversion",void 0),It([(0,w.MZ)({type:Boolean})],go.prototype,"streaming",void 0),It([(0,w.MZ)({type:Object})],go.prototype,"localization",void 0),It([(0,w.MZ)({type:Boolean})],go.prototype,"dark",void 0),It([(0,w.wk)()],go.prototype,"tokenTree",void 0),It([(0,w.wk)()],go.prototype,"renderedContent",void 0);let mo=class extends go{render(){return function(e){const{renderedContent:t,debug:n}=e;return T.qy`<div class="cds-aichat-markdown-stack">${t}</div>`}(this)}};mo.styles=T.AH`
    ${(0,T.iz)("html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo{\n  padding:0;\n  border:0;\n  margin:0;\n  font:inherit;\n  font-feature-settings:\"liga\" 1;\n  font-size:100%;\n  vertical-align:baseline;\n}\n\nbutton,\nselect,\ninput,\ntextarea{\n  border-radius:0;\n  font-family:inherit;\n}\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection{\n  display:block;\n}\n\nbody{\n  background-color:var(--cds-background, #ffffff);\n  color:var(--cds-text-primary, #161616);\n  line-height:1;\n}\n\nol,\nul{\n  list-style:none;\n}\n\nblockquote,\nq{\n  quotes:none;\n}\n\nblockquote::before,\nblockquote::after,\nq::before,\nq::after{\n  content:none;\n}\n\ntable{\n  border-collapse:collapse;\n  border-spacing:0;\n}\n\nhtml{\n  box-sizing:border-box;\n}\n\n*,\n*::before,\n*::after{\n  box-sizing:inherit;\n}\n\nhtml{\n  font-size:100%;\n}\n\nbody{\n  font-weight:400;\n  font-family:'IBM Plex Sans', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif;\n  -moz-osx-font-smoothing:grayscale;\n  -webkit-font-smoothing:antialiased;\n  text-rendering:optimizeLegibility;\n}\n\ncode{\n  font-family:'IBM Plex Mono', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', monospace;\n}\n\nstrong{\n  font-weight:600;\n}\n\n@media screen and (-ms-high-contrast: active){\n  svg{\n    fill:ButtonText;\n  }\n}\nh1{\n  font-size:var(--cds-heading-06-font-size, 2.625rem);\n  font-weight:var(--cds-heading-06-font-weight, 300);\n  line-height:var(--cds-heading-06-line-height, 1.199);\n  letter-spacing:var(--cds-heading-06-letter-spacing, 0);\n}\n\nh2{\n  font-size:var(--cds-heading-05-font-size, 2rem);\n  font-weight:var(--cds-heading-05-font-weight, 400);\n  line-height:var(--cds-heading-05-line-height, 1.25);\n  letter-spacing:var(--cds-heading-05-letter-spacing, 0);\n}\n\nh3{\n  font-size:var(--cds-heading-04-font-size, 1.75rem);\n  font-weight:var(--cds-heading-04-font-weight, 400);\n  line-height:var(--cds-heading-04-line-height, 1.28572);\n  letter-spacing:var(--cds-heading-04-letter-spacing, 0);\n}\n\nh4{\n  font-size:var(--cds-heading-03-font-size, 1.25rem);\n  font-weight:var(--cds-heading-03-font-weight, 400);\n  line-height:var(--cds-heading-03-line-height, 1.4);\n  letter-spacing:var(--cds-heading-03-letter-spacing, 0);\n}\n\nh5{\n  font-size:var(--cds-heading-02-font-size, 1rem);\n  font-weight:var(--cds-heading-02-font-weight, 600);\n  line-height:var(--cds-heading-02-line-height, 1.5);\n  letter-spacing:var(--cds-heading-02-letter-spacing, 0);\n}\n\nh6{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n\np{\n  font-size:var(--cds-body-02-font-size, 1rem);\n  font-weight:var(--cds-body-02-font-weight, 400);\n  line-height:var(--cds-body-02-line-height, 1.5);\n  letter-spacing:var(--cds-body-02-letter-spacing, 0);\n}\n\na{\n  color:var(--cds-link-primary, #0062fe);\n}\n\nem{\n  font-style:italic;\n}\n\n.cds--link{\n  box-sizing:border-box;\n  padding:0;\n  border:0;\n  margin:0;\n  font-family:inherit;\n  font-size:100%;\n  vertical-align:baseline;\n  font-size:var(--cds-body-compact-01-font-size, 0.875rem);\n  font-weight:var(--cds-body-compact-01-font-weight, 400);\n  line-height:var(--cds-body-compact-01-line-height, 1.28572);\n  letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);\n  display:inline-flex;\n  color:var(--cds-link-text-color, var(--cds-link-primary, #0f62fe));\n  outline:none;\n  text-decoration:none;\n  transition:color 70ms cubic-bezier(0.2, 0, 0.38, 0.9);\n}\n.cds--link *,\n.cds--link *::before,\n.cds--link *::after{\n  box-sizing:inherit;\n}\n.cds--link:hover{\n  color:var(--cds-link-hover-text-color, var(--cds-link-primary-hover, #0043ce));\n  text-decoration:underline;\n}\n.cds--link:active:not(.cds--link--disabled), .cds--link:active:visited, .cds--link:active:visited:hover{\n  outline:1px solid var(--cds-focus, #0f62fe);\n  color:var(--cds-link-text-color, var(--cds-link-primary, #0f62fe));\n  outline-color:var(--cds-link-focus-text-color, var(--cds-focus, #0f62fe));\n  text-decoration:underline;\n}\n@media screen and (prefers-contrast){\n  .cds--link:active:not(.cds--link--disabled), .cds--link:active:visited, .cds--link:active:visited:hover{\n    outline-style:dotted;\n  }\n}\n.cds--link:focus:not(.cds--link--disabled){\n  outline:1px solid var(--cds-focus, #0f62fe);\n  outline-color:var(--cds-link-focus-text-color, var(--cds-focus, #0f62fe));\n  text-decoration:underline;\n}\n@media screen and (prefers-contrast){\n  .cds--link:focus:not(.cds--link--disabled){\n    outline-style:dotted;\n  }\n}\n.cds--link:visited{\n  color:var(--cds-link-text-color, var(--cds-link-primary, #0f62fe));\n}\n.cds--link:visited:hover{\n  color:var(--cds-link-hover-text-color, var(--cds-link-primary-hover, #0043ce));\n}\n\n.cds--link--disabled,\n.cds--link--disabled:hover{\n  box-sizing:border-box;\n  padding:0;\n  border:0;\n  margin:0;\n  font-family:inherit;\n  font-size:100%;\n  vertical-align:baseline;\n  font-size:var(--cds-body-compact-01-font-size, 0.875rem);\n  font-weight:var(--cds-body-compact-01-font-weight, 400);\n  line-height:var(--cds-body-compact-01-line-height, 1.28572);\n  letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);\n  color:var(--cds-text-disabled, rgba(22, 22, 22, 0.25));\n  cursor:not-allowed;\n  font-weight:400;\n  text-decoration:none;\n}\n.cds--link--disabled *,\n.cds--link--disabled *::before,\n.cds--link--disabled *::after,\n.cds--link--disabled:hover *,\n.cds--link--disabled:hover *::before,\n.cds--link--disabled:hover *::after{\n  box-sizing:inherit;\n}\n\n.cds--link.cds--link--visited:visited{\n  color:var(--cds-link-visited-text-color, var(--cds-link-visited, #8a3ffc));\n}\n\n.cds--link.cds--link--visited:visited:hover{\n  color:var(--cds-link-hover-text-color, var(--cds-link-primary-hover, #0043ce));\n}\n\n.cds--link.cds--link--inline{\n  display:inline;\n  text-decoration:underline;\n}\n\n.cds--link--disabled.cds--link--inline{\n  text-decoration:underline;\n}\n\n.cds--link--sm,\n.cds--link--sm.cds--link--disabled:hover{\n  font-size:var(--cds-helper-text-01-font-size, 0.75rem);\n  line-height:var(--cds-helper-text-01-line-height, 1.33333);\n  letter-spacing:var(--cds-helper-text-01-letter-spacing, 0.32px);\n}\n\n.cds--link--lg,\n.cds--link--lg.cds--link--disabled:hover{\n  font-size:var(--cds-body-compact-02-font-size, 1rem);\n  font-weight:var(--cds-body-compact-02-font-weight, 400);\n  line-height:var(--cds-body-compact-02-line-height, 1.375);\n  letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);\n}\n\n.cds--link__icon{\n  display:inline-flex;\n  align-self:center;\n  margin-inline-start:0.5rem;\n}\n\n:host{\n  display:block;\n  container-type:inline-size;\n  inline-size:100%;\n  max-inline-size:100%;\n}\n:host h1{\n  font-size:var(--cds-heading-06-font-size, 2.625rem);\n  font-weight:var(--cds-heading-06-font-weight, 300);\n  line-height:var(--cds-heading-06-line-height, 1.199);\n  letter-spacing:var(--cds-heading-06-letter-spacing, 0);\n}\n:host h2{\n  font-size:var(--cds-heading-05-font-size, 2rem);\n  font-weight:var(--cds-heading-05-font-weight, 400);\n  line-height:var(--cds-heading-05-line-height, 1.25);\n  letter-spacing:var(--cds-heading-05-letter-spacing, 0);\n}\n:host h3{\n  font-size:var(--cds-heading-04-font-size, 1.75rem);\n  font-weight:var(--cds-heading-04-font-weight, 400);\n  line-height:var(--cds-heading-04-line-height, 1.28572);\n  letter-spacing:var(--cds-heading-04-letter-spacing, 0);\n}\n:host h4{\n  font-size:var(--cds-heading-03-font-size, 1.25rem);\n  font-weight:var(--cds-heading-03-font-weight, 400);\n  line-height:var(--cds-heading-03-line-height, 1.4);\n  letter-spacing:var(--cds-heading-03-letter-spacing, 0);\n}\n:host h5{\n  font-size:var(--cds-heading-02-font-size, 1rem);\n  font-weight:var(--cds-heading-02-font-weight, 600);\n  line-height:var(--cds-heading-02-line-height, 1.5);\n  letter-spacing:var(--cds-heading-02-letter-spacing, 0);\n}\n:host h6{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n:host p{\n  font-size:var(--cds-body-02-font-size, 1rem);\n  font-weight:var(--cds-body-02-font-weight, 400);\n  line-height:var(--cds-body-02-line-height, 1.5);\n  letter-spacing:var(--cds-body-02-letter-spacing, 0);\n}\n:host a{\n  color:var(--cds-link-primary, #0062fe);\n}\n:host em{\n  font-style:italic;\n}\n:host mark{\n  border-radius:4px;\n  background-color:var(--cds-highlight, #d0e2ff);\n  color:var(--cds-text-primary, #161616);\n}\n:host b,\n:host strong{\n  font-weight:bold;\n}\n:host i,\n:host em{\n  font-style:italic;\n}\n:host .cds-aichat-markdown-stack{\n  display:block;\n  max-inline-size:100%;\n}\n:host .cds-aichat-markdown-stack > *:not(:first-child){\n  margin-block-start:1rem;\n}\n:host .cds-aichat-markdown-stack > h1 + *:not(:first-child),\n:host .cds-aichat-markdown-stack > h2 + *:not(:first-child),\n:host .cds-aichat-markdown-stack > h3 + *:not(:first-child),\n:host .cds-aichat-markdown-stack > h4 + *:not(:first-child),\n:host .cds-aichat-markdown-stack > h5 + *:not(:first-child),\n:host .cds-aichat-markdown-stack > h6 + *:not(:first-child){\n  margin-block-start:0.25rem;\n}\n:host p{\n  font-size:var(--cds-body-01-font-size, 0.875rem);\n  font-weight:var(--cds-body-01-font-weight, 400);\n  line-height:var(--cds-body-01-line-height, 1.42857);\n  letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);\n}\n:host blockquote{\n  border-inline-start:2px solid var(--cds-border-subtle-00, #e0e0e0);\n  padding-inline-start:0.5rem;\n}\n:host blockquote > *:not(:first-child){\n  margin-block-start:1rem;\n}\n:host blockquote > h1 + *:not(:first-child),\n:host blockquote > h2 + *:not(:first-child),\n:host blockquote > h3 + *:not(:first-child),\n:host blockquote > h4 + *:not(:first-child),\n:host blockquote > h5 + *:not(:first-child),\n:host blockquote > h6 + *:not(:first-child){\n  margin-block-start:0.5rem;\n}\n:host pre{\n  font-family:var(--cds-code-02-font-family, 'IBM Plex Mono', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', monospace);\n  font-size:var(--cds-code-02-font-size, 0.875rem);\n  font-weight:var(--cds-code-02-font-weight, 400);\n  line-height:var(--cds-code-02-line-height, 1.42857);\n  letter-spacing:var(--cds-code-02-letter-spacing, 0.32px);\n  overflow:auto hidden;\n  padding:1rem;\n  border:solid 1px var(--cds-chat-bubble-border, #e0e0e0);\n  background-color:var(--cds-layer-02, #ffffff);\n  white-space:pre-wrap;\n}\n:host img{\n  max-inline-size:100%;\n}\n:host h1{\n  font-size:var(--cds-heading-04-font-size, 1.75rem);\n  font-weight:var(--cds-heading-04-font-weight, 400);\n  line-height:var(--cds-heading-04-line-height, 1.28572);\n  letter-spacing:var(--cds-heading-04-letter-spacing, 0);\n}\n:host h2{\n  font-size:var(--cds-heading-03-font-size, 1.25rem);\n  font-weight:var(--cds-heading-03-font-weight, 400);\n  line-height:var(--cds-heading-03-line-height, 1.4);\n  letter-spacing:var(--cds-heading-03-letter-spacing, 0);\n}\n:host h3{\n  font-size:var(--cds-heading-02-font-size, 1rem);\n  font-weight:var(--cds-heading-02-font-weight, 600);\n  line-height:var(--cds-heading-02-line-height, 1.5);\n  letter-spacing:var(--cds-heading-02-letter-spacing, 0);\n}\n:host h4{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n:host h5{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n:host h6{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n:host cds-custom-ordered-list:not([nested]) cds-custom-list-item{\n  margin-inline-start:1.5rem;\n}\n@container (max-width: 703px){\n  :host .cds--link:not(:has(.cds--link__icon)){\n    display:inline;\n  }\n}")}
  `,mo=It([Dr("cds-aichat-markdown-text")],mo);var po=mo;const fo=(0,I.a)({tagName:"cds-aichat-markdown-text",elementClass:po,react:r});const Eo=r.memo(function(e){const{text:t,shouldRemoveHTMLBeforeMarkdownConversion:n,overrideSanitize:a,streaming:s}=e;let i=function(){const e=(0,E.d4)(e=>e.config.public);return Boolean(e.shouldSanitizeHTML)}();void 0!==a&&(i=a);const o=fr(),c=(0,g.tz)(),l=(0,E.d4)(e=>e.locale),d=(0,E.d4)(e=>e.config.public),{debug:u}=d,{carbonTheme:h}=d.themeConfig,m=h===rt.G90||h===rt.G100,p=(0,r.useMemo)(()=>({table:{filterPlaceholderText:o.table_filterPlaceholder,previousPageText:o.table_previousPage,nextPageText:o.table_nextPage,itemsPerPageText:o.table_itemsPerPage,locale:l,getPaginationSupplementalText:({count:e})=>c.formatMessage({id:"table_paginationSupplementalText"},{pagesCount:e}),getPaginationStatusText:({start:e,end:t,count:n})=>c.formatMessage({id:"table_paginationStatus"},{start:e,end:t,count:n})}}),[o.table_filterPlaceholder,o.table_previousPage,o.table_nextPage,o.table_itemsPerPage,l,c]);return r.createElement(fo,{debug:u,markdown:t,sanitizeHTML:i,streaming:s,localization:p,dark:m,shouldRemoveHTMLBeforeMarkdownConversion:n})},(e,t)=>{const n=e.text===t.text,a=e.shouldRemoveHTMLBeforeMarkdownConversion===t.shouldRemoveHTMLBeforeMarkdownConversion,s=e.overrideSanitize===t.overrideSanitize;if(n&&a&&s)return!0;const i=e.streaming===t.streaming;return n&&a&&s&&i});function _o({availability:e,fallbackText:t}){let n,a,s;return Gr(e?.estimated_wait_time)?Gr(e?.position_in_queue)?s=e?.message?e.message:t:(n="agent_connectingQueue",a={position:e.position_in_queue}):(n="agent_connectingMinutes",a={time:e.estimated_wait_time}),s?r.createElement(Eo,{overrideSanitize:!0,text:s}):r.createElement(g.sA,{id:n,values:(i=a,i.b=ia,i.br=ra,i)});var i}const So=r.memo((0,r.forwardRef)(function(e,t){const{onButtonClick:n}=e,a=fr(),s=ar(),i=(0,E.d4)(e=>e.persistedToBrowserStorage.chatState.humanAgentState),o=(0,E.d4)(e=>e.humanAgentState),{isConnecting:c,availability:l,isScreenSharing:d}=o,u=(0,E.d4)(Wn,E.bN),{responseUserProfile:h}=i,g=(0,r.useRef)();let m,p,_,S,v;return c?(v=r.createElement("div",{className:"WACLoadingBar__ConnectingAnimation"}),m=a.agent_connecting,p=r.createElement(zr,{announceOnce:a.agent_connecting},r.createElement(_o,{availability:l,fallbackText:a.agent_connectWaiting})),S=a.agent_connectButtonCancel):(m=h?.nickname||a.agent_noName,S=a.agent_connectedButtonEndChat,_=r.createElement(qr,{responseUserProfile:h,languagePack:a,width:"32px",height:"32px"})),(0,r.useImperativeHandle)(t,()=>({requestFocus:()=>!!g.current&&(or(g),!0)})),r.createElement("div",{className:f("WACHumanAgentBanner",{"WACHumanAgentBanner--connected":!c})},u.isConnectingOrConnected&&r.createElement("div",{className:"WACHumanAgentBanner__Body"},_,r.createElement("div",{className:"WACHumanAgentBanner__HumanAgentInfo"},r.createElement("div",{className:"WACHumanAgentBanner__HumanAgentLine1"},m),p&&r.createElement("div",{className:"WACHumanAgentBanner__HumanAgentLine2"},p)),r.createElement(C.$nd,{ref:g,className:"WACHumanAgentBanner__Button WACHumanAgentBanner__CancelButton",onClick:n,size:"sm"},S)),d&&r.createElement(C.$nd,{className:"WACHumanAgentBanner__Button WACHumanAgentBanner__StopSharingButton",kind:"danger",size:"sm",renderIcon:N.A,onClick:()=>{s.humanAgentService.screenShareStop()}},a.agent_sharingStopSharingButton),v)}));function vo({onButtonClick:e,bannerRef:t}){const n=(0,E.d4)(e=>e.humanAgentState);return(0,E.d4)(Wn,E.bN).isConnectingOrConnected||n.isScreenSharing?r.createElement(So,{ref:t,onButtonClick:e}):null}const yo=r.memo(function(e){const t=(0,r.useContext)(tr);return(0,r.useEffect)(()=>{t(e.message)},[t,e.message]),r.createElement("div",null)});var Co=r.memo(function({slotName:e,id:t,className:n}){return r.createElement("div",{className:n,id:t,"data-floating-menu-container":!0},r.createElement("slot",{name:e}))});var bo=r.memo(function({children:e}){const{namespace:t}=ar();return r.createElement(r.Fragment,null,r.createElement(Co,{slotName:Ke.WELCOME_NODE_BEFORE_ELEMENT,id:`welcomeNodeBeforeElement${t.suffix}`}),e)});function Ao({notifications:e,serviceManager:t}){const n=fr();return e.length?r.createElement("div",{className:"WACNotifications"},e.map(e=>{const a=e.notification,s=()=>{t.store.dispatch(Hn.removeNotifications({notificationID:e.id}))};let i,o;return a.actionButtonLabel&&a.onActionButtonClick&&(i=()=>{a.onActionButtonClick(),s()},o=a.actionButtonLabel),r.createElement("div",{className:"WACNotifications__Notification",key:e.id},r.createElement(C.kZS,{"aria-label":n.notifications_toastClose,actionButtonLabel:o,onActionButtonClick:i,kind:a.kind,onClose:()=>{s(),a.onCloseButtonClick?.()},subtitle:a.message,title:a.title,hasFocus:!1}))})):null}const Mo=r.memo(function({theme:e}){const t=Tt(),n=`a-${t}`,a=`b-${t}`,s=`c-${t}`,i=`d-${t}`,o=`e-${t}`;return e===rt.WHITE||e===rt.G10?r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"cds--watsonx-avatar","aria-hidden":"true"},r.createElement("defs",null,r.createElement("linearGradient",{id:n,x1:"1186.526",y1:"2863.168",x2:"1199.825",y2:"2845.109",gradientTransform:"matrix(.8312 .55596 -.27409 .40979 -198.894 -1827.398)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:".3"}),r.createElement("stop",{offset:"1",stopOpacity:"0"})),r.createElement("linearGradient",{id:a,x1:"1189.388",y1:"2911.794",x2:"1200.478",y2:"2896.735",gradientTransform:"rotate(146.223 380.87 -882.286) scale(1 -.493)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:".3"}),r.createElement("stop",{offset:".9",stopOpacity:"0"})),r.createElement("linearGradient",{id:s,x1:"-4995.033",y1:"-20162.835",x2:"-4981.733",y2:"-20180.895",gradientTransform:"rotate(-146.223 -971.422 -5714.55) scale(1 .493)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:".32"}),r.createElement("stop",{offset:".354",stopOpacity:".798"}),r.createElement("stop",{offset:".7",stopOpacity:"0"})),r.createElement("linearGradient",{id:i,x1:"0",y1:"32",x2:"32",y2:"0",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:".1",stopColor:"#a56eff"}),r.createElement("stop",{offset:".9",stopColor:"#0f62fe"})),r.createElement("mask",{id:o,x:"0",y:"0",width:"32",height:"32",maskUnits:"userSpaceOnUse"},r.createElement("path",{d:"M16 1A14.915 14.915 0 0 0 5.502 5.286l1.4 1.429A12.922 12.922 0 0 1 16 3.001c.977 0 1.929.109 2.845.315-3.402.921-5.916 4.026-5.916 7.715 0 .782.118 1.537.328 2.252a7.978 7.978 0 0 0-2.188-.312c-3.704 0-6.819 2.534-7.726 5.957a12.954 12.954 0 0 1-.345-2.927c0-2.117.492-4.134 1.462-5.996l-1.773-.924A15.037 15.037 0 0 0 .999 16c0 8.271 6.729 15 15 15 3.949 0 7.678-1.522 10.498-4.286l-1.4-1.428A12.926 12.926 0 0 1 15.999 29c-3.648 0-6.945-1.516-9.309-3.945a5.959 5.959 0 0 1-1.621-4.086c0-3.309 2.691-6 6-6a6.006 6.006 0 0 1 5.897 7.107l1.967.367a7.971 7.971 0 0 0-.192-3.726 7.976 7.976 0 0 0 2.187.312c3.71 0 6.829-2.542 7.73-5.974.22.947.34 1.931.34 2.944 0 2.117-.492 4.134-1.462 5.995l1.773.924a15.034 15.034 0 0 0 1.688-6.919C31 7.729 24.272 1 16 1zm4.93 16.03c-3.309 0-6-2.692-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z",strokeWidth:"0",fill:"#ffffff"}),r.createElement("path",{strokeWidth:"0",fill:`url(#${n})`,d:"M8 9 0 0h16l2.305 3.305L8 9z"}),r.createElement("path",{strokeWidth:"0",fill:`url(#${a})`,d:"m12 31 4.386-9L6 21 2 31h10z"}),r.createElement("path",{strokeWidth:"0",fill:`url(#${s})`,d:"m24 23 8 9H16l-2.305-3.305L24 23z"}),r.createElement("path",{strokeWidth:"0",d:"M16 31h-4.283L15 22h2l-1 9z"}))),r.createElement("g",{mask:`url(#${o})`},r.createElement("path",{fill:`url(#${i})`,strokeWidth:"0",d:"M0 0h32v32H0z"})),r.createElement("circle",{cx:"6",cy:"6",r:"2",fill:"#001d6c",strokeWidth:"0"}),r.createElement("circle",{cx:"26",cy:"26",r:"2",fill:"#001d6c",strokeWidth:"0"}),r.createElement("path",{d:"M16 31c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm0-8c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3z",fill:"#001d6c",strokeWidth:"0"})):r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"cds--watsonx-avatar","aria-hidden":"true"},r.createElement("defs",null,r.createElement("linearGradient",{id:n,x1:"1196.653",y1:"2930.892",x2:"1209.953",y2:"2912.832",gradientTransform:"matrix(.8312 .55596 -.27409 .40979 -188.767 -1860.755)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:".3"}),r.createElement("stop",{offset:"1",stopOpacity:"0"})),r.createElement("linearGradient",{id:a,x1:"1299.261",y1:"2844.072",x2:"1310.351",y2:"2829.012",gradientTransform:"rotate(146.223 440.869 -882.286) scale(1 -.493)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:".3"}),r.createElement("stop",{offset:".9",stopOpacity:"0"})),r.createElement("linearGradient",{id:s,x1:"-4885.16",y1:"-20230.559",x2:"-4871.86",y2:"-20248.618",gradientTransform:"rotate(-146.223 -911.421 -5714.55) scale(1 .493)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:".32"}),r.createElement("stop",{offset:".354",stopOpacity:".798"}),r.createElement("stop",{offset:".7",stopOpacity:"0"})),r.createElement("linearGradient",{id:i,x1:"0",y1:"32",x2:"32",y2:"0",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:".1",stopColor:"#be95ff"}),r.createElement("stop",{offset:".9",stopColor:"#4589ff"})),r.createElement("mask",{id:o,x:"0",y:"0",width:"32",height:"32",maskUnits:"userSpaceOnUse"},r.createElement("path",{d:"M16 1A14.915 14.915 0 0 0 5.502 5.286l1.4 1.429A12.922 12.922 0 0 1 16 3.001c.977 0 1.929.109 2.845.315-3.402.921-5.916 4.026-5.916 7.715 0 .782.118 1.537.328 2.252a7.978 7.978 0 0 0-2.188-.312c-3.704 0-6.819 2.534-7.726 5.957a12.954 12.954 0 0 1-.345-2.927c0-2.117.492-4.134 1.462-5.996l-1.773-.924A15.037 15.037 0 0 0 .999 16c0 8.271 6.729 15 15 15 3.949 0 7.678-1.522 10.498-4.286l-1.4-1.428A12.926 12.926 0 0 1 15.999 29c-3.648 0-6.945-1.516-9.309-3.945a5.959 5.959 0 0 1-1.621-4.086c0-3.309 2.691-6 6-6a6.006 6.006 0 0 1 5.897 7.107l1.967.367a7.971 7.971 0 0 0-.192-3.726 7.976 7.976 0 0 0 2.187.312c3.71 0 6.829-2.542 7.73-5.974.22.947.34 1.931.34 2.944 0 2.117-.492 4.134-1.462 5.995l1.773.924a15.034 15.034 0 0 0 1.688-6.919c0-8.271-6.729-15-15-15zm4.93 16.03c-3.309 0-6-2.692-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z",fill:"#fff",strokeWidth:"0"}),r.createElement("path",{fill:`url(#${n})`,strokeWidth:"0",d:"M8 9 0 0h16l2.305 3.305L8 9z"}),r.createElement("path",{fill:`url(#${a})`,strokeWidth:"0",d:"m12 31 4.386-9L6 21 2 31h10z"}),r.createElement("path",{fill:`url(#${s})`,strokeWidth:"0",d:"m24 23 8 9H16l-2.305-3.305L24 23z"}),r.createElement("path",{strokeWidth:"0",d:"M16 31h-4.283L15 22h2l-1 9z"}))),r.createElement("g",{mask:`url(#${o})`},r.createElement("path",{fill:`url(#${i})`,strokeWidth:"0",d:"M0 0h32v32H0z"})),r.createElement("circle",{cx:"6",cy:"6",r:"2",fill:"#f4f4f4",strokeWidth:"0"}),r.createElement("circle",{cx:"26",cy:"26",r:"2",fill:"#f4f4f4",strokeWidth:"0"}),r.createElement("path",{d:"M16 31c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm0-8c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3z",fill:"#f4f4f4",strokeWidth:"0"}))});function Io(e){return r.createElement(q.A,{className:f("WACErrorIcon",e.className)})}function To({text:e}){const t=fr();return r.createElement("div",{className:"WAC__inlineError"},r.createElement("div",{className:"WAC__inlineError--iconHolder"},r.createElement(Io,{className:"WAC__inlineError--icon"})),r.createElement("div",{className:"WAC__inlineError--text"},r.createElement(Eo,{shouldRemoveHTMLBeforeMarkdownConversion:!0,text:e||t.errors_generalContent})))}function wo(e){return r.createElement("div",{className:"WACIconHolder"},e.icon)}function No(e){const{url:t,alt:n,fallback:a}=e,[s,i]=(0,r.useState)(!1);let o;return(0,r.useEffect)(()=>{i(!1)},[t]),o=!s&&t?r.createElement("img",{src:t,alt:n,onError:()=>i(!0)}):a,r.createElement("div",{className:"WACImageWithFallback"},o)}class Ro extends T.WF{}Ro.styles=T.AH`
    ${(0,T.iz)(".cds--aichat-feedback-buttons{\n  display:flex;\n  margin-block-start:0.5rem;\n}")}
  `,It([(0,w.MZ)({type:Boolean,attribute:"is-positive-open",reflect:!0})],Ro.prototype,"isPositiveOpen",void 0),It([(0,w.MZ)({type:Boolean,attribute:"is-negative-open",reflect:!0})],Ro.prototype,"isNegativeOpen",void 0),It([(0,w.MZ)({type:Boolean,attribute:"is-positive-selected",reflect:!0})],Ro.prototype,"isPositiveSelected",void 0),It([(0,w.MZ)({type:Boolean,attribute:"has-positive-details",reflect:!0})],Ro.prototype,"hasPositiveDetails",void 0),It([(0,w.MZ)({type:Boolean,attribute:"has-negative-details",reflect:!0})],Ro.prototype,"hasNegativeDetails",void 0),It([(0,w.MZ)({type:Boolean,attribute:"is-negative-selected",reflect:!0})],Ro.prototype,"isNegativeSelected",void 0),It([(0,w.MZ)({type:Boolean,attribute:"is-positive-disabled",reflect:!0})],Ro.prototype,"isPositiveDisabled",void 0),It([(0,w.MZ)({type:Boolean,attribute:"is-negative-disabled",reflect:!0})],Ro.prototype,"isNegativeDisabled",void 0),It([(0,w.MZ)({type:String,attribute:"positive-label",reflect:!0})],Ro.prototype,"positiveLabel",void 0),It([(0,w.MZ)({type:String,attribute:"negative-label",reflect:!0})],Ro.prototype,"negativeLabel",void 0),It([(0,w.MZ)({type:String,attribute:"panel-id",reflect:!0})],Ro.prototype,"panelID",void 0),It([(0,w.MZ)({type:Object,attribute:"on-click"})],Ro.prototype,"onClick",void 0);const ko=(0,B.dI)(V.A),xo=(0,B.dI)(j.A),Oo=(0,B.dI)(Z.A),Po=(0,B.dI)(Y.A);const Do="cds-aichat-feedback-buttons";let Lo=class extends Ro{render(){return function(e){const{isPositiveOpen:t,isNegativeOpen:n,isPositiveSelected:a,isNegativeSelected:s,hasPositiveDetails:i,hasNegativeDetails:r,isPositiveDisabled:o,isNegativeDisabled:c,positiveLabel:l,negativeLabel:d,panelID:u,onClick:h}=e;return T.qy`<div class="${Lr}-feedback-buttons">
    <cds-custom-icon-button
      class="${Lr}-feedback-buttons-positive"
      size="sm"
      align="top-left"
      kind="ghost"
      role="button"
      disabled="${o||T.s6}"
      aria-expanded="${o||!i?T.s6:t}"
      aria-pressed="${a||T.s6}"
      aria-controls="${u}-feedback-positive"
      @click="${()=>h(!0)}"
    >
      <span slot="icon"
        >${(0,W.T)(a?Po:Oo)}</span
      >
      <span slot="tooltip-content"
        >${l||Mt.feedback_positiveLabel}</span
      >
    </cds-custom-icon-button>
    <cds-custom-icon-button
      class="${Lr}-feedback-buttons-negative"
      size="sm"
      align="top-left"
      kind="ghost"
      role="button"
      disabled="${c||T.s6}"
      aria-expanded="${c||!r?T.s6:n}"
      aria-pressed="${s||T.s6}"
      aria-controls="${u}-feedback-positive"
      @click="${()=>h(!1)}"
    >
      <span slot="icon"
        >${(0,W.T)(s?xo:ko)}</span
      >
      <span slot="tooltip-content"
        >${d||Mt.feedback_negativeLabel}</span
      >
    </cds-custom-icon-button>
  </div>`}(this)}};Lo=It([Dr(Do)],Lo);var Bo=Lo;const Ho=(0,I.a)({tagName:Do,elementClass:Bo,react:r});class Wo extends T.WF{constructor(){super(...arguments),this.selectedTags=new Set}updated(e){e.has("initialSelectedTags")&&this._setInitialValues(this.initialSelectedTags)}_setInitialValues(e){e&&(this.selectedTags=new Set(this.initialSelectedTags))}_handleTagClick(e){const t=e.target.getAttribute("data-content");this.selectedTags.has(t)?this.selectedTags.delete(t):this.selectedTags.add(t),this.onTagsChanged?.(Array.from(this.selectedTags)),this.requestUpdate()}}Wo.styles=T.AH`
    ${(0,T.iz)(".cds--aichat-tag-list-container{\n  display:flex;\n  flex-wrap:wrap;\n  align-items:center;\n  padding:0;\n  margin:0;\n  gap:0.5rem;\n  list-style:none;\n}\n\n.cds--aichat-tag-list-item{\n  box-sizing:border-box;\n  padding:0.125rem;\n  animation:fade-in 600ms forwards;\n  font-size:var(--cds-chat-BASE-font-size-small);\n  opacity:0;\n}\n\n@keyframes fade-in{\n  from{\n    opacity:0;\n  }\n  to{\n    opacity:1;\n  }\n}")}
  `,It([(0,w.MZ)({type:Array,attribute:"tags"})],Wo.prototype,"tags",void 0),It([(0,w.MZ)({type:Array,attribute:"initial-selected-tags"})],Wo.prototype,"initialSelectedTags",void 0),It([(0,w.MZ)({type:Boolean,attribute:"multi-select"})],Wo.prototype,"multiSelect",void 0),It([(0,w.MZ)({type:Object,attribute:"on-tags-changed"})],Wo.prototype,"onTagsChanged",void 0),It([(0,w.wk)()],Wo.prototype,"selectedTags",void 0);const Uo=`${Br}-tag-list`;let $o=class extends Wo{render(){return function(e){const{selectedTags:t,tags:n,_handleTagClick:a}=e;return T.qy`<div class="${Lr}-tag-list">
    ${T.qy`<ul class="${Lr}-tag-list-container">
      ${n.map(e=>T.qy`<li class="${Lr}-tag-list-item}">
            <cds-custom-chat-button
              class="${Lr}-tag-list-button"
              kind="primary"
              size="sm"
              type="button"
              is-quick-action
              role="option"
              aria-pressed="${t.has(e)}"
              ?is-selected="${t.has(e)}"
              data-content="${e}"
              @click="${a}"
            >
              ${e}
            </cds-custom-chat-button>
          </li>`)}
    </div>`}
  </div>`}(this)}};$o=It([Dr(Uo)],$o);const Fo="cds-aichat-rounded-button",zo=`\n  .cds-custom--btn {\n    border-start-start-radius: var(--${Fo}-top-left);\n    border-start-end-radius: var(--${Fo}-top-right);\n    border-end-start-radius: var(--${Fo}-bottom-left);\n    border-end-end-radius: var(--${Fo}-bottom-right);\n    width: var(--${Fo}-width);\n    max-width: var(--${Fo}-max-width);\n  }`;let qo=class extends K.Ay{};qo.styles=T.AH`
    ${K.Ay.styles}
    ${(0,T.iz)(zo)}
  `,qo=It([Dr(Fo)],qo);class Go extends T.WF{constructor(){super(...arguments),this.showTextArea=!0,this.showPrompt=!0,this._handleCategoryChange=e=>{this._selectedCategories=e}}updated(e){e.has("initialValues")&&this._setInitialValues(this.initialValues)}_setInitialValues(e){e&&(this._textInput=e.text,this._initialSelectedCategories=e.selectedCategories)}_handleTextInput(e){this._textInput=e.currentTarget.value}_handleSubmit(){this.onSubmit?.({text:this._textInput,selectedCategories:this._selectedCategories})}_handleCancel(){this.onClose?.()}}Go.styles=T.AH`
    ${(0,T.iz)(".cds--aichat-container{\n  box-sizing:border-box;\n  border:1px solid var(--cds-chat-bubble-border, #e0e0e0);\n  border-radius:var(--cds-chat-BASE-border-radius-med);\n  animation:fade-in 600ms forwards;\n  background-color:var(--cds-chat-shell-background, #ffffff);\n  container-type:inline-size;\n  inline-size:100%;\n  margin-block-start:0.25rem;\n}\n\n.cds--aichat-is-closed{\n  display:none;\n}\n\n.cds--aichat-title-row{\n  display:flex;\n  margin-block-start:0.75rem;\n  margin-inline:1rem 0.5rem;\n}\n\n.cds--aichat-title{\n  flex:1;\n  font-size:var(--cds-chat-BASE-font-size-xlarge);\n  line-height:var(--cds-chat-BASE-line-height-xlarge);\n}\n\n.cds--aichat-close{\n  margin-inline-start:0.5rem;\n}\n\n.cds--aichat-disclaimer,\n.cds--aichat-prompt{\n  color:var(--cds-text-secondary, #525252);\n  font-size:var(--cds-chat-BASE-font-size-small);\n  line-height:var(--cds-chat-BASE-line-height-small);\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-categories{\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-feedback-text{\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-buttons{\n  display:flex;\n  inline-size:100%;\n  margin-block-start:1rem;\n}\n\n.cds--aichat-submit{\n  flex:1;\n  --cds-aichat-rounded-button-bottom-right:var(\n    --cds-chat-BASE-border-radius-med\n  );\n  --cds-aichat-rounded-button-width:100%;\n  --cds-aichat-rounded-button-max-width:100%;\n}\n\n.cds--aichat-cancel{\n  flex:1;\n  --cds-aichat-rounded-button-bottom-left:var(\n    --cds-chat-BASE-border-radius-med\n  );\n  --cds-aichat-rounded-button-width:100%;\n  --cds-aichat-rounded-button-max-width:100%;\n}\n\n@keyframes fade-in{\n  from{\n    opacity:0;\n  }\n  to{\n    opacity:1;\n  }\n}")}
  `,It([(0,w.MZ)({type:String,attribute:"class",reflect:!0})],Go.prototype,"class",void 0),It([(0,w.MZ)({type:String,reflect:!0})],Go.prototype,"id",void 0),It([(0,w.MZ)({type:Boolean,attribute:"is-open",reflect:!0})],Go.prototype,"isOpen",void 0),It([(0,w.MZ)({type:Boolean,attribute:"is-readonly",reflect:!0})],Go.prototype,"isReadonly",void 0),It([(0,w.MZ)({type:Object,attribute:"on-close"})],Go.prototype,"onClose",void 0),It([(0,w.MZ)({type:Object,attribute:"on-submit"})],Go.prototype,"onSubmit",void 0),It([(0,w.MZ)({type:Object,attribute:"initial-values",reflect:!0})],Go.prototype,"initialValues",void 0),It([(0,w.MZ)({type:String,attribute:"title",reflect:!0})],Go.prototype,"title",void 0),It([(0,w.MZ)({type:String,attribute:"prompt",reflect:!0})],Go.prototype,"prompt",void 0),It([(0,w.MZ)({type:Object,attribute:"categories",reflect:!0})],Go.prototype,"categories",void 0),It([(0,w.MZ)({type:String,attribute:"disclaimer",reflect:!0})],Go.prototype,"disclaimer",void 0),It([(0,w.MZ)({type:String,attribute:"text-area-placeholder",reflect:!0})],Go.prototype,"placeholder",void 0),It([(0,w.MZ)({type:String,attribute:"cancel-label",reflect:!0})],Go.prototype,"cancelLabel",void 0),It([(0,w.MZ)({type:String,attribute:"submit-label",reflect:!0})],Go.prototype,"submitLabel",void 0),It([(0,w.MZ)({type:Boolean,attribute:"show-text-area",reflect:!0})],Go.prototype,"showTextArea",void 0),It([(0,w.MZ)({type:Boolean,attribute:"show-prompt",reflect:!0})],Go.prototype,"showPrompt",void 0),It([(0,w.wk)()],Go.prototype,"_textInput",void 0),It([(0,w.wk)()],Go.prototype,"_initialSelectedCategories",void 0),It([(0,w.wk)()],Go.prototype,"_selectedCategories",void 0);const Vo="cds-aichat-feedback";let jo=class extends Go{render(){return function(e){const{_handleCancel:t,_handleSubmit:n,_handleTextInput:a,_initialSelectedCategories:s,_textInput:i,_handleCategoryChange:r,id:o,isReadonly:c,isOpen:l,title:d,prompt:u,placeholder:h,categories:g,disclaimer:m,showTextArea:p,showPrompt:E,submitLabel:_,cancelLabel:S}=e;return T.qy`<div
    class="${f(`${Lr}-container`,{[`${Lr}-is-closed`]:!l})}"
  >
    <div class="${Lr}-title-row">
      <div class="${Lr}-title">
        ${d||Mt.feedback_defaultTitle}
      </div>
    </div>
    ${E?T.qy`<div class="${Lr}-prompt">
          ${u||Mt.feedback_defaultPrompt}
        </div>`:""}
    ${g?.length?T.qy`<div class="${Lr}-categories">
          <cds-aichat-tag-list
            .tags=${g}
            .initialSelectedTags=${s}
            .onTagsChanged=${r}
          >
          </cds-aichat-tag-list>
        </div>`:""}
    ${p?T.qy`<div class="${Lr}-feedback-text">
          <cds-custom-layer level="1">
            <cds-custom-textarea
              id="${o}-text-area"
              value="${i}"
              class="${Lr}-feedback-text-area"
              ?disabled="${c}"
              placeholder="${h||Mt.feedback_defaultPlaceholder}"
              rows="3"
              max-count="${1e3}"
              @input=${a}
            ></cds-custom-textarea>
          </cds-custom-layer>
        </div>`:""}
    ${m?T.qy`<div class="${Lr}-disclaimer">
          <cds-aichat-markdown-text
            markdown="${m}"
          ></cds-aichat-markdown-text>
        </div>`:""}
    <div class="${Lr}-buttons">
      <cds-aichat-rounded-button
        class="${Lr}-cancel"
        disabled=${c||T.s6}
        size="lg"
        kind="secondary"
        @click=${t}
      >
        ${S||Mt.feedback_cancelLabel}
      </cds-aichat-rounded-button>
      <cds-aichat-rounded-button
        class="${Lr}-submit"
        disabled=${c||T.s6}
        size="lg"
        @click=${n}
      >
        ${_||Mt.feedback_submitLabel}
      </cds-aichat-rounded-button>
    </div>
  </div>`}(this)}};jo=It([Dr(Vo)],jo);var Zo=jo;const Yo=(0,I.a)({tagName:Vo,elementClass:Zo,react:r});function Ko(){const{messages_responseStopped:e}=fr();return r.createElement("div",{className:"WACResponseStopped"},e)}const Xo=r.createContext(null);class Qo extends r.Component{constructor(){super(...arguments),this.state={attachedToHost:null},this.modalElement=document.createElement("div")}componentDidMount(){this.attachIfNeeded()}componentDidUpdate(){this.attachIfNeeded()}componentWillUnmount(){this.state.attachedToHost&&this.state.attachedToHost.removeChild(this.modalElement)}attachIfNeeded(){const e=this.context;e&&!this.state.attachedToHost&&(this.setState({attachedToHost:e}),e.appendChild(this.modalElement))}render(){return this.state.attachedToHost?ee.createPortal(this.props.children,this.modalElement):null}}Qo.contextType=Xo;class Jo extends r.Component{constructor(){super(...arguments),this.onYesClick=()=>{this.props.onConfirm()},this.onNoClick=()=>{this.props.onCancel()},this.onKeyDown=e=>{"Escape"===e.key&&this.props.onCancel()}}render(){const{title:e,message:t,cancelButtonLabel:n,confirmButtonLabel:a,modalAnnounceMessage:s,serviceManager:i}=this.props;return r.createElement(Qo,null,r.createElement(A,null,r.createElement("div",{className:"WACConfirmModal",role:"dialog","aria-labelledby":`WACConfirmModal__title${i.namespace.suffix}`,"aria-describedby":`WACConfirmModal__message${i.namespace.suffix}`},r.createElement("div",{className:"WACConfirmModal__container"},r.createElement(yo,{message:s}),r.createElement("div",{className:"WACConfirmModal__title",id:`WACConfirmModal__title${i.namespace.suffix}`},e),r.createElement("div",{className:"WACConfirmModal__message",id:`WACConfirmModal__message${i.namespace.suffix}`},t),r.createElement("div",{className:"WACConfirmModal__buttonContainer"},r.createElement(C.$nd,{className:"WACConfirmModal__NoButton",kind:"secondary",onClick:this.onNoClick,onKeyDown:this.onKeyDown,size:"md"},n),r.createElement(C.$nd,{className:"WACConfirmModal__YesButton",onClick:this.onYesClick,onKeyDown:this.onKeyDown,size:"md"},a))))))}}function ec(e){const{onConfirm:t,onCancel:n,title:a,message:s}=e,i=fr(),o=ar(),{isConnected:c,isSuspended:l}=(0,E.d4)(e=>e.persistedToBrowserStorage.chatState.humanAgentState),d=a||(c?i.agent_endChat:i.agent_confirmCancelRequestTitle),u=s||(c?i.agent_confirmEndChat:i.agent_confirmCancelRequestMessage),h=i.agent_confirmEndChatNo;let g;return g=l?i.agent_confirmEndSuspendedYes:c?i.agent_confirmEndChatYes:i.agent_confirmCancelRequestYes,r.createElement(Jo,{title:d,message:u,onConfirm:t,onCancel:n,cancelButtonLabel:h,confirmButtonLabel:g,modalAnnounceMessage:u,serviceManager:o})}function tc(e){const{languagePack:t,localMessage:n,originalMessage:a,disableUserInputs:s,serviceManager:i,humanAgentState:o,requestFocus:c,agentDisplayState:l,persistedHumanAgentState:d}=e,{activeLocalMessageID:u,availability:h,isConnecting:g}=o,{isSuspended:m}=d,[p,f]=(0,r.useState)(!1);function E(){m&&!p?f(!0):(f(!1),i.humanAgentService.startChat(n,a),setTimeout(c))}!m&&p&&f(!1);if(a.ui_state_internal?.agent_availability===lt.OFFLINE){const e=n.item.agent_unavailable?.message||t.default_agent_unavailableMessage;return r.createElement("div",null,e)}const _=n.item.agent_available?.message||t.default_agent_availableMessage;let S,v,y=s||l.isConnectingOrConnected,b=_;return n.ui_state.id===u?(y=!0,g?(S=X.A,v=t.agent_cardButtonChatRequested,b=r.createElement(_o,{availability:h,fallbackText:t.agent_connectWaiting})):(S=z.A,v=t.agent_cardButtonConnected,b=t.agent_cardMessageConnected)):s?n.ui_state.wasHumanAgentChatEnded?(S=J.A,v=t.agent_cardButtonChatEnded,b=t.agent_cardMessageChatEnded):(S=z.A,v=t.agent_startChat):(S=Q.A,v=t.agent_startChat),r.createElement(C.FAs,{className:"WACConnectToHumanAgent"},r.createElement("div",{className:"WACConnectToHumanAgent__Title"},r.createElement("span",null,t.agent_chatTitle)),r.createElement("div",{className:"WACConnectToHumanAgent__Text"},b),r.createElement(C.$nd,{className:"WACConnectToHumanAgent__RequestButton",size:"md",disabled:y,onClick:E,renderIcon:S},v),!y&&m&&r.createElement("div",{className:"WACConnectToHumanAgent__SuspendedWarning"},t.agent_suspendedWarning),p&&r.createElement(ec,{title:t.agent_confirmSuspendedEndChatTitle,message:t.agent_confirmSuspendedEndChatMessage,onConfirm:E,onCancel:()=>f(!1)}))}function nc(e){const{languagePack:t,localMessage:n,originalMessage:a,config:s,serviceManager:i,disableUserInputs:o,humanAgentState:c,requestFocus:l,agentDisplayState:d,persistedHumanAgentState:u}=e,h=o||!Oa(s);return r.createElement("div",null,r.createElement(tc,{localMessage:n,originalMessage:a,languagePack:t,serviceManager:i,disableUserInputs:h,humanAgentState:c,persistedHumanAgentState:u,agentDisplayState:d,requestFocus:l}))}function ac(e){return(0,E.d4)(e=>e.theme.theme)===ot.CARBON_AI?r.createElement(C.Ty7,{...e}):r.createElement(C.rrI,{...e})}function sc(e){return(0,E.d4)(e=>e.theme.theme)===ot.CARBON_AI?r.createElement(C.FKV,{...e}):r.createElement(C.PuA,{...e})}function ic({title:e,description:t,displayURL:n,urlHostName:a,hideTitle:s}){return r.createElement("div",{className:"WACTextHolderTile"},r.createElement("div",{className:f("WACTextHolderTile__Wrapper","WACWidget__textEllipsis",{WACTextHolderTile__IconMargin:!n})},!s&&e&&r.createElement("div",{className:"WACTextHolderTile__Title"},e),t&&r.createElement("div",{className:f("WACTextHolderTile__Description",{WACTextHolderTile__DescriptionMargin:e})},t),n&&r.createElement(r.Fragment,null,r.createElement(lr,null,a),r.createElement("div",{className:f("WACTextHolderTile__Url","WACWidget__textEllipsis",{WACTextHolderTile__UrlMargin:e||t}),"aria-hidden":!0},n))))}const rc=r.lazy(()=>Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.t.bind(n,90410,19)).then(e=>{let t=e.default??e;return t&&"object"==typeof t&&"default"in t&&(t=t.default),{default:t}}));const oc=r.memo(function({type:e,source:t,title:n,description:a,ariaLabel:s,isMixcloud:i,baseHeight:o,doAutoScroll:c,playing:l,onPlay:d,onPause:u,hideIconAndTitle:h,needsAnnouncement:g}){const[m,p]=(0,r.useState)(!1),[E,_]=(0,r.useState)(!1),{errors_audioSource:S,errors_videoSource:v}=fr(),y=Ir(),b=(0,r.useRef)(),A=(0,r.useRef)(null),M=(0,r.useRef)(null),I=i?"120px":ta(o),T=e===mt.AUDIO,w=T?S:v,N=_r(t),R=(0,r.useRef)(g),k=(0,r.useCallback)(()=>{_(!0),p(!0)},[]);(0,r.useEffect)(()=>{t!==N&&m&&p(!1)},[N,m,t]),(0,r.useLayoutEffect)(()=>{A&&A.current.style.setProperty("padding-block-start",I),M&&M.current.style.setProperty("padding-block-start",I)},[I]),(0,r.useEffect)(()=>{let e=null;return m||(e=setTimeout(k,Gn)),()=>{clearTimeout(e)}},[m,k]),(0,r.useEffect)(()=>{m&&R.current&&y(b.current)},[y,m]);const x=(0,r.useCallback)(()=>{m||(p(!0),c?.())},[c,m]);return r.createElement(r.Fragment,null,!m&&r.createElement(C.FAs,{className:"WACMediaPlayer__Skeleton"},r.createElement("div",{className:"WACMediaPlayer__SkeletonContainer",ref:M},r.createElement(sc,{className:"WACMediaPlayer__SkeletonPlayer"})),(n||a)&&r.createElement("div",{className:"WACMediaPlayer__SkeletonTextContainer"},r.createElement(ac,{paragraph:!0,lineCount:2}))),r.createElement("div",{className:"WACMediaPlayer__Root",ref:b},E&&r.createElement(To,{text:w}),!E&&r.createElement(C.FAs,{className:f("WACMediaPlayer",{WAC__hidden:!m})},r.createElement("div",{className:"WACMediaPlayer__Wrapper",ref:A},r.createElement("div",{className:f("WACMediaPlayer__Background",{"WACMediaPlayer__Background--audio":T})},T&&r.createElement(te.A,{size:32,className:"WACMediaPlayer__MusicIcon"})),r.createElement(r.Suspense,{fallback:r.createElement("div",null)},r.createElement(rc,{className:"WACMediaPlayer__Player",url:t,controls:!0,width:"100%",height:"100%",config:{file:{forceVideo:!0,attributes:{controlsList:"nodownload","aria-label":s||a||n}}},playsinline:!0,playing:l,onPlay:d,onPause:u,onReady:x,onError:k,pip:!0}))),(n||a)&&r.createElement(ic,{title:n,description:a,hideTitle:h}))))});const cc=r.memo(function({source:e,...t}){const n=e?.startsWith("https://www.mixcloud.com");return r.createElement(oc,{type:mt.AUDIO,source:e,isMixcloud:n,...t})});function lc({source:e,title:t,description:n,altText:a,displayURL:s,preventInlineError:i,onImageLoad:o,useAITheme:c,isLoaded:l,isError:d,setIsLoaded:u,setIsError:h,className:g,inline:m}){const[p,E]=(0,r.useState)(!1),_=a||t||n||"",S=Boolean(t||n||s),v=(0,r.useCallback)(()=>{i&&S?E(!0):h(!0)},[i,S,h]);return(0,r.useEffect)(()=>{let e=null;return l||(e=setTimeout(v,Gn)),()=>{clearTimeout(e)}},[l,v]),r.createElement(r.Fragment,null,!l&&!p&&!m&&e&&(c?r.createElement(C.HOw,{className:"WACImage__Skeleton"}):r.createElement(C.PuA,{className:"WACImage__Skeleton"})),!d&&!p&&e&&r.createElement("img",{className:f("WACImage__Image",{[g]:g,"WACImage__Image--loaded":l}),src:e,alt:_,onLoad:()=>{o?.(),u(!0)},onError:v}))}const dc=r.memo(function(e){const{imageError:t,title:n,description:a,displayURL:s,hideIconAndTitle:i,needsAnnouncement:o,renderIcon:c,inline:l}=e,d=Ir(),[u,h]=(0,r.useState)(!1),[g,m]=(0,r.useState)(!1),p=(0,r.useRef)(),E=(0,r.useRef)(o),_=Boolean(n||a||s),S=c;return(0,r.useEffect)(()=>{u&&E.current&&d(p.current)},[d,u]),g?r.createElement(To,{text:t}):l?r.createElement(lc,{...e,setIsError:m,setIsLoaded:h,isError:g,isLoaded:u}):r.createElement(C.FAs,{ref:p,className:f("WACImage",{WACImage__TextAndIcon:_&&Boolean(c),WACImage__IconOnly:!i&&!n&&!a&&Boolean(c)})},r.createElement("div",{className:"WACImage__ImageWrapper"},r.createElement(lc,{...e,setIsError:m,setIsLoaded:h,isError:g,isLoaded:u})),_&&r.createElement(ic,{title:n,description:a,displayURL:s,urlHostName:s&&Ue(s),hideTitle:i}),Boolean(S)&&r.createElement(S,{className:f("WACImage__Icon","WACDirectionHasReversibleSVG",{"WACImage__Icon--link":s})}))});function uc({buttonAltText:e,isLink:t,target:n,disabled:a,onClick:s,...i}){return t?r.createElement("a",{className:"WACClickableImage",href:i.displayURL,rel:"noopener noreferrer",target:n,onClick:s},r.createElement(dc,{...i}),e&&r.createElement(lr,null,e)):r.createElement("button",{className:"WACClickableImage",type:"button",onClick:s,disabled:a},r.createElement(dc,{...i}),e&&r.createElement(lr,null,e))}function hc({className:e,label:t,kind:n,url:a,target:s="_blank",disabled:i,renderIcon:o,imageURL:c,altText:l,onClick:d}){const{errors_imageSource:u}=fr(),h=(0,E.d4)(e=>e.theme.theme),g=t||a,m=a?s:void 0;return c?r.createElement(uc,{imageError:u,source:c,target:s,title:t,displayURL:a,altText:l,renderIcon:o,onClick:d,disabled:i,isLink:Boolean(a),useAITheme:h===ot.CARBON_AI}):r.createElement(C.$nd,{className:f("WACButtonItem",e),as:a?"a":void 0,kind:gc(n),href:a,target:m,rel:a?"noopener noreferrer":void 0,disabled:i,renderIcon:o,onClick:d},g)}function gc(e){switch(e){case yt.LINK:case yt.TERTIARY:return"ghost";case yt.DEFAULT:return"primary";default:return e}}function mc({localMessageItem:e,fullMessage:t}){const n=ar(),a=e.item,{ui_state:s}=e,{image_url:i,alt_text:o,label:c,kind:l,value:d}=a,u=Boolean(d&&s.optionSelected),h=(0,r.useCallback)(async()=>{await n.fire({type:Qe.MESSAGE_ITEM_CUSTOM,messageItem:a,fullMessage:t})},[a,n,t]);return r.createElement(hc,{imageURL:i,altText:o,label:c,kind:l,disabled:u,renderIcon:i&&ne.A||void 0,onClick:h})}function pc({localMessageItem:e,requestFocus:t,isMessageForInput:n}){const a=ar(),s=e.item,{ui_state:i,fullMessageID:o}=e,{image_url:c,alt_text:l,label:u,kind:h}=s,g=!n||Boolean(i.optionSelected),m=(0,r.useCallback)(()=>{if(Boolean(s.value?.input?.text||u)){const e=function(e,t){const n={id:Tt(At.MESSAGE),thread_id:ma,input:null};return e.value?.input?.text?n.input=(0,d.A)(e.value.input):n.input={text:e.label},n.history={related_message_id:t},n}(s,o);t(),a.store.dispatch(Hn.messageSetOptionSelected(i.id,e)),a.actions.sendWithCatch(e,et.POST_BACK_BUTTON)}else s.label},[s,u,o,t,a.store,a.actions,i.id]);return r.createElement(hc,{imageURL:c,altText:l,label:u,kind:h,onClick:m,renderIcon:c&&ae.A||void 0,disabled:g})}function fc({localMessageItem:e,isMessageForInput:t}){const n=ar(),{image_url:a,alt_text:s,label:i,kind:o}=e.item,c=(0,r.useCallback)(async()=>{n.store.dispatch(Hn.setResponsePanelIsOpen(!0)),n.store.dispatch(Hn.setResponsePanelContent(e,t))},[e,t,n]);return r.createElement(hc,{className:"BaseButtonItemComponent__ShowPanel",imageURL:a,altText:s,label:i,kind:o,renderIcon:a&&se.A||void 0,onClick:c})}function Ec({localMessageItem:e}){const{image_url:t,alt_text:n,url:a,target:s,label:i,kind:o}=e.item;return t||o!==yt.LINK?r.createElement(hc,{imageURL:t,altText:n,label:i,kind:o,url:a,target:s,renderIcon:ie.A}):r.createElement("div",{className:"WACButtonItem"},r.createElement(C.N_E,{className:"WACWidget__breakWord",href:a,target:s,rel:"noopener noreferrer",renderIcon:ie.A},i||a))}function _c(e){switch(e.localMessageItem.item.button_type){case St.URL:return r.createElement(Ec,{localMessageItem:e.localMessageItem});case St.SHOW_PANEL:return r.createElement(fc,{localMessageItem:e.localMessageItem,isMessageForInput:e.isMessageForInput});case St.CUSTOM_EVENT:return r.createElement(mc,{localMessageItem:e.localMessageItem,fullMessage:e.fullMessage});default:return r.createElement(pc,{localMessageItem:e.localMessageItem,requestFocus:e.requestFocus,isMessageForInput:e.isMessageForInput})}}function Sc(e){switch(e){case mt.IMAGE:case mt.IFRAME:case mt.VIDEO:case mt.AUDIO:case mt.USER_DEFINED:return!0;default:return!1}}const vc=r.memo(function(e){const{bodyLocalMessageItemIDs:t}=e.message.ui_state,n=(0,E.d4)(e=>e.allMessageItemsByID),a=t?.map((a,s)=>{const i=n[a],o=Sc(i.item.response_type),c=t[s+1],l=n[c],d=Sc(l?.item.response_type),u=!(s===t.length-1)&&!o&&!d;return r.createElement("div",{key:a,className:f("WACBodyMessageComponents__MessageWrapper",{"WACBodyMessageComponents__MessageWrapper--fullWidth":o,"WACBodyMessageComponents__MessageWrapper--shortBottomPadding":u})},e.renderMessageComponent({...e,message:i,isNestedMessageItem:!0}))});return a?.length?r.createElement("div",{className:"WACBodyMessageComponents"},a):null});function yc(e){const t=(0,E.d4)(e=>e.allMessageItemsByID),n=e.message.ui_state.footerLocalMessageItemIDs?.map(n=>{const a=t[n];return r.createElement(r.Fragment,{key:n},e.renderMessageComponent({...e,message:a,isNestedMessageItem:!0}))}),a=n?.length??0,s=a>2;return a?r.createElement("div",{className:f("WACFooterButtonComponents",{"WACFooterButtonComponents--column":s})},n):null}function Cc({localMessageItem:e,fullMessage:t,isMessageForInput:n,requestFocus:a,renderMessageComponent:s}){const i=ar(),o=fr(),c=(0,E.d4)(e=>e.config),l=(0,E.d4)($n);return r.createElement(r.Fragment,null,r.createElement(vc,{message:e,originalMessage:t,languagePack:o,requestInputFocus:a,disableUserInputs:l.isReadonly,config:c,isMessageForInput:n,scrollElementIntoView:jn,serviceManager:i,hideFeedback:!0,showChainOfThought:!1,allowNewFeedback:!1,renderMessageComponent:s}),r.createElement(yc,{message:e,originalMessage:t,languagePack:o,requestInputFocus:a,disableUserInputs:l.isReadonly,config:c,isMessageForInput:n,scrollElementIntoView:jn,serviceManager:i,hideFeedback:!0,showChainOfThought:!1,allowNewFeedback:!1,renderMessageComponent:s}))}const bc=r.memo(function(e){const{ignoreMaxWidth:t}=e,n=e.localMessageItem.item;return r.createElement(C.FAs,{className:f("WACCardMessageComponent",{WACMaxWidthSmall:!t&&n.max_width===vt.SMALL,WACMaxWidthMedium:!t&&n.max_width===vt.MEDIUM,WACMaxWidthLarge:!t&&n.max_width===vt.LARGE})},r.createElement(Cc,{...e,renderMessageComponent:e.renderMessageComponent}))}),Ac=r.lazy(async()=>{const[{Swiper:e,SwiperSlide:t},{A11y:a,Navigation:s}]=await Promise.all([Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.bind(n,10952)),Promise.all([n.e(3320),n.e(9560),n.e(4812),n.e(1521),n.e(3122),n.e(4915),n.e(7616),n.e(7770),n.e(6423),n.e(1872),n.e(1366),n.e(8197),n.e(9169),n.e(5080),n.e(5659),n.e(2252),n.e(9272),n.e(6829),n.e(9357),n.e(8068),n.e(6091),n.e(4687),n.e(859),n.e(4921),n.e(9537),n.e(8327),n.e(7565),n.e(9507),n.e(2986),n.e(5260),n.e(4520),n.e(6861),n.e(7236),n.e(9865),n.e(3833),n.e(1562),n.e(3273),n.e(6251),n.e(1432),n.e(1508),n.e(5797),n.e(3896),n.e(4582),n.e(2853),n.e(6868),n.e(5852),n.e(8415),n.e(8491),n.e(9638),n.e(8592),n.e(6874),n.e(7907),n.e(4332),n.e(4391),n.e(4079),n.e(4794),n.e(7823),n.e(6411),n.e(6334),n.e(949),n.e(1558),n.e(64),n.e(3280),n.e(4670),n.e(7281),n.e(4840),n.e(2949)]).then(n.bind(n,24464))]),i=[a,s];return{default:({swiperRef:n,initialSlide:a,previousButton:s,nextButton:o,chatWidthBreakpoint:c,onSlideChangeInternal:l,children:d})=>r.createElement(e,{ref:n,initialSlide:a,modules:i,navigation:{prevEl:s,nextEl:o},slidesPerView:"auto",spaceBetween:Mc[c],onSlideChange:l,slidesOffsetBefore:Mc[c],slidesOffsetAfter:16,rewind:!0},r.Children.map(d,e=>r.createElement(t,{key:e.key,className:`WACCarouselContainer__Slide--${c}`},e)))}}),Mc={[Fn.NARROW]:16,[Fn.STANDARD]:56,[Fn.WIDE]:56};function Ic({children:e,swiperRef:t,initialSlide:n,onSlideChange:a}){const s=(0,g.tz)(),{carousel_prevNavButton:i,carousel_nextNavButton:o}=fr(),c=(0,E.d4)(e=>e.chatWidthBreakpoint),[l,d]=(0,r.useState)(),[u,h]=(0,r.useState)(),[m,p]=(0,r.useState)(1);const f=r.Children.count(e),_=s.formatMessage({id:"components_swiper_currentLabel"},{currentSlideNumber:m,totalSlideCount:f});return f<=1?r.createElement("div",{className:"WACCarouselContainer WACCarouselContainer--oneSlide"},e):r.createElement("div",{className:"WACCarouselContainer"},l&&r.createElement(r.Suspense,{fallback:r.createElement("div",null)},r.createElement(Ac,{swiperRef:t,initialSlide:n,previousButton:u,nextButton:l,chatWidthBreakpoint:c,onSlideChangeInternal:function({activeIndex:e}){p(e+1),a?.(e)}},e)),r.createElement("div",{className:`WACCarouselContainer__Controls--${c}`},r.createElement("div",{className:"WACCarouselContainer__Navigation"},r.createElement(C.$nd,{ref:h,className:"WACCarouselContainer__NavigationButton WACDirectionHasReversibleSVG",kind:_s.GHOST,"aria-label":i},r.createElement(re.A,null)),r.createElement("div",{className:"WACCarouselContainer__CurrentLabel"},_),r.createElement(C.$nd,{ref:d,className:"WACCarouselContainer__NavigationButton WACDirectionHasReversibleSVG",kind:_s.GHOST,"aria-label":o},r.createElement(oe.A,null)))))}function Tc(e){const{localMessageItem:t,fullMessage:n,isMessageForInput:a,requestFocus:s,renderMessageComponent:i}=e,o=(0,E.d4)(e=>e.allMessageItemsByID),{itemsLocalMessageItemIDs:c}=t.ui_state;return r.createElement(r.Suspense,{fallback:r.createElement(sc,null)},r.createElement(Ic,null,c.map(e=>{const t=o[e];return r.createElement(bc,{key:e,localMessageItem:t,fullMessage:n,isMessageForInput:a,ignoreMaxWidth:!0,requestFocus:s,renderMessageComponent:i})})))}function wc(e,t){const n=(0,r.useMemo)(()=>t&&(0,L.A)(t,100,{maxWait:100,leading:!0}),[t]);_r(e)!==e&&t&&setTimeout(n)}var Nc;function Rc({citation:e,type:t,setIsExpandable:n,isExpandable:a}){const s=fr(),{width:i}=(0,r.useContext)(xr),{conversationalSearch_viewSourceDocument:o}=s,c=(0,r.useRef)(null),{text:l}=e;let d,u;return(0,r.useLayoutEffect)(()=>{c.current&&!a&&n&&c.current.clientHeight&&c.current.scrollHeight&&n(c.current.clientHeight<c.current.scrollHeight)},[l,a,n,i]),t===Nc.URL&&e.url?(d=new URL(e.url).hostname,u=r.createElement(ce.A,{size:16})):a&&(u=r.createElement(le.A,{size:16}),d=o),r.createElement(r.Fragment,null,r.createElement("div",{className:"WACCitationCard_Header"},r.createElement("div",{className:"WACCitationCard_Title WACWidget__textEllipsis"},e.title),r.createElement("div",{ref:c,className:"WACCitationCard_Text"},l)),r.createElement("div",{className:"WACCitationCard_Footer"},(d||u)&&r.createElement(r.Fragment,null,r.createElement("div",{className:"WACCitationCard_Label WACWidget__textEllipsis"},d),r.createElement("div",{className:"WACCitationCard_Icon"},u))))}function kc({title:e,onClick:t,onSelectCitation:n,children:a,className:s}){return r.createElement("button",{type:"button",className:`${s} WACCitationCard--clickable`,"aria-label":e,onClick:()=>{t(),n?.()},onFocus:n},a)}function xc({className:e,citation:t,onSelectCitation:n,relatedSearchResult:a}){const s=ar(),{title:i}=t,[o,c]=(0,r.useState)(Boolean(a?.body));function l(e){return r.createElement(C.FAs,{className:e},r.createElement(Rc,{citation:t,type:Nc.EXPAND_IF_NEEDED,setIsExpandable:c,isExpandable:o}))}return t?o?r.createElement(kc,{className:e,title:i,onClick:function(){s.store.dispatch(Hn.setViewSourcePanelIsOpen(!0,t,a))},onSelectCitation:n},l()):l(e):null}function Oc(e){let t;if(e)try{return t="object"==typeof e?`\`\`\`\n${JSON.stringify(e,null,2)}\n\`\`\`\n`:"string"==typeof e?function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(e)?`\`\`\`\n${JSON.stringify(JSON.parse(e),null,2)}\n\`\`\`\n`:e:String(e),t}catch(e){}}function Pc(e){return"null"===e?null:e}function Dc(e){if("string"==typeof e&&e.startsWith('["')&&e.endsWith('"]'))try{[e]=JSON.parse(e)}catch(e){}return e}!function(e){e.URL="url",e.EXPAND_IF_NEEDED="expand"}(Nc||(Nc={}));const Lc=r.memo(function({citation:e,isSelected:t,onSelectCitation:n,relatedSearchResult:a}){const{url:s}=e,i=s&&(c=o=s)&&"null"!==c&&(o.includes("http://")||o.includes("https://"))?Nc.URL:Nc.EXPAND_IF_NEEDED;var o,c;const l=f("WACCitationCard",{"WACCitationCard--selected":t,"WACCitationCard--clickable":i===Nc.URL,"WACCitationCard--url":i===Nc.URL,"WACCitationCard--no-url":i!==Nc.URL},"WACWidget__textEllipsis");return i===Nc.URL?r.createElement("a",{className:l,href:s,target:"_blank",rel:"noopener noreferrer",onClick:n,onFocus:n},r.createElement(C.FAs,null,r.createElement(Rc,{citation:e,type:i}))):r.createElement(xc,{citation:e,className:l,onSelectCitation:n,relatedSearchResult:a})});let Bc=1;function Hc(){const e=(0,r.useRef)();return void 0===e.current&&(e.current=Bc++),e.current}const Wc=r.memo(function(e){const{highlightCitation:t,onToggleCitations:n,citationsOpen:a,searchItem:s,showCitationsToggle:i}=e,o=fr(),c=ar(),{streamingState:l}=s.ui_state,d=`WACConversationalSearchText-${Hc()}${c.namespace.suffix}`,[u,h]=(0,r.useState)("");let g;return g=l&&!l.isDone?l.chunks.map(e=>e.text).join(""):s.item.text,(0,r.useEffect)(()=>{const e=function(e,t){const n=t?.ranges;if(!n?.length)return e;const a=[...n].sort((e,t)=>t.start-e.start);let s=e;for(const e of a){const t=s.substring(0,e.start),n=s.substring(e.start,e.end),a=s.substring(e.end);n.trim()&&(s=t+"=="+n+"=="+a)}return s}(g,t);h(e)},[g,t,i,l]),r.createElement("div",{className:"WACConversationalSearchText"},r.createElement(Eo,{text:u,overrideSanitize:!1,streaming:l&&!l.isDone}),i&&r.createElement("div",{className:"WACConversationalSearchText__CitationsToggleContainer"},r.createElement("div",{className:"WACConversationalSearchText__CitationsToggle"},r.createElement(C.jZg,{id:d,onClick:n,"aria-expanded":a,text:o.conversationalSearch_citationsLabel,renderIcon:a?ue.A:de.A,"aria-label":o.conversationalSearch_toggleCitations}))))});function Uc({localMessageItem:e,scrollElementIntoView:t,isStreamingError:n,doAutoScroll:a}){const[s,i]=(0,r.useState)(0),[o,c]=(0,r.useState)(!1),l=(0,r.useRef)(),d=(0,r.useRef)(),u=fr(),h=e.item,g=(0,r.useMemo)(()=>function(e){if(!e)return null;const t=e.filter(e=>e.ranges?.length),n=e.filter(e=>!e.ranges?.length);return t.concat(n)}(h.citations),[h.citations]);function m(){setTimeout(()=>t(l.current,32,64),50)}return wc(e.ui_state.streamingState?.chunks,a),r.createElement("div",{className:"WACConversationalSearch"},r.createElement(Wc,{searchItem:e,showCitationsToggle:Boolean(g?.length),highlightCitation:o?g?.[s]:null,onToggleCitations:function(){c(!o),o||m()},citationsOpen:o}),n&&r.createElement(To,{text:u.conversationalSearch_streamingIncomplete}),r.createElement("div",{ref:l},o&&function(){const e=g?.map((e,t)=>r.createElement(Lc,{key:t,citation:e,isSelected:t===s,onSelectCitation:()=>function(e){c(!0),i(e),setTimeout(()=>d.current?.swiper.slideTo(e)),m()}(t),relatedSearchResult:h.search_results?.[e.search_result_idx]}));return r.createElement("div",{className:"WACConversationalSearch_Citations"},r.createElement(r.Suspense,{fallback:r.createElement(sc,null)},r.createElement(Ic,{swiperRef:d,initialSlide:s,onSlideChange:i},e)))}()))}var $c=r.memo(function(e){const{doAutoScroll:t,isStreamingError:n,streamingState:a,serviceManager:s}=e,i=fr(),o=s.actions.getOrCreateUserDefinedElement(e.localMessageID);return wc(a?.chunks,t),r.createElement("div",{className:"WAC__message-userDefinedResponse","data-floating-menu-container":!0},r.createElement("slot",{name:o.slotName}),n&&r.createElement(To,{text:i.conversationalSearch_streamingIncomplete}))});const Fc=new RegExp(`[ ${qn}]|\\.$`,"g");const zc=r.memo(function(e){const{localMessage:t,disabled:n,scrollElementIntoView:a}=e,s=ar(),i=(0,g.tz)(),c=(0,E.d4)(e=>e.locale),l=(0,E.d4)(e=>e.allMessagesByID[t.fullMessageID]),d=(0,r.useRef)(Tt(At.MISCELLANEOUS)),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(),[f,_]=(0,r.useState)(),[S,v]=(0,r.useState)(),[y,b]=(0,r.useState)(),[A,M]=(0,r.useState)(),[I,T]=(0,r.useState)(),w=(0,r.useRef)(),N=(0,r.useRef)(!1),R=i.formatMessage({id:"datePicker_chooseDate"},{format:S}),k=i.formatMessage({id:"datePicker_confirmDate"}),x=Boolean(f&&S&&y&&A);function O(e){const t=function(e){let t=e.replace(Fc,"");return t.includes("mm")||(t=t.replace("m","mm")),t.includes("dd")||(t=t.replace("d","dd")),t}(o.Ls[e]?.formats?.L?.toLocaleLowerCase()||"mm/dd/yyyy");M(e),b(function(e){if("zh-tw"===e)return"zh_tw";return e.includes("-")?e.split("-")[0]:e}(e)),v(t),_(function(e){const t=e.includes("-")?"-":"/",n=e.toLocaleLowerCase().trim()[0];if("m"===n)return`m${t}d${t}Y`;if("d"===n)return`d${t}m${t}Y`;if("y"===n)return`Y${t}m${t}d`;throw Error(`The provided format ${e} is invalid.`)}(t))}const P=(0,r.useCallback)(()=>{const{ui_state:e,fullMessageID:n}=t,a=e.id,i=function(e,t,n){const a=Ca(e);return a.history={label:t,related_message_id:n},a}(w.current,m,n);s.actions.sendWithCatch(i,et.DATE_PICKER,{setValueSelectedForMessageID:a})},[t,s,m]),D=(0,r.useCallback)(()=>{a(I,0,24)},[I,a]);return Er(()=>{const e=c,{originalUserText:n}=t.ui_state,a=l.ui_state_internal?.from_history;a&&n&&p(n);try{o.Ls[e]?O(e):oa(e).then(e=>{O(e)})}catch{O("en")}}),r.createElement("div",{className:"WACDatePicker"},x&&I&&r.createElement(C.Wdr,null,r.createElement(C.lrV,{className:"WACDatePicker__Calendar",datePickerType:"single",allowInput:!1,locale:y,appendTo:I,onChange:e=>{if(e.length){const t=e[0];w.current=function(e){const t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getFullYear())}-${n}-${t}`}(t),p(function(e,t){const n=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getFullYear());return t.replace("dd",n).replace("mm",a).replace("yyyy",s)}(t,S))}},dateFormat:f,onOpen:()=>{h(!0),N.current?N.current=!1:D()},onClose:()=>h(!1)},r.createElement(C.tKA,{id:d.current,labelText:R,placeholder:S,disabled:n,title:"",onPointerDown:()=>{N.current=!0},onClick:()=>D()}))),r.createElement("div",{className:"WACDatePicker__CalendarContainer",ref:T}),!n&&!u&&m&&r.createElement(C.$nd,{className:"WACDatePicker__ConfirmButton",onClick:P,renderIcon:e=>r.createElement(X.A,{size:32,...e})},k))});function qc({cell:e,cellData:t,columnIndex:n,columnWidthString:a,isPixelValue:s,localMessageItem:i,originalMessage:o,renderMessageComponent:c,rowIndex:l}){const d=ar(),u=fr(),h=(0,E.d4)(e=>e.config),g=(0,E.d4)($n),m=(0,E.d4)(e=>e.allMessageItemsByID),{horizontal_alignment:p,vertical_alignment:f}=i.item,_=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{if(_){const e=s?a:void 0,n=s?void 0:Number(a),i=Gc(t?.horizontal_alignment||p),r=Gc(t?.vertical_alignment||f);_.current.style.setProperty("inline-size",e),_.current.style.setProperty("flex",`${n}`),_.current.style.setProperty("align-items",i),_.current.style.setProperty("text-align",t?.horizontal_alignment||p),_.current.style.setProperty("justify-content",r)}},[s,a,t?.horizontal_alignment,t?.vertical_alignment,p,f]),r.createElement("div",{className:"WACGrid__Cell",ref:_},e.map((e,t)=>{const a=m[e];return r.createElement(r.Fragment,{key:`item-${l}-${n}-${t}`},c({message:a,originalMessage:o,languagePack:u,requestInputFocus:jn,disableUserInputs:g.isReadonly,config:h,isMessageForInput:!1,scrollElementIntoView:jn,serviceManager:d,isNestedMessageItem:!0,hideFeedback:!0,allowNewFeedback:!1}))}))}function Gc(e){switch(e){case"bottom":case"right":return"flex-end";case"center":return"center";default:return"flex-start"}}const Vc=/^[0-9]*(px)?$/;const jc=r.memo(function({localMessageItem:e,originalMessage:t,renderMessageComponent:n}){const{columns:a,max_width:s}=e.item;return r.createElement("div",{className:f("WACGrid",{WACMaxWidthSmall:s===vt.SMALL,WACMaxWidthMedium:s===vt.MEDIUM,WACMaxWidthLarge:s===vt.LARGE})},e.ui_state.gridLocalMessageItemIDs.map((s,i)=>r.createElement("div",{key:`row-${i}`,className:"WACGrid__Row"},s.map((s,o)=>{const c=e.item.rows[i]?.cells[o];let l,d=a?.[o]?.width||"1";return d.match(Vc)?l=d.endsWith("px"):(d="1",l=!1),r.createElement(qc,{localMessageItem:e,renderMessageComponent:n,cell:s,originalMessage:t,cellData:c,columnWidthString:d,key:`cell-${i}-${o}`,isPixelValue:l,rowIndex:i,columnIndex:o})}))))});const Zc=r.memo(function({messageItem:e,doAutoScroll:t}){const{source:n,image_url:a,title:s,description:i}=e,o=(0,E.d4)(e=>e.theme.theme),c=Ue(n),{store:l}=ar(),{iframe_ariaImageAltText:d}=fr(),u=(0,g.tz)().formatMessage({id:"iframe_ariaClickPreviewCard"},{source:c});return r.createElement("div",null,r.createElement(uc,{title:s,description:i,source:a,displayURL:n,altText:d,onImageLoad:function(){t?.()},renderIcon:se.A,onClick:function(){n&&l.dispatch(Hn.setIFrameContent(e))},preventInlineError:!0,useAITheme:o===ot.CARBON_AI}),r.createElement(lr,null,u))});class Yc extends r.PureComponent{constructor(){super(...arguments),this.state={showChildren:!1}}componentDidMount(){this.onComponentDidMount=setTimeout(()=>{this.setState({showChildren:!0})},this.props.delay)}componentWillUnmount(){clearTimeout(this.onComponentDidMount),this.onComponentDidMount=void 0}render(){return!!this.state.showChildren&&this.props.children}}function Kc({title:e,source:t,onTimeoutOverride:n,onLoad:a}){const{errors_iframeSource:s,iframe_ariaSourceLoaded:i}=fr(),o=Ir(),[c,l]=(0,r.useState)(!0),[d,u]=(0,r.useState)(!1),h=(0,r.useCallback)(()=>{l(!1),u(!0),o(s)},[o,s]),g=(0,r.useCallback)(()=>{l(!1),o(i),a?.()},[o,i,a]);return(0,r.useEffect)(()=>{let e=null;if(c){e=setTimeout(n||h,Gn)}return()=>{clearTimeout(e)}},[c,h,n]),r.createElement("div",{className:"WACIFrameComponent__Wrapper"},d&&(m=s,r.createElement("div",{className:"WACIFrameComponent__StatusContainer"},r.createElement(To,{text:m}))),!d&&r.createElement("iframe",{className:"WACIFrameComponent__IFrame",title:e,src:t,sandbox:"allow-scripts allow-downloads allow-forms allow-popups",referrerPolicy:"origin",onLoad:g}),c&&r.createElement(Yc,{delay:1500},r.createElement("div",{className:"WACIFrameComponent__StatusContainer"},r.createElement(C.Rhj,{withOverlay:!1}))));var m}function Xc({messageItem:e,doAutoScroll:t}){const n=Ir(),{errors_iframeSource:a}=fr(),[s,i]=(0,r.useState)(!1),{source:o,title:c}=e,l=Ua(e)?.base_height,d=ta(l),u=c||o,h=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{h&&d&&h.current.style.setProperty("padding-block-start",d)},[d]);const g=(0,r.useCallback)(()=>{i(!0),n(a)},[n,a]);return s?r.createElement(To,{text:a}):r.createElement("div",{className:"WACInlineIFrame",ref:h},r.createElement(Kc,{source:o,title:u,onTimeoutOverride:g,onLoad:()=>t?.()}))}function Qc({doAutoScroll:e,localMessage:t,displayOverride:n}){const{item:a}=t;return a.display===_t.INLINE||n===_t.INLINE?r.createElement(Xc,{key:a.source,doAutoScroll:e,messageItem:a}):r.createElement(Zc,{doAutoScroll:e,messageItem:a})}function Jc({className:e,text:t,shouldRemoveHTMLBeforeMarkdownConversion:n=!1}){return r.createElement("div",{className:`WAC__description ${e}`},r.createElement(Eo,{text:t,shouldRemoveHTMLBeforeMarkdownConversion:n}))}function el({title:e=null,description:t=null,id:n=null,shouldRemoveHTMLBeforeMarkdownConversion:a=!1}){return e||t?r.createElement("div",{className:"WAC__received--metablock",id:n},e&&r.createElement(Jc,{className:"WAC__received--metablock-content WACMetablock__Title",text:e,shouldRemoveHTMLBeforeMarkdownConversion:a}),t&&r.createElement(Jc,{className:"WAC__received--metablock-content WACMetablock__Description",text:t,shouldRemoveHTMLBeforeMarkdownConversion:a})):null}function tl(e){const{title:t,description:n,options:a,onChange:s,languagePack:i,disableUserInputs:o,serviceManager:c,shouldRemoveHTMLBeforeMarkdownConversion:l}=e,[d,u]=(0,r.useState)(!1),h=(0,r.useRef)(),g=`${Hc()}${c.namespace.suffix}`,m=h.current?.getRootNode?function(e){const t={document:e.ownerDocument,addEventListener:e.ownerDocument.addEventListener.bind(e),removeEventListener:e.ownerDocument.removeEventListener.bind(e),Node:Node};return new Proxy(e,{get:(e,n)=>t[n]})}(h.current.getRootNode()):void 0;return r.createElement("div",{ref:h},r.createElement(el,{title:t,description:n,id:`WAC__selectUUID_${g}-label`,shouldRemoveHTMLBeforeMarkdownConversion:l}),r.createElement("div",{className:f("WAC__selectHolder",{WAC__customSelectTemporaryPadding:d})},r.createElement(C.Wdr,null,r.createElement(C.msM,{id:`WAC__selectUUID_${g}`,items:a,label:i.options_select,titleText:i.options_select,hideLabel:!0,"aria-label":o?i.options_ariaOptionsDisabled:t,disabled:o,onChange:s,selectedItem:function(){const{value:t,options:n}=e;return n.find(e=>e.value===t)}(),downshiftProps:{environment:m,onIsOpenChange:function(e){e.isOpen&&h.current&&setTimeout(()=>{h?.current&&(u(!0),function(e,t=!1,n){e&&(0,_.O)(e,{boundary:n,scrollMode:"if-needed",block:"nearest",inline:"nearest"}).forEach(({el:e,top:n,left:a})=>{ir(e,Math.round(n),Math.round(a),t)})}(h.current),u(!1))},140)},id:`WACSelectComponent__Downshift-${g}`}}))))}Yc.defaultProps={delay:500};class nl extends r.Component{constructor(){super(...arguments),this.onOptionSelected=(e,t)=>{const{localMessage:n,serviceManager:a,originalMessage:s}=this.props,{id:i}=s,r=ya(e,i),o=n.ui_state.id,c="button"===t?et.OPTION_BUTTON:et.OPTION_DROP_DOWN;a.actions.sendWithCatch(r,c,{setValueSelectedForMessageID:o}),this.props.requestInputFocus()},this.onButtonClick=(e,t)=>{this.onOptionSelected(t,"button")},this.onSelectChange=e=>{this.onOptionSelected(e.selectedItem,"dropdown")}}render(){const{localMessage:e,languagePack:t,disableUserInputs:n,serviceManager:a,shouldRemoveHTMLBeforeMarkdownConversion:s}=this.props,{options:i,title:o,description:c,preference:l}=e.item,{optionSelected:d}=e.ui_state,u=function(e,t){let n="button";return e&&"button"===e?n="button":(e&&"dropdown"===e||t>4)&&(n="dropdown"),n}(l,i.length);return"button"===u?r.createElement(r.Fragment,null,r.createElement(el,{title:o,description:c,shouldRemoveHTMLBeforeMarkdownConversion:s}),r.createElement("div",{className:"WAC__button-holder"},r.createElement("ul",null,i.map((e,t)=>{const a=!!d&&e.value.input.text===d.input.text;return r.createElement("li",{key:e.label},r.createElement(C.bJ3,{kind:_s.TERTIARY,isQuickAction:!0,size:Ss.SMALL,className:`WAC__button-${t}`,disabled:n,isSelected:a,onClick:t=>{this.onButtonClick(t,e)}},e.label))})))):r.createElement(tl,{serviceManager:a,languagePack:t,title:o,description:c,options:i,disableUserInputs:n,onChange:this.onSelectChange,value:d,shouldRemoveHTMLBeforeMarkdownConversion:s})}}const al=(0,I.a)({tagName:Xr,elementClass:Qr,react:r});const sl=r.memo(function(e){const{tableItem:t}=e,{title:n,description:a,headers:s,rows:i}=t,o=(0,E.d4)(e=>e.locale),c=(0,E.d4)(e=>e.config.public),{carbonTheme:l}=c.themeConfig,d=fr(),u=(0,g.tz)(),h=l===rt.G90||l===rt.G100;return(0,r.useMemo)(()=>{const e=s.length,t=!i.some(t=>t.cells.length!==e);return t},[i,s])?r.createElement("div",{className:"WACTableContainer"},r.createElement(r.Suspense,{fallback:null},r.createElement(al,{tableTitle:n,tableDescription:a,headers:s,rows:i,filterPlaceholderText:d.table_filterPlaceholder,previousPageText:d.table_previousPage,nextPageText:d.table_nextPage,itemsPerPageText:d.table_itemsPerPage,getPaginationSupplementalText:function({count:e}){return u.formatMessage({id:"table_paginationSupplementalText"},{pagesCount:e})},getPaginationStatusText:function({start:e,end:t,count:n}){return u.formatMessage({id:"table_paginationStatus"},{start:e,end:t,count:n})},locale:o,dark:h}))):r.createElement(To,null)});function il(e){const{text:t,streamingState:n,removeHTML:a,isStreamingError:s,doAutoScroll:i}=e,o=fr();let c;return wc(n?.chunks,i),c=n&&!n.isDone?n.chunks.map(e=>e.text).join(""):t,r.createElement(r.Fragment,null,r.createElement(Eo,{text:c,shouldRemoveHTMLBeforeMarkdownConversion:a,streaming:n&&!n.isDone}),s&&r.createElement(To,{text:o.conversationalSearch_streamingIncomplete}))}const rl=r.memo(function({...e}){return r.createElement(oc,{type:mt.VIDEO,...e})});function ol(){const e=(0,r.useRef)();return void 0===e.current&&(e.current=Tt(At.COMPONENT)),e.current}const cl=(ll="chainOfThought_stepTitle",new h.SV(Mt[ll],"en-US"));var ll;class dl extends T.WF{constructor(){super(...arguments),this.open=!1,this.formatStepLabelText=({stepNumber:e,stepTitle:t})=>cl.format({stepNumber:e,stepTitle:t||""}),this.inputLabelText=Mt.chainOfThought_inputLabel,this.outputLabelText=Mt.chainOfThought_outputLabel,this.toolLabelText=Mt.chainOfThought_toolLabel,this.explainabilityText=Mt.chainOfThought_explainabilityLabel,this.statusSucceededLabelText=Mt.chainOfThought_statusSucceededLabel,this.statusFailedLabelText=Mt.chainOfThought_statusFailedLabel,this.statusProcessingLabelText=Mt.chainOfThought_statusProcessingLabel,this._chainOfThoughtPanelID=`${Lr}-chain-of-thought-panel-id-${Tt()}`}firstUpdated(e){this._steps=this.steps.map(e=>({...e,open:!1}))}updated(e){e.has("steps")&&(this._steps=this.steps.map((e,t)=>({...e,open:this._steps[t]?.open})))}}dl.styles=T.AH`
    ${(0,T.iz)(":host{\n  display:block;\n  margin-block-start:1rem;\n}\n\n:host([open]) .cds--aichat-chain-of-thought-content{\n  display:block;\n  overflow:visible;\n  max-block-size:-moz-fit-content;\n  max-block-size:fit-content;\n  opacity:1;\n}\n:host([open]) .cds--aichat-chain-of-thought-button-chevron svg{\n  transform:rotate(-90deg);\n}\n\n.cds--aichat-chain-of-thought-button-chevron{\n  display:flex;\n  flex-basis:1.5rem;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .cds--aichat-chain-of-thought-button-chevron svg{\n    transform:rotate(-270deg);\n    transition:none;\n  }\n}\n.cds--aichat-chain-of-thought-button-chevron svg{\n  transform:rotate(-270deg);\n  transition:all 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n}\n\n.cds--aichat-chain-of-thought-content{\n  display:none;\n  overflow:hidden;\n  max-block-size:0;\n  opacity:0;\n  transition:all 110ms cubic-bezier(0, 0, 0.38, 0.9) allow-discrete;\n}\n\n.cds--aichat-chain-of-thought-inner-content{\n  border:1px solid var(--cds-border-subtle-01, #c6c6c6);\n  background-color:var(--cds-layer-01, #f4f4f4);\n  margin-block-start:0.5rem;\n}\n\n.cds--aichat-chain-of-thought-item:not(:last-child){\n  padding-block-end:0.75rem;\n}\n\n.cds--aichat-chain-of-thought-item cds-aichat-markdown-text:not(:first-child){\n  padding-block-start:0.5rem;\n}\n\n.cds--aichat-chain-of-thought-item-label{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n\nbutton.cds--aichat-chain-of-thought-button{\n  box-sizing:border-box;\n  padding:0;\n  border:0;\n  margin:0;\n  font-family:inherit;\n  font-size:100%;\n  vertical-align:baseline;\n  display:inline-block;\n  padding:0;\n  border:0;\n  -webkit-appearance:none;\n     -moz-appearance:none;\n          appearance:none;\n  background:none;\n  cursor:pointer;\n  text-align:start;\n  inline-size:100%;\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n  display:flex;\n  align-items:center;\n  color:var(--cds-text-primary, #161616);\n}\nbutton.cds--aichat-chain-of-thought-button *,\nbutton.cds--aichat-chain-of-thought-button *::before,\nbutton.cds--aichat-chain-of-thought-button *::after{\n  box-sizing:inherit;\n}\nbutton.cds--aichat-chain-of-thought-button::-moz-focus-inner{\n  border:0;\n}\n\nbutton.cds--aichat-chain-of-thought-button:focus,\nbutton.cds--aichat-chain-of-thought-button:focus-visible{\n  outline:2px solid var(--cds-focus);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-content{\n  display:block;\n  overflow:visible;\n  background:var(--cds-layer-01, #f4f4f4);\n  color:var(--cds-text-primary, #161616);\n  max-block-size:-moz-fit-content;\n  max-block-size:fit-content;\n  opacity:1;\n  transition:all 110ms cubic-bezier(0, 0, 0.38, 0.9) allow-discrete;\n}\n\n.cds--aichat-chain-of-thought-item{\n  padding-block:1rem;\n  padding-inline:2rem 1rem;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-content[hidden]{\n  display:none;\n  overflow:hidden;\n  max-block-size:0;\n  opacity:0;\n  padding-block:0;\n  padding-inline:0;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-chevron{\n  display:flex;\n  flex:0 1 2rem;\n  justify-content:center;\n  color:var(--cds-text-primary, #161616);\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .cds--aichat-chain-of-thought-accordion-item-header-chevron svg{\n    fill:var(--cds-text-primary, #161616);\n    transform:rotate(-270deg);\n    transition:none;\n  }\n}\n.cds--aichat-chain-of-thought-accordion-item-header-chevron svg{\n  fill:var(--cds-text-primary, #161616);\n  transform:rotate(-270deg);\n  transition:all 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-chevron[data-open] svg{\n  transform:rotate(-90deg);\n}\n\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header{\n  box-sizing:border-box;\n  padding:0;\n  border:0;\n  margin:0;\n  font-family:inherit;\n  font-size:100%;\n  vertical-align:baseline;\n  display:inline-block;\n  padding:0;\n  border:0;\n  -webkit-appearance:none;\n     -moz-appearance:none;\n          appearance:none;\n  background:none;\n  cursor:pointer;\n  text-align:start;\n  inline-size:100%;\n  font-size:var(--cds-body-01-font-size, 0.875rem);\n  font-weight:var(--cds-body-01-font-weight, 400);\n  line-height:var(--cds-body-01-line-height, 1.42857);\n  letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);\n  display:flex;\n  align-items:center;\n  padding:0.5rem 0;\n  background:var(--cds-layer-accent-02, #e0e0e0);\n  block-size:2rem;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *::before,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *::after{\n  box-sizing:inherit;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header::-moz-focus-inner{\n  border:0;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header:focus,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header:focus-visible{\n  position:relative;\n  z-index:2;\n  box-shadow:0 -1px 0 0 var(--cds-focus, #0f62fe), inset 0 1px 0 0 var(--cds-focus, #0f62fe), inset 2px 0 0 0 var(--cds-focus, #0f62fe), 0 1px 0 0 var(--cds-focus, #0f62fe), inset 0 -1px 0 0 var(--cds-focus, #0f62fe), inset -2px 0 0 0 var(--cds-focus, #0f62fe);\n  outline:none;\n}\n\n.cds--aichat-chain-of-thought-accordion-item:nth-child(odd) button.cds--aichat-chain-of-thought-accordion-item-header{\n  background:var(--cds-layer-02, #ffffff);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-title{\n  overflow:hidden;\n  flex:1 1;\n  color:var(--cds-text-primary, #161616);\n  margin-inline-end:0.5rem;\n  text-overflow:ellipsis;\n  white-space:nowrap;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status{\n  display:flex;\n  flex:0 0 1.5rem;\n  align-items:center;\n  justify-content:center;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status--failure{\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  margin-inline-end:0.5rem;\n}\n.cds--aichat-chain-of-thought-accordion-item-header-status--failure svg{\n  fill:var(--cds-support-error, #da1e28);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status--success{\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  margin-inline-end:0.5rem;\n}\n.cds--aichat-chain-of-thought-accordion-item-header-status--success svg{\n  fill:var(--cds-support-success, #24a148);\n}")}
  `,It([(0,w.MZ)({type:Boolean,attribute:"open",reflect:!0})],dl.prototype,"open",void 0),It([(0,w.MZ)({type:Array,attribute:"steps",reflect:!0})],dl.prototype,"steps",void 0),It([(0,w.MZ)({type:Function,attribute:!1})],dl.prototype,"formatStepLabelText",void 0),It([(0,w.MZ)({type:String,attribute:"input-label-text",reflect:!0})],dl.prototype,"inputLabelText",void 0),It([(0,w.MZ)({type:String,attribute:"output-label-text",reflect:!0})],dl.prototype,"outputLabelText",void 0),It([(0,w.MZ)({type:String,attribute:"tool-label-text",reflect:!0})],dl.prototype,"toolLabelText",void 0),It([(0,w.MZ)({type:String,attribute:"explainability-text",reflect:!0})],dl.prototype,"explainabilityText",void 0),It([(0,w.MZ)({type:Function,attribute:!1})],dl.prototype,"onToggle",void 0),It([(0,w.MZ)({type:Function,attribute:!1})],dl.prototype,"onStepToggle",void 0),It([(0,w.MZ)({type:String,attribute:"status-succeeded-label-text",reflect:!0})],dl.prototype,"statusSucceededLabelText",void 0),It([(0,w.MZ)({type:String,attribute:"status-failed-label-text",reflect:!0})],dl.prototype,"statusFailedLabelText",void 0),It([(0,w.MZ)({type:String,attribute:"status-processing-label-text",reflect:!0})],dl.prototype,"statusProcessingLabelText",void 0),It([(0,w.wk)()],dl.prototype,"_steps",void 0),It([(0,w.wk)()],dl.prototype,"_chainOfThoughtPanelID",void 0);const ul=`${Lr}-chain-of-thought-item`,hl=`${Lr}-chain-of-thought-accordion-item-header-status`,gl=(0,B.dI)(ge.A),ml=(0,B.dI)(he.A),pl=(0,B.dI)(me.A);function fl(e,t,n){const a=Oc(e);return a?function(e,t,n){return T.qy`<div
    class="${ul} ${ul}-${n}"
  >
    <div class="${ul}-label">${t}</div>
    <cds-aichat-markdown-text
      sanitize-html
      markdown=${e}
    ></cds-aichat-markdown-text>
  </div>`}(a,t,n):T.qy``}function El(e){const{_steps:t,open:n,_chainOfThoughtPanelID:a,onStepToggle:s,formatStepLabelText:i,statusSucceededLabelText:r,statusFailedLabelText:o,statusProcessingLabelText:c}=e;return n?T.qy`${t.map((t,n)=>{const l=n+1,d=`${a}-step-${l}-content`;return T.qy`<div
        class="${Lr}-chain-of-thought-accordion-item"
      >
        <button
          class="${Lr}-chain-of-thought-accordion-item-header"
          @click=${()=>{t.open=!t.open,e.requestUpdate();const n=e.shadowRoot.querySelector(`#${d}`);s?.(t.open,n)}}
          aria-expanded=${t.open}
          aria-controls=${d}
        >
          <span
            class="${Lr}-chain-of-thought-accordion-item-header-chevron"
            ?data-open=${t.open}
            >${(0,W.T)(gl)}</span
          >
          <span
            class="${Lr}-chain-of-thought-accordion-item-header-title"
            >${i({stepNumber:l,stepTitle:t.title})}</span
          >
          <span class="${hl}"
            >${function(e,t,n,a){switch(e){case ft.PROCESSING:return T.qy`<cds-custom-inline-loading
        status="active"
        aria-label="${a}"
      ></cds-custom-inline-loading>`;case ft.FAILURE:return T.qy`<span
        class="${hl}--${ft.FAILURE}"
        aria-label="${n}"
        >${(0,W.T)(pl)}</span
      >`;default:return T.qy`<span
        class="${hl}--${ft.SUCCESS}"
        aria-label="${t}"
        >${(0,W.T)(ml)}</span
      >`}}(t.status,r,o,c)}</span
          >
        </button>
        <div
          class="${Lr}-chain-of-thought-accordion-item-content"
          id=${d}
          ?hidden=${!t.open}
        >
          ${function(e,t){const{inputLabelText:n,outputLabelText:a,toolLabelText:s}=e;return t.open?T.qy` ${t.description?T.qy`<div
          class="${ul} ${ul}-description"
        >
          <cds-aichat-markdown-text
            sanitize-html
            markdown=${t.description}
          ></cds-aichat-markdown-text>
        </div>`:null}
    ${t.tool_name?T.qy`<div
          class="${ul} ${ul}-toolName"
        >
          <div class="${ul}-label">${s}</div>
          ${t.tool_name}
        </div>`:null}
    ${fl(t.request?.args,n,"input")}
    ${fl(t.response?.content,a,"output")}`:T.qy``}(e,t)}
        </div>
      </div>`})}`:T.qy``}const _l="cds-aichat-chain-of-thought";let Sl=class extends dl{render(){return function(e){const{_chainOfThoughtPanelID:t,explainabilityText:n,open:a}=e;return T.qy`<div class="${Lr}-chain-of-thought">
    <button
      class="${Lr}-chain-of-thought-button"
      @click=${function(){e.open=!e.open,e.onToggle?.(e.open,e)}}
      aria-expanded=${a}
      aria-controls=${t}
    >
      <span class="${Lr}-chain-of-thought-button-chevron"
        >${(0,W.T)(gl)}</span
      >
      ${n}
    </button>
    <div
      id=${t}
      class="${Lr}-chain-of-thought-content"
      ?hidden=${!a}
    >
      <div class="${Lr}-chain-of-thought-inner-content">
        ${El(e)}
      </div>
    </div>
  </div>`}(this)}};Sl=It([Dr(_l)],Sl);var vl=Sl;const yl=(0,I.a)({tagName:_l,elementClass:vl,react:r});function Cl(e){const{allowNewFeedback:t,hideFeedback:n,serviceManager:a,originalMessage:s,message:i}=e,o=(0,g.tz)(),c=fr(),l=(0,r.useRef)(),d=(0,E.d4)(Wn,E.bN),u=(0,E.d4)(e=>e.humanAgentState),h=(0,E.d4)(e=>e.persistedToBrowserStorage.chatState.humanAgentState),m=i.item.message_item_options?.feedback?.id,p=ol(),f=pa(s)?s.history?.feedback?.[m]:null,_=(0,r.useMemo)(()=>f?{text:f.text,selectedCategories:f.categories}:null,[f]),[S,v]=(0,r.useState)(!1),[y,C]=(0,r.useState)(f&&f.is_positive),[b,A]=(0,r.useState)(f&&!f.is_positive),[M,I]=(0,r.useState)(Boolean(f));function T(t,n,a){return r.createElement(il,{text:t.item.text,streamingState:t.ui_state.streamingState,isStreamingError:a?.history?.error_state===bt.FAILED_WHILE_STREAMING,removeHTML:n,doAutoScroll:e.doAutoScroll})}function w(t,n){const{serviceManager:a}=e;return r.createElement($c,{streamingState:t.ui_state.streamingState,isStreamingError:n?.history?.error_state===bt.FAILED_WHILE_STREAMING,doAutoScroll:e.doAutoScroll,localMessageID:t.ui_state.id,serviceManager:a})}function N(t,n){t&&setTimeout(()=>{e.scrollElementIntoView(n,64,64)})}function R({stepNumber:e,stepTitle:t}){return o.formatMessage({id:"chainOfThought_stepTitle"},{stepNumber:e,stepTitle:t})}return function(s,i){if(Ea(i))return function(t,n){const a=t.item;if(s=a,s&&"text"===s.response_type&&void 0!==s.text){const s=n.history?.label||a.text,i=t.ui_state.originalUserText||s;return r.createElement("div",{className:"WAC__sent--text"},n.input.message_type===gt.FILE&&r.createElement(G.A,{className:"WAC__sent-fileIcon","aria-label":e.languagePack.fileSharing_fileIcon}),r.createElement("span",{role:"heading","aria-level":2},i))}var s;return null}(s,i);if(pa(i)){const o=function(t,n){if(xa(t.item))return w(t,n);const a=t.item.response_type,s=Boolean(n.message_options?.response_user_profile?.user_type===Ct.HUMAN||t.item.agent_message_type);switch(a){case mt.TEXT:return function(t,n,a){if(e.isNestedMessageItem)return T(t,a,n);return r.createElement("div",null,T(t,a,n))}(t,n,s);case mt.IMAGE:return function(t){const{languagePack:n,serviceManager:a}=e,{theme:s}=a.store.getState().theme;return r.createElement(dc,{imageError:n.errors_imageSource,source:t.item.source,title:t.item.title,description:t.item.description,altText:t.item.alt_text,needsAnnouncement:t.ui_state.needsAnnouncement,useAITheme:s===ot.CARBON_AI})}(t);case mt.OPTION:return function(t,n){const{languagePack:a,requestInputFocus:s,serviceManager:i,disableUserInputs:o,isMessageForInput:c}=e,l=Boolean(t.item.agent_message_type);return r.createElement(nl,{localMessage:t,originalMessage:n,languagePack:a,disableUserInputs:o||!c,requestInputFocus:s,serviceManager:i,shouldRemoveHTMLBeforeMarkdownConversion:l})}(t,n);case mt.CONNECT_TO_HUMAN_AGENT:return function(t,n){const{languagePack:a,config:s,serviceManager:i,disableUserInputs:o,isMessageForInput:c}=e;return r.createElement(nc,{localMessage:t,originalMessage:n,languagePack:a,config:s,serviceManager:i,humanAgentState:u,agentDisplayState:d,persistedHumanAgentState:h,disableUserInputs:o||!c,requestFocus:e.requestInputFocus})}(t,n);case mt.INLINE_ERROR:return function(e){return r.createElement(To,{text:e.item.text})}(t);case mt.IFRAME:return function(t){const{doAutoScroll:n,isNestedMessageItem:a}=e,s=a?_t.INLINE:void 0;return r.createElement(Qc,{localMessage:t,doAutoScroll:n,displayOverride:s})}(t);case mt.VIDEO:return function(t){const{doAutoScroll:n}=e,{item:a}=t,{source:s,title:i,description:o,alt_text:c}=a;return r.createElement(rl,{source:s,title:i,description:o,baseHeight:Ua(a)?.base_height,ariaLabel:c,doAutoScroll:n,needsAnnouncement:t.ui_state.needsAnnouncement})}(t);case mt.AUDIO:return function(t){const{doAutoScroll:n}=e,{source:a,title:s,description:i,alt_text:o}=t.item;return r.createElement(cc,{source:a,title:s,description:i,ariaLabel:o,doAutoScroll:n,needsAnnouncement:t.ui_state.needsAnnouncement})}(t);case mt.DATE:return function(t){return r.createElement(zc,{localMessage:t,disabled:!e.isMessageForInput,scrollElementIntoView:e.scrollElementIntoView})}(t);case mt.CONVERSATIONAL_SEARCH:return function(t,n){const{scrollElementIntoView:a,doAutoScroll:s}=e;return r.createElement(Uc,{localMessageItem:t,scrollElementIntoView:a,isStreamingError:n?.history?.error_state===bt.FAILED_WHILE_STREAMING,doAutoScroll:s})}(t,n);case mt.TABLE:return function(e){return r.createElement(sl,{tableItem:e.item})}(t);case mt.CARD:return function(t,n){const{isMessageForInput:a,requestInputFocus:s}=e;return r.createElement(bc,{localMessageItem:t,fullMessage:n,isMessageForInput:a,requestFocus:s,renderMessageComponent:e=>r.createElement(Cl,{...e})})}(t,n);case mt.CAROUSEL:return function(t,n){const{isMessageForInput:a,requestInputFocus:s}=e;return r.createElement(Tc,{localMessageItem:t,fullMessage:n,isMessageForInput:a,requestFocus:s,renderMessageComponent:e=>r.createElement(Cl,{...e})})}(t,n);case mt.BUTTON:return function(t,n){const{isMessageForInput:a,requestInputFocus:s}=e;return r.createElement(_c,{localMessageItem:t,fullMessage:n,isMessageForInput:a,requestFocus:s})}(t,n);case mt.GRID:return function(e,t){return r.createElement(jc,{localMessageItem:e,originalMessage:t,renderMessageComponent:e=>r.createElement(Cl,{...e})})}(t,n);default:return w(t,n)}}(s,i),g=s.item.streaming_metadata?.stream_stopped;return r.createElement(r.Fragment,null,o,g&&r.createElement(Ko,null),e.showChainOfThought&&function(t,n){const a=n.message_options?.chain_of_thought;if(!a||e.isNestedMessageItem)return!1;return r.createElement(yl,{steps:a,onToggle:N,onStepToggle:N,formatStepLabelText:R,explainabilityText:c.chainOfThought_explainabilityLabel,inputLabelText:c.chainOfThought_inputLabel,outputLabelText:c.chainOfThought_outputLabel,toolLabelText:c.chainOfThought_toolLabel})}(0,i),function(s,i){const o=s.item.message_item_options?.feedback||{},{id:d,is_on:u,show_positive_details:h=!0,show_negative_details:g=!0,show_text_area:m=!0,show_prompt:E=!0,title:T,prompt:w,categories:N,placeholder:R,disclaimer:k}=o;if(e.isNestedMessageItem||n||!t&&!f||!u)return!1;function x(e){if(d){const t={feedback:{[d]:e}};a.store.dispatch(Hn.mergeMessageHistory(s.fullMessageID,t))}}function O(t){const n=t?!y:!b,r=(t?h:g)&&n;n&&!r?(x({is_positive:t}),I(!0),a.fire({type:Qe.FEEDBACK,messageItem:s.item,message:i,interactionType:tt.SUBMITTED,isPositive:t})):(v(r),r&&setTimeout(()=>{e.scrollElementIntoView(l.current,48,56)}),a.fire({type:Qe.FEEDBACK,messageItem:s.item,message:i,interactionType:r?tt.DETAILS_OPENED:tt.DETAILS_CLOSED,isPositive:t})),C(!!t&&n),A(!t&&n)}function P(e,t){I(!0),v(!1);const n={type:Qe.FEEDBACK,messageItem:s.item,message:i,interactionType:tt.SUBMITTED,isPositive:e,text:t.text,categories:t.selectedCategories};a.fire(n),x({is_positive:n.isPositive,text:n.text,categories:n.categories})}function D(e){const t=S&&(e?y:b);let n;return n=Array.isArray(N)?N:e?N?.positive:N?.negative,r.createElement(Yo,{class:`${Lr}-feedbackDetails-${e?"positive":"negative"}`,id:`${p}-feedback-${e?"positive":"negative"}`,isOpen:t,isReadonly:M,onClose:()=>O(e),onSubmit:t=>P(e,t),initialValues:f&&f?.is_positive===e?_:null,showTextArea:m,showPrompt:E,title:T||c.feedback_defaultTitle,prompt:w||c.feedback_defaultPrompt,categories:n,placeholder:R||c.feedback_defaultPlaceholder,disclaimer:k,submitLabel:c.feedback_submitLabel,cancelLabel:c.feedback_cancelLabel})}return r.createElement("div",{className:"WAC__received--feedback"},r.createElement(Ho,{isPositiveOpen:S&&y,isNegativeOpen:S&&b,isPositiveSelected:y,isNegativeSelected:b,hasPositiveDetails:h,hasNegativeDetails:g,isPositiveDisabled:b||M,isNegativeDisabled:y||M,positiveLabel:c.feedback_positiveLabel,negativeLabel:c.feedback_negativeLabel,panelID:p,onClick:O}),r.createElement("div",{ref:l},D(!0),D(!1)))}(s,i))}return!1}(e.message,e.originalMessage)}var bl;!function(e){e[e.FIRST=1]="FIRST",e[e.LAST=2]="LAST",e[e.NEXT=3]="NEXT",e[e.PREVIOUS=4]="PREVIOUS",e[e.INPUT=5]="INPUT"}(bl||(bl={}));class Al extends r.PureComponent{constructor(){super(...arguments),this.state={didRenderErrorOccur:!1,focusHandleHasFocus:!1},this.ref=r.createRef(),this.messageRef=r.createRef(),this.focusHandleRef=r.createRef(),this.getLocalMessage=()=>this.props.localMessageItem,this.onHandleFocus=()=>{this.setState({focusHandleHasFocus:!0})},this.onHandleBlur=()=>{this.setState({focusHandleHasFocus:!1})},this.onHandleKeyDown=e=>{if(e.altKey||e.metaKey||e.ctrlKey||e.shiftKey)return;let t;if("ArrowUp"===e.key)t=bl.PREVIOUS;else if("ArrowDown"===e.key)t=bl.NEXT;else if("Home"===e.key)t=bl.FIRST;else if("End"===e.key)t=bl.LAST;else if("Escape"===e.key)t=bl.INPUT;else if("Enter"===e.key||" "===e.key)return e.preventDefault(),void this.reAnnounceFocusHandle();t&&(e.preventDefault(),this.props.requestMoveFocus(t,this.props.messagesIndex))}}getWidgetSaidMessage(){const{intl:e,botName:t,localMessageItem:n}=this.props;let a;return n.item.agent_message_type?n.item.response_type===mt.TEXT&&(a="messages_agentSaid"):a="messages_botSaid",a?e.formatMessage({id:a},{botName:t}):null}componentDidCatch(e,t){this.props.serviceManager.actions.errorOccurred(ea("Message",e,t)),this.setState({didRenderErrorOccur:!0})}componentDidMount(){const e=this.props.localMessageItem.ui_state;e.needsAnnouncement&&(this.props.ariaAnnouncer(this.ref.current),this.props.serviceManager.store.dispatch(Hn.setMessageWasAnnounced(e.id)))}componentDidUpdate(){const e=this.props.localMessageItem.ui_state;e.needsAnnouncement&&(this.props.ariaAnnouncer(this.ref.current),this.props.serviceManager.store.dispatch(Hn.setMessageWasAnnounced(e.id)))}shouldRenderFailedMessage(){if(this.state.didRenderErrorOccur)return!0;const{localMessageItem:e,message:t}=this.props;return Ma(e.item)&&t.ui_state_internal?.agent_no_service_desk}reAnnounceFocusHandle(){const e=this.focusHandleRef.current;e&&this.props.ariaAnnouncer(e.getAttribute("aria-label"))}requestHandleFocus(){const{languagePack:e,intl:t,message:n,botName:a}=this.props,s=[Ea(n)?e.messages_youSaid:t.formatMessage({id:"messages_botSaid"},{botName:a})];hr(this.messageRef.current,s),this.focusHandleRef.current.setAttribute("aria-label",s.join(" ")),or(this.focusHandleRef,!0)}renderFailedRenderMessage(){const{messagesIndex:e}=this.props;return r.createElement("div",{className:`WAC__message WAC__message--inlineError WAC__message-${e} ${this.props.className||""}`,ref:this.ref},r.createElement("div",{className:"WAC__message--padding"},r.createElement("div",{className:"WAC__bot-message"},r.createElement(lr,null,this.getWidgetSaidMessage()),r.createElement("div",{className:"WAC__received WAC__message-vertical-padding WAC__received--text"},r.createElement(To,{text:this.props.languagePack.errors_singleMessage})))))}renderAvatarLine(e,t){let n;const{languagePack:a,botName:s,botAvatarURL:i,useAITheme:c,carbonTheme:l}=this.props,d=function(e){return o(e).format("LT")}(t.history.timestamp);let u,h,m="";if(pa(t)){const o=e.item.agent_message_type,p=t.message_options?.response_user_profile||{id:"watsonx",nickname:"watsonx",user_type:Ct.WATSONX};if(Ml(o))return null;const f=o===pt.FROM_HUMAN_AGENT;if(p.profile_picture_url&&p.user_type!==Ct.WATSONX)n=r.createElement(No,{url:p?.profile_picture_url,alt:f?a.agent_ariaResponseUserAvatar:a.agent_ariaGenericAvatar,fallback:r.createElement(wo,{icon:r.createElement(z.A,null)})}),m="WACMessage__Avatar--agent",h=p?.nickname||"";else{h=p?.nickname||s;let e=r.createElement(wo,{icon:r.createElement($.A,null)});c&&p.user_type===Ct.WATSONX&&(e=r.createElement(Mo,{theme:l})),n=r.createElement(No,{url:i,alt:a.agent_ariaGenericBotAvatar,fallback:e}),p.user_type===Ct.HUMAN&&(n=r.createElement(qr,{responseUserProfile:p,languagePack:a,width:"32px",height:"32px"})),m="WACMessage__Avatar--bot"}u=r.createElement("span",{"data-wac-exclude-node-read":!0},r.createElement(g.sA,{id:"message_labelBot",values:{timestamp:d,actorName:h}}))}else u=r.createElement(g.sA,{id:"message_labelYou",values:{timestamp:d}});return r.createElement("div",{className:"WACMessage__AvatarLine",key:`${t.id}-avatar-line`},n&&r.createElement("div",{className:`WACMessage__Avatar ${m}`},n),r.createElement("div",{className:"WACMessage__Label"},u))}renderMessageState(e){const{languagePack:t}=this.props;let n,a,s=!1;const i=e.history?.error_state,o=e.history?.file_upload_status;return i===bt.FAILED?(n=r.createElement(To,{text:t.errors_singleMessage}),a="WAC__message-error-failed",s=!0):o===Ve.UPLOADING?(n=r.createElement(C.Rhj,{withOverlay:!1,small:!0,"aria-label":t.fileSharing_statusUploading}),a="WAC__message-status-file-uploading"):"success"===o&&(n=r.createElement(F.A,{"aria-label":t.fileSharing_statusUploading}),a="WAC__message-status-file-success"),n&&{element:r.createElement("div",{className:`WAC__message-status ${a}`},n),showBelowMessage:s}}renderFocusHandle(){return r.createElement("div",{className:"WACMessage--focusHandle",ref:this.focusHandleRef,tabIndex:-1,onFocus:this.onHandleFocus,onBlur:this.onHandleBlur,onKeyDown:e=>this.onHandleKeyDown(e),onClick:()=>this.reAnnounceFocusHandle(),role:"button"})}render(){if(this.shouldRenderFailedMessage())return this.renderFailedRenderMessage();const{serviceManager:e,config:t,localMessageItem:n,message:a,languagePack:s,requestInputFocus:i,messagesIndex:o,disableUserInputs:c,showAvatarLine:l,className:d,doAutoScroll:u,isMessageForInput:h,scrollElementIntoView:g,isFirstMessageItem:m,isLastMessageItem:p,hideFeedback:E,allowNewFeedback:_}=this.props,{isIntermediateStreaming:S,isWelcomeResponse:v,disableFadeAnimation:y}=n.ui_state,C=n.item,b=C.response_type,A=C.agent_message_type,M=a.ui_state_internal?.from_history,I=m;if(S&&!function(e){switch(e){case mt.IMAGE:case mt.VIDEO:case mt.AUDIO:case mt.OPTION:case mt.IFRAME:case mt.INLINE_ERROR:case mt.CONVERSATIONAL_SEARCH:case mt.USER_DEFINED:case mt.TEXT:return!0;default:return!1}}(C.response_type))return!1;const T=r.createElement(Cl,{serviceManager:e,languagePack:s,requestInputFocus:i,message:n,originalMessage:a,disableUserInputs:c,isMessageForInput:h,config:t,doAutoScroll:u,scrollElementIntoView:g,showChainOfThought:p,hideFeedback:E,allowNewFeedback:_}),w=xa(n.item),N=v||y,R=A?function(e,t,n){if(e&&n)return"WAC__received--agentCustom";if(!t||t!==mt.TEXT&&t!==mt.BUTTON)return"";switch(e){case null:case void 0:case pt.FROM_USER:return null;case pt.RELOAD_WARNING:case pt.DISCONNECTED:return"WAC__received--chatStatusMessage";case pt.FROM_HUMAN_AGENT:return"WAC__received--fromHuman";default:return"WAC__received--agentStatusMessage"}}(A,b,w):null,k=Ea(a),x=Ml(n.item.agent_message_type);let O,P=!1;return va(n.item)&&(n.item.title||n.item.description||(P=!0)),k&&(O=this.renderMessageState(a)),r.createElement("div",{id:`WAC__message-${o}${e.namespace.suffix}`,className:f(`WAC__message WAC__message-${o}`,d,A&&"WAC__message--agentMessage",{"WAC__message--withAvatarLine":l,"WAC__message--request":k,"WAC__message--systemMessage":x,"WAC__message--response":!k,"WAC__message--no-animation":N,"WAC__message--custom":w,"WAC__message--disabled-inputs":c,"WAC__message--has-focus":this.state.focusHandleHasFocus,"WAC__message--option-response-without-title-or-description":P}),ref:this.ref},this.renderFocusHandle(),l&&this.renderAvatarLine(n,a),r.createElement("div",{className:"WAC__message--padding"},pa(a)&&r.createElement("div",{className:"WAC__bot-message"},I&&r.createElement(lr,null,this.getWidgetSaidMessage()),r.createElement("div",{className:f("WAC__received","WAC__message-vertical-padding",R,{"WAC__received--fromHuman":!A&&a.message_options?.response_user_profile?.user_type===Ct.HUMAN,"WAC__received--text":b===mt.TEXT,"WAC__received--image":b===mt.IMAGE,"WAC__received--options":b===mt.OPTION,"WAC__received--inlineError":b===mt.INLINE_ERROR,"WAC__received--iframePreviewCard":b===mt.IFRAME,"WAC__received--video":b===mt.VIDEO,"WAC__received--audio":b===mt.AUDIO,"WAC__received--date":b===mt.DATE,"WAC__received--card":b===mt.CARD,"WAC__received--carousel":b===mt.CAROUSEL,"WAC__received--conversationalSearch":b===mt.CONVERSATIONAL_SEARCH,"WAC__received--carouselSingle":Da(n.item),"WAC__received--button":b===mt.BUTTON,"WAC__received--grid":b===mt.GRID,"WAC__received--fullWidth":La(n.item),"WAC__message--historical":M}),ref:this.messageRef},r.createElement("div",{className:"WAC__received--inner"},T))),k&&r.createElement("div",{className:"WAC__sent-container"},r.createElement("div",{className:f("WAC__sentAndMessageState-container","WAC__message-vertical-padding",{"WAC__sentAndMessageState--belowMessage":O?.showBelowMessage})},!O?.showBelowMessage&&O?.element,r.createElement("div",{className:"WAC__sent"},r.createElement(lr,null,s.messages_youSaid),r.createElement("div",{className:"WAC__sent--bubble"},r.createElement("div",{ref:this.messageRef},T))),O?.showBelowMessage&&O?.element))))}}function Ml(e){switch(e){case null:case void 0:case pt.FROM_USER:case pt.RELOAD_WARNING:case pt.DISCONNECTED:case pt.FROM_HUMAN_AGENT:case pt.INLINE_ERROR:return!1;default:return!0}}var Il=$r((0,g.j4)(Al,{forwardRef:!0}));class Tl extends r.PureComponent{constructor(){super(...arguments),this.state={scrollHandleHasFocus:!1,scrollDown:!1},this.messageRefs=new Map,this.messagesContainerWithScrollingRef=r.createRef(),this.scrollHandleRef=r.createRef(),this.agentBannerRef=r.createRef(),this.shouldScrollToMessage=(e,t)=>!!t?.ui_state_internal?.from_history||(Ea(t)?!t?.history?.silent:!!pa(t)&&(this.renderScrollDownNotification(),!t?.history?.silent)),this.onResize=()=>{if(this.renderScrollDownNotification(),this.props.messageState.isScrollAnchored){const e=this.messagesContainerWithScrollingRef.current;e&&(e.scrollTop=e.scrollHeight)}this.doAutoScroll()},this.doAutoScroll=(0,M.A)((e={})=>{let t=e.preferAnimate||!1;try{const{scrollToTop:n,scrollToBottom:a}=e,{localMessageItems:s,messageState:i,allMessagesByID:r}=this.props,{isLoadingCounter:o}=i,{isHumanAgentTyping:c}=Wn(this.props),l=this.messagesContainerWithScrollingRef.current;if(void 0!==n)return void ir(l,n,0);if(void 0!==a){return void ir(l,l.scrollHeight-l.offsetHeight-a,0,t)}let d;const u=s.length-1,h=s.length?s[u]:null,g=r[h?.fullMessageID];if(h)if(o>0||c)d=l.scrollHeight;else{let e=s.length-1,t=s[e],n=this.messageRefs.get(t.ui_state.id);for(;e>=1;){t=s[e];const a=r[t?.fullMessageID];if(!(t?.fullMessageID===s[e-1]?.fullMessageID)&&this.shouldScrollToMessage(t,a)){n=this.messageRefs.get(t.ui_state.id),wl(`[doAutoScroll] lastScrollableMessageComponent=${e}`,s[e],a);break}e--}if(n){const e=n.ref.current?.offsetTop;d=e+20}else d=-1}else d=0;-1!==d&&d>=l.scrollTop&&(g?.ui_state_internal?.from_history&&(t=!1),ir(l,d,0),this.checkScrollAnchor(!0,d))}catch(e){}},100),this.getContainerScrollBottom=()=>{return e=this.messagesContainerWithScrollingRef?.current,e?e.scrollHeight-e.offsetHeight-e.scrollTop:0;var e},this.scrollElementIntoView=(e,t=8,n=8,a=!1)=>{const s=this.messagesContainerWithScrollingRef.current,i=s.getBoundingClientRect(),r=e.getBoundingClientRect(),o=r.top-i.top+s.scrollTop-t,c=r.bottom-i.top+s.scrollTop+n,l=e.offsetHeight+t+n;o<s.scrollTop||l>s.offsetHeight?ir(s,o,0):c>s.scrollTop+s.offsetHeight&&ir(s,c-s.offsetHeight,0,a)},this.requestMoveFocus=(e,t)=>{if(e===bl.INPUT)this.props.requestInputFocus();else{const{localMessageItems:n}=this.props;let a;switch(e){case bl.LAST:a=n.length-1;break;case bl.NEXT:a=t+1,a>=n.length&&(a=0);break;case bl.PREVIOUS:a=t-1,a<0&&(a=n.length-1);break;default:a=0}const s=n[a],i=this.messageRefs.get(s?.ui_state.id);i&&i.requestHandleFocus()}}}componentDidMount(){this.scrollPanelObserver=new ResizeObserver(this.onResize),this.scrollPanelObserver.observe(this.messagesContainerWithScrollingRef.current),this.previousScrollOffsetHeight=this.messagesContainerWithScrollingRef.current.offsetHeight}componentDidUpdate(e){const t=this.props,n=e.localMessageItems.length!==t.localMessageItems.length,a=Wn(e),s=Wn(t),i=e.messageState.isLoadingCounter!==t.messageState.isLoadingCounter||a.isHumanAgentTyping!==s.isHumanAgentTyping;if(n||i){(ga(t.localMessageItems)!==ga(e.localMessageItems)||i)&&this.doAutoScroll()}}componentWillUnmount(){this.scrollPanelObserver.unobserve(this.messagesContainerWithScrollingRef.current)}checkScrollAnchor(e,t){const n=this.messagesContainerWithScrollingRef.current;if(e||this.previousScrollOffsetHeight===n.offsetHeight&&!this.props.suspendScrollDetection){const e=(void 0!==t?t:n.scrollTop)>=n.scrollHeight-n.offsetHeight;e!==this.props.messageState.isScrollAnchored&&this.props.serviceManager.store.dispatch(Hn.setChatMessagesStateProperty("isScrollAnchored",e))}this.previousScrollOffsetHeight=n.offsetHeight}requestHumanAgentBannerFocus(){return!!this.agentBannerRef.current&&this.agentBannerRef.current.requestFocus()}doScrollToMessage(e,t=!1){try{const{localMessageItems:n}=this.props;let a;for(let t=0;t<=n.length;t++){const s=n[t];if(s.fullMessageID===e){a=this.messageRefs.get(s.ui_state.id);break}}if(a){const e=this.messagesContainerWithScrollingRef.current,n=a.ref.current.offsetTop;ir(e,n,0,t),this.checkScrollAnchor(!0,n)}}catch(e){}}checkMessagesOutOfView(){const e=this.messagesContainerWithScrollingRef.current;return e.scrollHeight-e.scrollTop-e.clientHeight>60}renderScrollDownNotification(){const e=this.checkMessagesOutOfView();this.setState({scrollHandleHasFocus:!1,scrollDown:e})}getLastOutputMessageElements(){const{localMessageItems:e,allMessagesByID:t}=this.props,n=ga(e),a=t[n?.fullMessageID];if(pa(a)){const t=[];let n=!1;for(let s=e.length-1;s>=0;s--){const i=e[s],r=this.messageRefs.get(i?.ui_state.id);if(r){const{getLocalMessage:e}=r;if(e().fullMessageID===a.id){n=!0;const e=r.ref?.current;if(!e)break;t.push(e)}else if(n)break}}return t.reverse()}return[]}renderTypingIndicator(e,t){return r.createElement("div",{className:`WAC__message WAC__message-${t} WAC__message--lastMessage`},r.createElement("div",{className:"WAC__message--padding"},e&&r.createElement(yo,{message:e}),r.createElement("div",{className:"WAC__bot-message"},r.createElement("div",{className:"WAC__received WAC__received--loading WAC__message-vertical-padding"},r.createElement("div",{className:"WAC__received--inner"},r.createElement(Ur,{loop:!0,carbonTheme:this.props.carbonTheme}))))))}renderMessage(e,t,n,a,s,i,o,c){const{serviceManager:l,config:d,languagePack:u,requestInputFocus:h,persistedToBrowserStorage:g,botName:m,messageState:p,locale:E,botAvatarURL:_,carbonTheme:S,useAITheme:v}=this.props,y=$n(this.props),{isHumanAgentTyping:C}=Wn(this.props),{isLoadingCounter:b}=p,{chatState:A}=g,{disclaimersAccepted:M}=A;if(d.public.disclaimer?.is_on&&!M[window.location.hostname])return null;const I=this.props.localMessageItems.length+(b>0||C?1:0),T=f({"WAC__message--firstMessage":0===n,"WAC__message--lastMessage":n===I-1}),w=e.fullMessageID===c,N=e.ui_state.id,R=r.createElement(Il,{ref:e=>{e?this.messageRefs.set(N,e):this.messageRefs.delete(N)},className:T,config:d,localMessageItem:e,message:t,languagePack:u,requestInputFocus:h,serviceManager:l,messagesIndex:n,botName:m,disableUserInputs:y.isReadonly,isMessageForInput:s,showAvatarLine:i,botAvatarURL:_,requestMoveFocus:this.requestMoveFocus,doAutoScroll:this.doAutoScroll,scrollElementIntoView:this.scrollElementIntoView,isFirstMessageItem:i,isLastMessageItem:o,locale:E,carbonTheme:S,useAITheme:v,allowNewFeedback:w,hideFeedback:!1});return a?r.createElement(bo,{welcomeNodeBeforeElement:l.writeableElements[Ke.WELCOME_NODE_BEFORE_ELEMENT],key:N},R):r.createElement(r.Fragment,{key:N},R)}renderHumanAgentBanner(){return r.createElement(vo,{bannerRef:this.agentBannerRef,onButtonClick:this.props.onEndHumanAgentChat})}renderScrollHandle(e){const{languagePack:t}=this.props;let n;n=Le?e?"messages_scrollHandle":"messages_scrollHandleEnd":e?"messages_scrollHandleDetailed":"messages_scrollHandleEndDetailed";const a=Le?void 0:()=>this.requestMoveFocus(e?bl.FIRST:bl.LAST,0);return r.createElement("button",{type:"button",className:"WACMessages--scrollHandle",ref:this.scrollHandleRef,tabIndex:0,"aria-label":t[n]||t.messages_scrollHandle,onClick:a,onFocus:()=>this.setState({scrollHandleHasFocus:!0,...this.state}),onBlur:()=>this.setState({scrollHandleHasFocus:!1,...this.state})})}getMessageIDForUserInput(){const{localMessageItems:e,allMessagesByID:t}=this.props;for(let n=e.length-1;n>=0;n--){const a=e[n],s=t[a.fullMessageID];if(Ea(s)&&s?.history?.error_state!==bt.FAILED)return null;if(pa(s))return a.fullMessageID}return null}renderMessages(e){const{localMessageItems:t,allMessagesByID:n}=this.props,a=[],s=ga(t)?.fullMessageID;let i=null;for(let r=0;r<t.length;r++){const o=t[r],c=n[o.fullMessageID],l=e===o.fullMessageID,d=i!==o.fullMessageID,u=o.ui_state.isWelcomeResponse&&d,h=t.length-1===r||o.fullMessageID!==t[r+1].fullMessageID;i=o.fullMessageID,a.push(this.renderMessage(o,c,r,u,l,d,h,s))}return a}render(){const{localMessageItems:e,messageState:t,intl:n,botName:a,serviceManager:s,notifications:i,languagePack:o}=this.props,{isLoadingCounter:c}=t,{isHumanAgentTyping:l}=Wn(this.props),{scrollHandleHasFocus:d,scrollDown:u}=this.state,h=this.getMessageIDForUserInput(),g=this.renderMessages(h);let m;return l?m=n.formatMessage({id:"messages_agentIsTyping"}):c&&(m=n.formatMessage({id:"messages_botIsLoading"},{botName:a})),r.createElement("div",{id:`WACMessages--holder${s.namespace.suffix}`,className:"WACMessages--holder"},this.renderHumanAgentBanner(),r.createElement("div",{className:f("WACMessages__Wrapper",{"WACMessages__Wrapper--scrollHandleHasFocus":d})},r.createElement("div",{id:`WAC__messages${s.namespace.suffix}`,className:"WAC__messages",ref:this.messagesContainerWithScrollingRef,onScroll:()=>{this.checkScrollAnchor(),this.renderScrollDownNotification()}},this.renderScrollHandle(!0),g,(Boolean(c)||l)&&this.renderTypingIndicator(m,e.length),r.createElement(Ao,{serviceManager:s,notifications:i}),this.renderScrollHandle(!1),u&&r.createElement("button",{type:"button","aria-label":o.messages_scrollMoreButton,className:"WAC__messages--scrollDownIndicatorIcon",onClick:()=>this.doAutoScroll({scrollToBottom:0,preferAnimate:!0})},r.createElement(pe.d3G,null)))))}}function wl(e,...t){}var Nl=function(e){const t=r.forwardRef((t,n)=>{const a=(0,r.useContext)(nr);return r.createElement(e,{...t,ref:n,serviceManager:a})});return t.displayName=`withServiceManager(${e.displayName||e.name||"Component"})`,t}((0,E.Ng)(e=>e,null,null,{forwardRef:!0})(Tl));function Rl(){const e=Tt();return r.createElement("svg",{viewBox:"0 0 80 80"},r.createElement("defs",null,r.createElement("linearGradient",{id:`${e}-1`,x1:"38.91",y1:"4.92",x2:"38.91",y2:"73.85",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#262626"}),r.createElement("stop",{offset:"1",stopColor:"#393939"})),r.createElement("linearGradient",{id:`${e}-2`,x1:"12.44",y1:"71.21",x2:"76.34",y2:"34.31",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#525252"}),r.createElement("stop",{offset:"0.52",stopColor:"#393939"}),r.createElement("stop",{offset:"0.61",stopColor:"#393939"}),r.createElement("stop",{offset:"0.99",stopColor:"#161616"})),r.createElement("linearGradient",{id:`${e}-3`,x1:"39.38",y1:"50.63",x2:"52.04",y2:"72.55",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0.11",stopColor:"#6f6f6f",stopOpacity:"0"}),r.createElement("stop",{offset:"0.94",stopColor:"#6f6f6f"}))),r.createElement("rect",{width:"80",height:"80",fill:"none"}),r.createElement("polygon",{points:"59.91 78.34 16.91 53.51 21.77 50.7 64.77 75.53 59.91 78.34",opacity:"0.25",className:"error_message_isolate"}),r.createElement("path",{d:"M39,6.92c12.15,7,22,24,21.92,38S51,64.49,38.83,57.48s-22-24-21.92-38S26.83-.09,39,6.92Z",fill:`url(#${e}-1)`}),r.createElement("path",{d:"M42.85,4.68C36.74,1.15,31.2.82,27.2,3.15L23.54,5.28C27.52,3.08,33,3.45,39,6.92c12.15,7,22,24,21.92,38,0,6.77-2.35,11.58-6.13,13.94h-.07c-.32.2,3.66-2.1,3.66-2.1,4-2.3,6.39-7.18,6.41-14.12C64.81,28.7,55,11.69,42.85,4.68Z",fill:`url(#${e}-2)`}),r.createElement("path",{d:"M29.11,3.91v.36a19.59,19.59,0,0,1,9.68,3c12,6.94,21.78,23.84,21.74,37.65,0,9.4-4.56,15.23-11.83,15.23a19.59,19.59,0,0,1-9.68-3C27,50.21,17.24,33.32,17.28,19.5c0-9.39,4.56-15.23,11.83-15.23V3.91m0,0c-7.21,0-12.17,5.71-12.2,15.59,0,14,9.77,31,21.92,38a20.18,20.18,0,0,0,9.87,3c7.21,0,12.17-5.71,12.2-15.6C60.9,31,51.13,14,39,6.9a19.94,19.94,0,0,0-9.87-3Z",fill:`url(#${e}-3)`}),r.createElement("path",{className:"cls-6",d:"M38.93,49.79a6.83,6.83,0,0,1-2.66-2.51,6.19,6.19,0,0,1-.81-3v-1a2.26,2.26,0,0,1,.81-2c.54-.35,1.43-.17,2.66.54a6.67,6.67,0,0,1,2.61,2.5,6,6,0,0,1,.81,3v1a2.23,2.23,0,0,1-.81,2C41,50.66,40.13,50.49,38.93,49.79ZM37.77,38.16,36,22.77V13l5.81,3.36v9.73L40.17,39.55Z",fill:"#525252"}))}function kl(){const e=Tt();return r.createElement("svg",{viewBox:"0 0 80 80"},r.createElement("defs",null,r.createElement("linearGradient",{id:`${e}-1`,x1:"29.96",y1:"36.32",x2:"53.15",y2:"-3.84",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#525252",stopOpacity:"0.05"}),r.createElement("stop",{offset:"1",stopOpacity:"0.1"})),r.createElement("linearGradient",{id:`${e}-2`,x1:"38.91",y1:"29.41",x2:"38.91",y2:"78.7",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#c6c6c6"}),r.createElement("stop",{offset:"0.78",stopColor:"#e0e0e0"})),r.createElement("linearGradient",{id:`${e}-3`,x1:"18.08",y1:"67.95",x2:"71.65",y2:"37.02",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#e0e0e0"}),r.createElement("stop",{offset:"0.13",stopColor:"#f4f4f4"}),r.createElement("stop",{offset:"0.56",stopColor:"#e0e0e0"}),r.createElement("stop",{offset:"0.62",stopColor:"#d8d8d8"}),r.createElement("stop",{offset:"0.7",stopColor:"#c6c6c6"}),r.createElement("stop",{offset:"0.89",stopColor:"#a8a8a8"}),r.createElement("stop",{offset:"1",stopColor:"#8d8d8d"})),r.createElement("linearGradient",{id:`${e}-4`,x1:"27.93",y1:"30.78",x2:"49.86",y2:"68.76",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0.54",stopColor:"#d0d0d0",stopOpacity:"0"}),r.createElement("stop",{offset:"0.82",stopColor:"#f1f1f1",stopOpacity:"0.7"}),r.createElement("stop",{offset:"0.94",stopColor:"#fff"})),r.createElement("linearGradient",{id:`${e}-5`,x1:"28.67",y1:"55.68",x2:"47.16",y2:"45.01",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#fff"}),r.createElement("stop",{offset:"0.05",stopColor:"#fdfdfd"}),r.createElement("stop",{offset:"0.3",stopColor:"#f6f6f6"}),r.createElement("stop",{offset:"1",stopColor:"#f4f4f4"}))),r.createElement("rect",{width:"80",height:"80",fill:"none"}),r.createElement("polygon",{points:"59.91 78.34 16.91 53.51 21.77 50.7 64.77 75.53 59.91 78.34",fill:`url(#${e}-1)`}),r.createElement("path",{d:"M39,6.92c12.15,7,22,24,21.92,38S51,64.49,38.83,57.48s-22-24-21.92-38S26.83-.09,39,6.92Z",fill:`url(#${e}-2)`}),r.createElement("path",{d:"M42.85,4.68C36.74,1.15,31.2.82,27.2,3.15L23.54,5.28C27.52,3.08,33,3.45,39,6.92c12.15,7,22,24,21.92,38,0,6.77-2.35,11.58-6.13,13.94h-.07c-.32.2,3.66-2.1,3.66-2.1,4-2.3,6.39-7.18,6.41-14.12C64.81,28.7,55,11.69,42.85,4.68Z",fill:`url(#${e}-3)`}),r.createElement("path",{d:"M29.11,3.91v.36a19.59,19.59,0,0,1,9.68,3c12,6.94,21.78,23.84,21.74,37.65,0,9.4-4.56,15.23-11.83,15.23a19.59,19.59,0,0,1-9.68-3C27,50.21,17.24,33.32,17.28,19.5c0-9.39,4.56-15.23,11.83-15.23V3.91m0,0c-7.21,0-12.17,5.71-12.2,15.59,0,14,9.77,31,21.92,38a20.18,20.18,0,0,0,9.87,3c7.21,0,12.17-5.71,12.2-15.6C60.9,31,51.13,14,39,6.9a19.94,19.94,0,0,0-9.87-3Z",fill:`url(#${e}-4)`}),r.createElement("path",{d:"M38.93,49.79a6.83,6.83,0,0,1-2.66-2.51,6.19,6.19,0,0,1-.81-3v-1a2.26,2.26,0,0,1,.81-2c.54-.35,1.43-.17,2.66.54a6.67,6.67,0,0,1,2.61,2.5,6,6,0,0,1,.81,3v1a2.23,2.23,0,0,1-.81,2C41,50.66,40.13,50.49,38.93,49.79ZM37.77,38.16,36,22.77V13l5.81,3.36v9.73L40.17,39.55Z",fill:`url(#${e}-5)`}))}class xl extends T.WF{constructor(){super(...arguments),this.isLoaded=!1,this._handleOnError=()=>{this.onError?.()}}}xl.styles=T.AH`
    ${(0,T.iz)(".cds--aichat-chat-header-avatar{\n  display:block;\n  block-size:20px;\n  max-block-size:20px;\n}\n\n.cds--aichat-chat-header-avatar--round{\n  border-radius:10px;\n}")}
  `,It([(0,w.MZ)({type:String})],xl.prototype,"url",void 0),It([(0,w.MZ)({type:String})],xl.prototype,"corners",void 0),It([(0,w.MZ)({type:String})],xl.prototype,"alt",void 0),It([(0,w.MZ)({type:Object})],xl.prototype,"onError",void 0),It([(0,w.wk)()],xl.prototype,"isLoaded",void 0);const Ol="cds-aichat-chat-header-avatar";let Pl=class extends xl{render(){return function(e){const{url:t,corners:n,alt:a,onError:s}=e;return T.qy`
    <img
      class="${f(`${Lr}-chat-header-avatar`,{[`${Lr}-chat-header-avatar--round`]:n===Xe.ROUND})}"
      src="${t}"
      alt="${a}"
      @error="${s}"
    />
  `}(this)}};Pl=It([Dr(Ol)],Pl);var Dl=Pl;const Ll=(0,I.a)({tagName:Ol,elementClass:Dl,react:r});function Bl({id:e,className:t,label:n,isOpen:a,target:s,children:i,menuAlignment:o,containerRef:c}){return r.createElement(C.W1t,{id:e,className:t,open:a,target:s,label:n,size:"md",menuAlignment:o,mode:"full",legacyAutoalign:!1,containerRef:c},i)}function Hl(e){const[t,n]=(0,r.useState)(!1),{refs:a,context:s}=(0,Me.we)({open:t,onOpenChange:t=>{n(t),t?e.onOpen?.():e.onClose?.()}}),{getReferenceProps:i,getFloatingProps:o}=(0,Me.bv)([(0,Me.kp)(s),(0,Me.s9)(s)]),c=ol();return r.createElement("div",{ref:a.setReference,"aria-owns":c,...i()},r.createElement(C.$nd,{className:f("WACChatHeaderOverflowMenu__Button",e.className),size:Ss.MEDIUM,kind:_s.GHOST,onClick:()=>n(!t),tooltipPosition:e.tooltipPosition,renderIcon:e.renderIcon,onMouseDown:e=>e.preventDefault(),iconDescription:e.iconDescription,hasIconOnly:!0,"aria-label":e.ariaLabel,"aria-haspopup":!0,"aria-expanded":t,"aria-controls":c}),r.createElement(Bl,{id:c,label:e.ariaLabel,isOpen:t,target:a.floating.current,containerRef:e.containerRef,menuAlignment:e.menuAlignment},e.children),r.createElement("div",{ref:a.setFloating,className:"WACChatHeaderOverflowMenu__HostElement",...o()}))}let Wl=class extends T.WF{render(){return function(e){const{title:t,name:n}=e;return T.qy`<div class="WACChatHeaderTitle">
    <span className="WACChatHeaderTitle__Title" ?hidden="${!t}"
      >${t}</span
    >
    <span class="WACChatHeaderTitle__Name" ?hidden="${!n}">${n}</span>
  </div>`}(this)}};Wl.styles=T.AH`
    ${(0,T.iz)("cds-chat-header-title{\n  text-align:center;\n}\n\n.WACChatHeaderTitle{\n  overflow:hidden;\n  font-size:var(--cds-chat-BASE-font-size-med);\n  font-weight:400;\n  line-height:var(--cds-chat-BASE-line-height-med);\n  overflow-wrap:break-word;\n  text-overflow:ellipsis;\n  white-space:nowrap;\n  word-wrap:break-word;\n}\n\n.WACChatHeaderTitle .WACChatHeaderTitle__Title:only-child{\n  padding-inline-end:0.25rem;\n}\n\n.WACChatHeaderTitle__Name{\n  font-weight:var(--cds-chat-BASE-weight-semibold);\n}")}
  `,It([(0,w.MZ)({type:String})],Wl.prototype,"title",void 0),It([(0,w.MZ)({type:String})],Wl.prototype,"name",void 0),Wl=It([Dr(`${Br}-chat-header-title`)],Wl);const Ul=(0,I.a)({tagName:`${Br}-chat-header-title`,elementClass:Wl,react:r}),$l=(0,I.a)({tagName:"cds-custom-ai-label",elementClass:Ie.A,react:r});function Fl({onClick:e,buttonRef:t,label:n,className:a,children:s,buttonKind:i,isReversible:o=!0,tooltipAlignment:c,tooltipPosition:l,testId:d}){return r.createElement(C.$nd,{ref:t,className:f(a,{WACDirectionHasReversibleSVG:o}),onClick:e,hasIconOnly:!0,iconDescription:n,size:Ss.MEDIUM,kind:i||_s.GHOST,tooltipAlignment:c,tooltipPosition:l,"data-testid":d},s)}const zl=r.memo((0,r.forwardRef)(function(e,t){const{displayName:n,backContent:a,showRestartButton:s,showBackButton:i,useAITheme:o,labelBackButton:c,onClickClose:l,onClickRestart:d,onCloseAndRestart:u,onClickBack:h,overflowItems:g,overflowClicked:m,backButtonType:p,hideCloseButton:_,hideCloseAndRestartButton:S,brandColor:v="primary",enableChatHeaderConfig:y,headerAvatarConfig:A,testIdPrefix:M}=e,I=(0,r.useRef)(),T=(0,r.useRef)(),w=(0,r.useRef)(),N=(0,r.useRef)(),R=(0,r.useRef)(),k=ar(),x=fr(),O=(0,E.d4)(e=>e.config.public),P="rtl"===document.dir,D=(0,E.d4)(e=>e.chatHeaderState.config),[L,B]=(0,r.useState)(!1),[H,W]=(0,r.useState)(!1),[U,$]=(0,r.useState)(!1),F=Boolean(A)&&!U,z=(0,r.useContext)(Fe),q=_r(A?.url),{headerConfig:G}=O,V=y?D?.headerTitle?.title:void 0,j=(y?D?.headerTitle?.name:void 0)||n,Z=(0,r.useCallback)(()=>{W(!1)},[]),Y=G?.showCloseAndRestartButton&&!S&&u,K=G?.hideMinimizeButton||_;let X,Q=!1,J=!0;const ee=G?.minimizeButtonIconType;switch(ee){case it.CLOSE:X=r.createElement(_e.A,{className:"WACIcon__Close",size:16});break;case it.MINIMIZE:X=r.createElement(Ce.A,{className:"WACIcon__Subtract",size:16});break;case it.SIDE_PANEL_LEFT:J=!1,X=r.createElement(ye.A,{className:"WACIcon__SidePanelClose"});break;case it.SIDE_PANEL_RIGHT:J=!1,Q=!0,X=r.createElement(ye.A,{className:"WACIcon__SidePanelClose"});break;default:X=r.createElement(Ce.A,{className:"WACIcon__Subtract",size:16})}if(Y&&s)throw new Error("You cannot enable both the restart button and the close-and-restart buttons.");const te=(0,r.useCallback)(()=>{W(!1),u()},[u]);let ne;return(0,r.useImperativeHandle)(t,()=>({requestFocus:()=>N.current?(or(N,!1,!0),!0):I.current?(or(I,!1,!0),!0):!!T.current&&(or(T,!1,!0),!0)})),g?ne=r.createElement(Hl,{className:"WACHeader__OverflowMenu",renderIcon:L?b.A:ve.A,iconDescription:x.header_overflowMenu_options,ariaLabel:x.components_overflow_ariaLabel,containerRef:R,tooltipPosition:P?"left":"right",menuAlignment:"bottom-start",onOpen:()=>{setTimeout(()=>{B(!0)})},onClose:()=>{B(!1)}},g?.map((e,t)=>r.createElement(C.Drp,{key:e,label:e,onClick:()=>{or(R),m(t)}}))):i&&(ne=r.createElement(Fl,{className:"WACHeader__BackButton",label:c,onClick:h,buttonRef:I,buttonKind:p,tooltipPosition:P?"left":"right"},a||r.createElement(Se.A,null))),(0,r.useEffect)(()=>{U&&q!==A?.url&&$(!1)},[q,A?.url,U]),r.createElement("div",{className:f("WACHeader",`WAC--${v}Color`,{"WACHeader--withAvatar":F})},r.createElement("div",{className:f("WACHeader--content",`WAC--${v}Color`),"data-floating-menu-container":!0},ne&&r.createElement("div",{className:"WACHeader__Buttons WACHeader__LeftButtons"},ne),r.createElement("div",{className:"WACHeader__CenterContainer"},F&&r.createElement(Ll,{url:A.url,corners:A.corners,alt:x.header_ariaBotAvatar,onError:()=>$(!0)}),(V||j)&&r.createElement("div",{className:"WACHeader__TitleContainer"},r.createElement(Ul,{title:V,name:j}))),r.createElement("div",{className:"WACHeader__Buttons WACHeader__RightButtons"},o&&r.createElement($l,{className:"WACHeader__Slug",size:be.G.EXTRA_SMALL,alignment:P?Ae.U.BOTTOM_LEFT:Ae.U.BOTTOM_RIGHT},r.createElement("div",{slot:"body-text"},r.createElement("h4",{className:"WACHeader__Slug-title"},x.ai_slug_title),r.createElement("div",{className:"WACHeader__Slug-description"},r.createElement("div",null,x.ai_slug_description),!z&&r.createElement(Co,{slotName:Ke.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT,id:`aiTooltipAfterDescription${k.namespace.suffix}`})))),s&&r.createElement(Fl,{className:"WACHeader__RestartButton",label:x.buttons_restart,onClick:d,buttonRef:T,tooltipAlignment:P?"start":"end",tooltipPosition:"bottom"},r.createElement(fe.A,null)),!K&&r.createElement(Fl,{className:f("WACHeader__CloseButton",{WACReverseIcon:Q}),isReversible:J,label:x.launcher_isOpen,onClick:async()=>{l()},buttonRef:N,tooltipAlignment:P?"start":"end",tooltipPosition:"bottom",testId:yr(vr.CLOSE_CHAT,M)},X),Y&&r.createElement(Fl,{className:"WACHeader__CloseAndRestartButton",label:x.header_ariaCloseRestart,onClick:()=>W(!0),buttonRef:w,tooltipAlignment:P?"start":"end",tooltipPosition:"bottom"},r.createElement(_e.A,{className:"WACIcon__Close"}))),H&&r.createElement(Jo,{title:x.closeAndRestartModal_title,message:x.closeAndRestartModal_message,onConfirm:te,onCancel:Z,cancelButtonLabel:x.closeAndRestartModal_cancel,confirmButtonLabel:x.closeAndRestartModal_confirm,modalAnnounceMessage:x.closeAndRestartModal_message,serviceManager:k})))}));const ql=r.memo((0,r.forwardRef)(function(e,t){const{onClose:n,onCloseAndRestart:a,onRestart:s,onToggleHomeScreen:i,headerDisplayName:o,includeWriteableElement:c,enableChatHeaderConfig:l,headerAvatarConfig:d,testIdPrefix:u}=e,h=ar(),g=fr(),m=(0,E.d4)(e=>e.homeScreenConfig.is_on&&e.homeScreenConfig.allow_return),p=(0,E.d4)(e=>e.config.public),f=(0,E.d4)(e=>e.customMenuOptions),{isConnectingOrConnected:_}=(0,E.d4)(Wn,E.bN),S=(0,E.d4)(e=>e.theme.theme),v=(0,r.useRef)(),y=p.headerConfig?.showRestartButton,C=m&&!_,b=(0,r.useCallback)(e=>{if(0===e&&C)i?.();else{const{handler:t}=f[C?e-1:e];t()}},[f,i,C]);let A=f?.map(e=>e.text);return A&&C?A.splice(0,0,g.homeScreen_overflowMenuHomeScreen):!A&&C&&(A=[g.homeScreen_overflowMenuHomeScreen]),(0,r.useImperativeHandle)(t,()=>v.current),r.createElement("div",{className:"WACHeader__Container"},r.createElement(zl,{ref:v,headerAvatarConfig:d,displayName:o,showBackButton:Boolean(C&&i),showRestartButton:y,useAITheme:S===ot.CARBON_AI,backContent:r.createElement(Ee.A,null),labelBackButton:g.homeScreen_returnToHome,onClickRestart:s,onClickClose:n,onCloseAndRestart:a,onClickBack:i,overflowItems:A,overflowClicked:b,enableChatHeaderConfig:l,testIdPrefix:u}),c&&r.createElement(Co,{slotName:Ke.HEADER_BOTTOM_ELEMENT,id:`headerBottomElement${h.namespace.suffix}`,className:"WACHeader__HeaderBottomElement"}))}));const Gl=r.memo(function({onClose:e,languagePack:t,onRestart:n,showHeader:a,botName:s,headerDisplayName:i}){const o=(0,g.tz)(),c=(0,E.d4)(e=>e.theme.carbonTheme),l=c===rt.G90||c===rt.G100,d=o.formatMessage({id:"errors_communicating"},{botName:s});return r.createElement(r.Fragment,null,a&&r.createElement(ql,{headerDisplayName:i,onClose:e,onToggleHomeScreen:null,includeWriteableElement:!1,testIdPrefix:qe.CATASTROPHIC}),r.createElement("div",{className:f("WACCatastrophicError","WACPanelContent",{"WACCatastrophicError--withHeader":a})},r.createElement("div",{className:"WACCatastrophicError__ErrorTextContainer"},l&&r.createElement(Rl,null),!l&&r.createElement(kl,null),r.createElement("div",{className:"WACCatastrophicError__ErrorHeading"},t.errors_somethingWrong),r.createElement("div",{className:"WACCatastrophicError__ErrorBody"},r.createElement(Eo,{text:d})),n&&r.createElement(C.bJ3,{className:"WACCatastrophicError__RestartButton",kind:_s.TERTIARY,size:Ss.SMALL,"aria-label":t.buttons_restart,onClick:n,renderIcon:fe.A,type:"button"},t.buttons_retry))))}),Vl=(0,B.dI)(we.A);class jl extends T.WF{constructor(){super(...arguments),this._handleOnClick=()=>{this.onClick()}}}jl.styles=T.AH`
    ${(0,T.iz)(".cds--aichat-stop-icon svg{\n  padding-block-start:4px;\n}\n\n.cds--aichat-stop-icon--disabled svg{\n  fill:var(--cds-icon-disabled, rgba(22, 22, 22, 0.25));\n}")}
  `,It([(0,w.MZ)({type:String,attribute:"label"})],jl.prototype,"label",void 0),It([(0,w.MZ)({type:String,attribute:"tooltip-alignment"})],jl.prototype,"tooltipAlignment",void 0),It([(0,w.MZ)({type:Boolean,attribute:"disabled"})],jl.prototype,"disabled",void 0),It([(0,w.MZ)({type:Object})],jl.prototype,"onClick",void 0);let Zl=class extends jl{render(){return function({label:e,disabled:t,tooltipAlignment:n,onClick:a}){return T.qy`
    <cds-custom-icon-button
      class="${Lr}-stop-streaming-button"
      align="${n}"
      kind="${_s.GHOST}"
      size="${Ss.SMALL}"
      ?disabled=${t}
      @click="${a}"
    >
      <span slot="icon">
        <span
          class="${Lr}-stop-icon ${t?"${CSS_CLASS_PREFIX}-stop-icon--disabled":""}"
          >${(0,W.T)(Vl)}</span
        >
      </span>
      <span slot="tooltip-content">${e}</span>
    </cds-custom-icon-button>
  `}(this)}};Zl=It([Dr("cds-aichat-stop-streaming-button")],Zl);var Yl=Zl;const Kl=(0,I.a)({tagName:"cds-aichat-stop-streaming-button",elementClass:Yl,react:r});class Xl{constructor(){this.listeners=[]}addListener(e){this.listeners=[...this.listeners,e]}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}fireListeners(...e){this.listeners.length&&this.listeners.forEach(t=>t(...e))}}class Ql extends r.PureComponent{constructor(){super(...arguments),this.textAreaRef=r.createRef()}getHTMLElement(){return this.textAreaRef.current}takeFocus(){or(this.textAreaRef,!1,!0)}doBlur(){this.textAreaRef.current.blur()}render(){const{isRequired:e,name:t,id:n,onFocus:a,onBlur:s,onClick:i,onChange:o,onKeyDown:c,rows:l,value:d,autoSize:u,maxLength:h,disabled:g,placeholder:m,ariaLabel:p,testId:E,onSelect:_}=this.props;return r.createElement("div",{className:f("WAC__TextArea",{"WAC__TextArea--autoSize":u,"WAC__TextArea--disabled":g})},r.createElement("textarea",{ref:this.textAreaRef,"aria-label":p,"aria-required":e,className:"WAC__TextArea-textarea",disabled:g,id:n||E,maxLength:h,name:t,onFocus:a,onBlur:s,onClick:i,onChange:o,onKeyDown:c,onSelect:_,placeholder:m,rows:l,value:d||"","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false","data-testid":E}),u&&r.createElement("div",{className:"WAC__TextArea-sizer"},d||m||" "))}}Ql.defaultProps={isRequired:!1,maxLength:1e4};const Jl=r.memo((0,r.forwardRef)(function(e,t){const{isInputVisible:n,placeholder:a,disableInput:s,disableSend:i,disableUploadButton:o,pendingUploads:c,allowedFileUploadTypes:l,allowMultipleFileUploads:d,showUploadButton:u,onFilesSelectedForUpload:h,onSendInput:g,blurOnSend:m,serviceManager:p,onUserTyping:E,languagePack:_,isStopStreamingButtonVisible:S,isStopStreamingButtonDisabled:v,testIdPrefix:y}=e,b=`${p.namespace.suffix}-${Hc()}`,[A,M]=(0,r.useState)(!1),[I,T]=(0,r.useState)(""),w=(0,r.useRef)(!0),N=(0,r.useRef)(null),R=(0,r.useRef)(),k=(0,r.useRef)(),x=(0,r.useRef)(new Xl),O=(0,r.useRef)(""),P=(0,r.useRef)({getHTMLElement:()=>R?.current?.getHTMLElement(),setValue:e=>T(e),setEnableEnterKey:e=>{w.current=e},addChangeListener:e=>x.current.addListener(e),removeChangeListener:e=>x.current.removeListener(e)});function D(){N.current&&(clearTimeout(N.current),N.current=null,E?.(!1))}function L(e){if(H()){e.preventDefault(),D();const t=I.trim();g(t),T(""),m?R.current.doBlur():R.current.takeFocus()}}function B(){!Le&&n&&R.current.takeFocus()}function H(){const e=Boolean(c?.length);return(!e||!c.find(e=>!function(e){return e.status===Ve.EDIT&&!e.isError}(e)))&&(Boolean(I.trim())||e)}A&&s&&M(!1),(0,r.useImperativeHandle)(t,()=>({takeFocus:B,getMessageInput:()=>P.current}));const{input_buttonLabel:W,input_placeholder:U,input_ariaLabel:$,input_uploadButtonLabel:F,input_stopResponse:z}=_,q=s?"":I,V=H(),j=!V||s||i,Z=o||s,Y=`WACInputContainer__UploadInput-${b}`,K="rtl"===document.dir,X=a||(s?void 0:U);return O.current!==I&&(O.current=I,x.current.fireListeners(I)),n&&r.createElement("div",{className:"WACInputAndCompletions"},r.createElement("div",{className:f("WACInputContainer",{"WACInputContainer--hasFocus":A,"WACInputContainer--showUploadButton":u})},r.createElement("div",{className:"WACInputContainer__LeftContainer"},r.createElement("div",{className:"WACInputContainer__TextAndUpload"},u&&r.createElement("div",{className:"WACInputContainer__UploadButtonContainer"},r.createElement("input",{ref:k,accept:l,id:Y,className:"WACVisuallyHidden WACInputContainer__UploadInput",type:"file","aria-label":F,onChange:function(e){const t=Un(p.store.getState()),{dispatch:n}=p.store,{files:a}=e.target,s=[];for(let e=0;e<a.length;e++){const i={id:Tt(At.FILE),status:Ve.EDIT,file:a[e]};s.push(i),n(Hn.addInputFile(i,t))}h?.(s),k.current.value=null},multiple:d,disabled:Z}),r.createElement("label",{className:f("WACInputContainer__UploadButton",{"WACInputContainer__UploadButton--disabled":Z}),htmlFor:Y},r.createElement(G.A,null))),r.createElement(Ql,{autoSize:!0,ariaLabel:$,disabled:s,maxLength:2048,onChange:function(e){const t=e.target.value;E&&(N.current?clearTimeout(N.current):E(!0),N.current=setTimeout(D,5e3)),T(t)},onKeyDown:function(e){(function(e){return"Enter"===e.key&&!function(e){return e.shiftKey||e.altKey||e.metaKey||e.ctrlKey}(e)&&!(e.isComposing||229===e.keyCode)})(e)&&(i||!w.current?e.preventDefault():L(e))},placeholder:X,value:q,ref:R,onFocus:function(){M(!0)},onBlur:function(){M(!1)},testId:yr(vr.INPUT,y)})),Boolean(c?.length)&&r.createElement("div",{className:"WACInputContainer__FilesContainer"},c.map((e,t)=>r.createElement(C.ssm,{key:t,iconDescription:_.fileSharing_removeButtonTitle,name:e.file.name,status:Ve.EDIT,errorSubject:e.errorMessage,invalid:e.isError,size:Ss.SMALL,onDelete:()=>function(e){const t=Un(p.store.getState());p.store.dispatch(Hn.removeFileUpload(e,t)),R.current.takeFocus()}(e.id)})))),r.createElement("div",{className:"WACInputContainer__SendButtonContainer"},S&&r.createElement(Kl,{label:z,disabled:v,tooltipAlignment:"top",onClick:()=>{const{store:e}=p;e.dispatch(Hn.setStopStreamingButtonDisabled(!0)),p.fire({type:Qe.STOP_STREAMING})}}),r.createElement(C.$nd,{className:"WACInputContainer__SendButton",kind:_s.GHOST,size:Ss.SMALL,type:"button",onClick:L,"aria-label":W,disabled:j,renderIcon:V?Te.A:ae.A,iconDescription:W,tooltipAlignment:K?"start":"end",tooltipPosition:"top",hasIconOnly:!0,"data-testid":yr(vr.INPUT_SEND,y)}))))}));function ed(){const e=ar(),t=fr(),n=t.agent_sharingRequestTitle,a=t.agent_sharingRequestMessage,s=t.agent_sharingDeclineButton,i=t.agent_sharingAcceptButton;return r.createElement(Jo,{title:n,message:a,onConfirm:()=>{e.humanAgentService?.screenShareUpdateRequestState(dt.ACCEPTED)},onCancel:()=>{e.humanAgentService?.screenShareUpdateRequestState(dt.DECLINED)},cancelButtonLabel:s,confirmButtonLabel:i,modalAnnounceMessage:a,serviceManager:e})}class td extends r.Component{constructor(){super(...arguments),this.state={showEndChatConfirmation:!1,hasCaughtError:!1},this.inputRef=r.createRef(),this.headerRef=r.createRef(),this.messagesRef=r.createRef(),this.messagesToArray=Ne((e,t)=>e.map(e=>t[e]),Re),this.hideConfirmEndChat=()=>{this.setState({showEndChatConfirmation:!1}),setTimeout(()=>{this.requestInputFocus()})},this.showConfirmEndChat=()=>{this.setState({showEndChatConfirmation:!0})},this.confirmHumanAgentEndChat=()=>{this.hideConfirmEndChat(),this.props.serviceManager.humanAgentService.endChat(!0)},this.requestDefaultFocus=()=>{this.headerRef?.current?.requestFocus()||or(this.messagesRef.current?.scrollHandleRef)},this.requestInputFocus=()=>{const{agentDisplayState:e}=this.props;try{if(e.isConnectingOrConnected&&e.disableInput&&this.messagesRef.current.requestHumanAgentBannerFocus())return;if(this.inputRef.current)if(this.props.inputState.fieldVisible&&!this.shouldDisableInput())this.inputRef.current.takeFocus();else{(function(e){for(let t=0;t<e.length;t++)if(cr(e[t]))return!0;return!1})(this.messagesRef.current.getLastOutputMessageElements())||this.requestDefaultFocus()}else this.requestDefaultFocus()}catch(e){}},this.doAutoScroll=e=>{this.messagesRef.current?.doAutoScroll(e)},this.getMessagesScrollBottom=()=>this.messagesRef?.current?.getContainerScrollBottom(),this.onFilesSelectedForUpload=e=>{this.props.agentDisplayState.isConnectingOrConnected&&(this.props.serviceManager.humanAgentService.filesSelectedForUpload(e),this.props.inputState.allowMultipleFileUploads||this.requestInputFocus())}}async scrollOnHydrationComplete(){this.doAutoScroll()}componentDidMount(){this.props.isHydrationAnimationComplete&&setTimeout(()=>{this.scrollOnHydrationComplete()})}componentDidUpdate(e){const{isHydrationAnimationComplete:t,humanAgentState:n}=this.props;t&&!e.isHydrationAnimationComplete&&setTimeout(()=>{this.scrollOnHydrationComplete()});const a=n.isConnecting!==e.humanAgentState.isConnecting;this.state.showEndChatConfirmation&&a&&this.hideConfirmEndChat()}componentDidCatch(e,t){this.props.serviceManager.actions.errorOccurred(ea("Chat",e,t)),this.setState({hasCaughtError:!0})}doScrollToMessage(e,t=!0){this.messagesRef.current?.doScrollToMessage(e,t)}getMessageInput(){return this.inputRef.current?.getMessageInput()}shouldDisableInput(){return this.props.inputState.isReadonly||this.props.agentDisplayState.disableInput}shouldDisableSend(){const{isHydrated:e}=this.props;return this.shouldDisableInput()||!e}renderMessagesAndInput(){const{languagePack:e,messageState:t,intl:n,allMessageItemsByID:a,isHydrated:s,serviceManager:i,inputState:o,onUserTyping:c,humanAgentState:l,botName:d,onSendInput:u,locale:h,useAITheme:g,carbonTheme:m,agentDisplayState:p}=this.props,{fieldVisible:f,files:E,allowFileUploads:_,allowedFileUploadTypes:S,allowMultipleFileUploads:v,stopStreamingButtonState:y}=o,{fileUploadInProgress:C}=l,{inputPlaceholderKey:b}=p,A=((E?.length??0)>0||C)&&!v;return r.createElement(r.Fragment,null,s&&r.createElement("div",{className:"WACMessagesContainer__NonInputContainer"},r.createElement(Nl,{ref:this.messagesRef,messageState:t,localMessageItems:this.messagesToArray(t.localMessageIDs,a),requestInputFocus:this.requestInputFocus,botName:d,intl:n,onEndHumanAgentChat:this.showConfirmEndChat,locale:h,useAITheme:g,carbonTheme:m})),r.createElement(Co,{slotName:Ke.BEFORE_INPUT_ELEMENT,id:`beforeInputElement${i.namespace.suffix}`}),r.createElement(Jl,{ref:this.inputRef,languagePack:e,serviceManager:i,disableInput:this.shouldDisableInput(),disableSend:this.shouldDisableSend(),isInputVisible:f,onSendInput:u,onUserTyping:c,showUploadButton:_,disableUploadButton:A,allowedFileUploadTypes:S,allowMultipleFileUploads:v,pendingUploads:E,onFilesSelectedForUpload:this.onFilesSelectedForUpload,placeholder:e[b],isStopStreamingButtonVisible:y.isVisible,isStopStreamingButtonDisabled:y.isDisabled,testIdPrefix:qe.MAIN}),this.state.showEndChatConfirmation&&r.createElement(ec,{onConfirm:this.confirmHumanAgentEndChat,onCancel:this.hideConfirmEndChat}),this.props.humanAgentState.showScreenShareRequest&&r.createElement(ed,null))}render(){const{languagePack:e,onClose:t,onCloseAndRestart:n,onRestart:a,onToggleHomeScreen:s,botName:i,headerDisplayName:o,headerAvatarConfig:c}=this.props,{hasCaughtError:l}=this.state;return r.createElement("div",{className:"WAC"},r.createElement(ql,{ref:this.headerRef,onClose:t,onCloseAndRestart:n,onRestart:a,headerDisplayName:o,headerAvatarConfig:c,onToggleHomeScreen:s,enableChatHeaderConfig:!0,includeWriteableElement:!0,testIdPrefix:qe.MAIN}),r.createElement(nd,null),r.createElement("div",{className:"WACPanelContent WAC__ChatNonHeaderContainer"},l&&r.createElement("div",{className:"WAC__MessagesErrorHandler"},r.createElement(Gl,{languagePack:e,onRestart:a,showHeader:!1,botName:i,headerDisplayName:o})),!l&&r.createElement("div",{className:"WAC__messagesAndInputContainer"},this.renderMessagesAndInput())))}}function nd(){return(0,E.d4)(e=>e.showNonHeaderBackgroundCover)?r.createElement("div",{className:"WACBackgroundCover WACBackgroundCover__NonHeader"}):null}var ad=(0,g.j4)(td,{forwardRef:!0});const sd=r.memo((0,r.forwardRef)(function(e,t){const{brandColor:n,onClose:a,onRestart:s,onCloseAndRestart:i}=e,o=(0,E.d4)(e=>e.config.public.headerConfig?.showRestartButton),c=(0,E.d4)(e=>e.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot),l=(0,E.d4)(e=>e.headerDisplayName),d=(0,E.d4)(e=>e.customMenuOptions),u=(0,E.d4)(e=>e.theme.theme),h=(0,r.useRef)();(0,r.useImperativeHandle)(t,()=>h.current);const g=!c,m=(0,r.useCallback)(e=>{const{handler:t}=d[e];t()},[d]),p=d?.map(e=>e.text);return r.createElement("div",{className:"WACHomeScreenHeader"},r.createElement(zl,{ref:h,displayName:l,showRestartButton:o,hideCloseAndRestartButton:g,onClickRestart:s,onClickClose:a,onCloseAndRestart:i,overflowClicked:m,overflowItems:p,useAITheme:u===ot.CARBON_AI,brandColor:n,testIdPrefix:qe.HOME_SCREEN}))}));function id({onClose:e,languagePack:t,isHydrated:n,headerDisplayName:a,useHomeScreenVersion:s}){const i=(0,r.useContext)(Fe);let o;return o=s?r.createElement(sd,{onClose:e}):r.createElement(ql,{onClose:e,headerDisplayName:a,onToggleHomeScreen:null,includeWriteableElement:!1,testIdPrefix:qe.HYDRATING}),r.createElement("div",{className:"WAC WAC__hydratingContainer"},o,r.createElement("div",{className:f("WAC__hydrating","WACPanelContent",{"WAC__hydrating--homeScreen":s})},!i&&r.createElement(Yc,{delay:400},!n&&r.createElement(zr,{announceOnce:t.window_ariaWindowLoading}),r.createElement(C.Rhj,{withOverlay:!1,"aria-label":t.window_ariaWindowLoading}))))}const rd=r.memo(r.forwardRef(function({className:e,children:t,isOpen:n,hidePanelHeader:a,labelBackButton:s,title:i,hideBackButton:o,useAITheme:c,onClickCloseAndRestart:l,onClickRestart:d,testIdPrefix:u,...h},g){const m=(0,E.d4)(e=>e.config.public.headerConfig?.showRestartButton),p=(0,r.useRef)();return(0,r.useImperativeHandle)(g,()=>p.current),r.createElement(A,{active:n,focusTrapOptions:{clickOutsideDeactivates:!0,returnFocusOnDeactivate:!Le,preventScroll:!0}},r.createElement("div",{className:e},!a&&r.createElement(zl,{...h,ref:p,showRestartButton:m,onClickRestart:d,onCloseAndRestart:l,showBackButton:!o,labelBackButton:s,displayName:i,useAITheme:c,testIdPrefix:u}),r.createElement("div",{className:"WACPanelContent"},t)))}));function od(e){if(e){const e="You are attempting to close Carbon AI Chat from a custom panel while Carbon AI Chat is currently running a view change event which is not permitted. Please use the disableDefaultCloseAction option to disable this behavior for the custom panel and then use onClickClose to resolve your Promise that is handling the event; that Promise will allow you to close Carbon AI Chat.";throw new Error(e)}}const cd=r.memo(function(e){const{useAITheme:t,onPanelOpenEnd:n,onPanelCloseEnd:i,onPanelOpenStart:o,onPanelCloseStart:c,onClose:l,onCloseAndRestart:d,onClickRestart:u}=e,h=fr(),{isOpen:g,options:m}=(0,E.d4)(e=>e.customPanelState),{title:p,hidePanelHeader:f,disableDefaultCloseAction:_,disableAnimation:S,onClickBack:v,onClickClose:y,onClickCloseAndRestart:C}=m,b=ar(),A=Ir(),M=_r(g),I=S?a.NONE:a.SLIDE_IN_FROM_BOTTOM,T=S?s.NONE:s.SLIDE_OUT_TO_BOTTOM;(0,r.useEffect)(()=>{M!==g&&g&&!f&&p&&A(p)},[A,f,g,M,p]);const w=(0,r.useCallback)(()=>{b.store.dispatch(Hn.setCustomPanelOpen(!1)),v?.()},[b,v]),N=(0,r.useCallback)(()=>{_||(od(b.store.getState().viewChanging),l()),y?.()},[_,y,l,b]),R=(0,r.useCallback)(()=>{_||(od(b.store.getState().viewChanging),d()),C?.()},[_,C,d,b]);return r.createElement(Ge,{className:"WAC__overlay--covering",onOpenStart:()=>{b.eventBus.fire({type:Qe.CUSTOM_PANEL_PRE_OPEN},b.instance),o()},onOpenEnd:()=>{b.eventBus.fire({type:Qe.CUSTOM_PANEL_OPEN},b.instance),n()},onCloseStart:()=>{b.eventBus.fire({type:Qe.CUSTOM_PANEL_PRE_CLOSE},b.instance),c()},onCloseEnd:()=>{b.eventBus.fire({type:Qe.CUSTOM_PANEL_CLOSE},b.instance),i(),b.store.dispatch(Hn.setCustomPanelConfigOptions(ys))},animationOnOpen:I,animationOnClose:T,shouldOpen:g,serviceManager:b,overlayPanelName:qe.CUSTOM},r.createElement(rd,{className:"WACCustomPanel",eventName:"Custom panel opened",eventDescription:"A user opened a custom panel.",labelBackButton:h.general_returnToAssistant,isOpen:g,title:p,useAITheme:t,onClickBack:w,onClickClose:N,onClickCloseAndRestart:R,onClickRestart:u,hidePanelHeader:f,hideBackButton:m.hideBackButton,hideCloseButton:m.hideCloseButton,hideCloseAndRestartButton:m.hideCloseAndRestartButton,testIdPrefix:qe.CUSTOM},r.createElement(Co,{slotName:"customPanelElement",className:"WACCustomPanel__ContentContainer"})))});function ld(){const e="cbl-";return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 80 80"},r.createElement("defs",null,r.createElement("linearGradient",{id:`${e}-a`,x1:30.047,x2:35.499,y1:54.31,y2:54.31,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#393939"}),r.createElement("stop",{offset:1,stopColor:"#262626"})),r.createElement("linearGradient",{id:`${e}-b`,x1:28.608,x2:70.691,y1:-3.968,y2:68.921,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#6f6f6f"}),r.createElement("stop",{offset:.19,stopColor:"#6c6c6c"}),r.createElement("stop",{offset:.316,stopColor:"#636363"}),r.createElement("stop",{offset:.423,stopColor:"#555"}),r.createElement("stop",{offset:.518,stopColor:"#3f3f3f"}),r.createElement("stop",{offset:.545,stopColor:"#383838"}),r.createElement("stop",{offset:1,stopColor:"#262626"})),r.createElement("linearGradient",{id:`${e}-c`,x1:15.125,x2:60.902,y1:36.198,y2:36.198,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#525252"}),r.createElement("stop",{offset:1,stopColor:"#393939"})),r.createElement("linearGradient",{id:`${e}-d`,x1:15.14,x2:63.056,y1:5.723,y2:33.517,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.777,stopColor:"#8d8d8d"}),r.createElement("stop",{offset:.806,stopColor:"#8a8a8a",stopOpacity:.967}),r.createElement("stop",{offset:.839,stopColor:"gray",stopOpacity:.872}),r.createElement("stop",{offset:.873,stopColor:"#6f6f6f",stopOpacity:.713}),r.createElement("stop",{offset:.908,stopColor:"#595959",stopOpacity:.491}),r.createElement("stop",{offset:.944,stopColor:"#3b3b3b",stopOpacity:.209}),r.createElement("stop",{offset:.967,stopColor:"#262626",stopOpacity:0}))),r.createElement("path",{d:"m15.129 52.11 45.498 26.279 4.248-2.507-45.473-26.255-4.273 2.483z",opacity:.25}),r.createElement("path",{fill:`url(#${e}-a)`,d:"m32.663 52.846-2.258 4.227a1.138 1.138 0 0 1-.358.35l2.837-1.649a1.148 1.148 0 0 0 .358-.35L35.5 51.2Z"}),r.createElement("path",{fill:`url(#${e}-b)`,d:"M63.454 26.582 20.631 1.858a1.006 1.006 0 0 0-1.014-.1l-3.973 2.3a1.006 1.006 0 0 1 1.014.1l42.823 24.725a3.148 3.148 0 0 1 1.419 2.462l-.1 36.084a1 1 0 0 1-.419.907l3.973-2.3a1 1 0 0 0 .419-.907l.1-36.084a3.145 3.145 0 0 0-1.419-2.463Z"}),r.createElement("path",{fill:`url(#${e}-c)`,d:"M59.481 28.883a3.151 3.151 0 0 1 1.419 2.462l-.1 36.084c-.009.9-.647 1.26-1.424.812l-26.695-15.4-2.257 4.226a.9.9 0 0 1-1.333.273 3.086 3.086 0 0 1-1.224-1.527l-2.322-7.092-9-5.2a3.143 3.143 0 0 1-1.421-2.461l.1-36.084c0-.9.641-1.272 1.431-.816Z"}),r.createElement("path",{fill:"#6f6f6f",d:"m57.995 37.068-.011 3.902-39.952-23.066.011-3.902 39.952 23.066zM57.995 45.114l-.011 3.903-39.952-23.066.011-3.903 39.952 23.066zM44.62 45.041l-.011 3.902-26.577-15.344.011-3.902L44.62 45.041z"}),r.createElement("path",{fill:`url(#${e}-d)`,d:"M60.756 30.548a2.507 2.507 0 0 1 .146.8l-.011 3.952a3.98 3.98 0 0 1 .413-.125l.011-3.826a3.541 3.541 0 0 0-1.628-2.821L16.864 3.8a1.976 1.976 0 0 0-.445-.192l-.775.45c.006 0 .015 0 .021-.008a.722.722 0 0 1 .188-.071h.015a.822.822 0 0 1 .151-.015h.101a1.087 1.087 0 0 1 .233.051c.014 0 .027.01.041.015a1.654 1.654 0 0 1 .264.121l21.411 12.37 21.412 12.362a3.155 3.155 0 0 1 1.275 1.665Z"}))}function dd(){const e="cbl-";return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 80 80",className:"chat-bubble-light"},r.createElement("defs",null,r.createElement("linearGradient",{id:`${e}-a`,x1:61.44,x2:61.44,y1:66.99,y2:60.01,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#c6c6c6"}),r.createElement("stop",{offset:.78,stopColor:"#e0e0e0"})),r.createElement("linearGradient",{id:`${e}-b`,x1:28.49,x2:53.04,y1:44.06,y2:86.58,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#525252",stopOpacity:.05}),r.createElement("stop",{offset:1,stopOpacity:.1})),r.createElement("linearGradient",{id:`${e}-c`,x1:30.05,x2:35.5,y1:54.31,y2:54.31,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#a4a4a4"}),r.createElement("stop",{offset:1,stopColor:"#bebebe"})),r.createElement("linearGradient",{id:`${e}-d`,x1:28.61,x2:70.69,y1:-3.97,y2:68.92,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#f4f4f4"}),r.createElement("stop",{offset:.52,stopColor:"#e0e0e0"}),r.createElement("stop",{offset:.56,stopColor:"#d8d8d8"}),r.createElement("stop",{offset:.61,stopColor:"#c6c6c6"}),r.createElement("stop",{offset:.89,stopColor:"#a8a8a8"}),r.createElement("stop",{offset:.96,stopColor:"#8d8d8d"})),r.createElement("linearGradient",{xlinkHref:`#${e}-a`,id:`${e}-e`,x1:38.01,x2:38.01,y1:59.43,y2:3.27}),r.createElement("linearGradient",{id:`${e}-f`,x1:21.52,x2:61.39,y1:36.2,y2:36.2,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#e0e0e0"}),r.createElement("stop",{offset:1,stopColor:"#c6c6c6"})),r.createElement("linearGradient",{id:`${e}-h`,x1:17.68,x2:55.37,y1:15.75,y2:37.5,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:0,stopColor:"#fff"}),r.createElement("stop",{offset:.05,stopColor:"#fdfdfd"}),r.createElement("stop",{offset:.3,stopColor:"#f6f6f6"}),r.createElement("stop",{offset:1,stopColor:"#f4f4f4"})),r.createElement("linearGradient",{xlinkHref:`#${e}-h`,id:`${e}-i`,x1:14.24,x2:51.92,y1:21.81,y2:43.56}),r.createElement("linearGradient",{xlinkHref:`#${e}-h`,id:`${e}-j`,x1:10.96,x2:48.66,y1:27.56,y2:49.33}),r.createElement("linearGradient",{id:`${e}-k`,x1:15.14,x2:63.06,y1:5.72,y2:33.52,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.78,stopColor:"#fff"}),r.createElement("stop",{offset:.8,stopColor:"#fefefe",stopOpacity:.98}),r.createElement("stop",{offset:.82,stopColor:"#fcfcfc",stopOpacity:.93}),r.createElement("stop",{offset:.85,stopColor:"#f8f8f8",stopOpacity:.84}),r.createElement("stop",{offset:.87,stopColor:"#f2f2f2",stopOpacity:.72}),r.createElement("stop",{offset:.9,stopColor:"#eaeaea",stopOpacity:.56}),r.createElement("stop",{offset:.93,stopColor:"#e1e1e1",stopOpacity:.37}),r.createElement("stop",{offset:.95,stopColor:"#d7d7d7",stopOpacity:.14}),r.createElement("stop",{offset:.97,stopColor:"#d0d0d0",stopOpacity:0}))),r.createElement("path",{d:"M0 0h80v80H0z",className:"chat-bubble-light__background"}),r.createElement("path",{d:"M61.3 68.11a.67.67 0 0 0 .09-.14.67.67 0 0 1-.09.14Zm.22-.46a1.58 1.58 0 0 0 0-.32v-7.24 7.24a1.58 1.58 0 0 1 0 .32Zm-.09.26a1.18 1.18 0 0 0 .07-.2 1.18 1.18 0 0 1-.07.2Z",className:"chat-bubble-light__gradient-a"}),r.createElement("path",{d:"m15.13 52.11 45.5 26.28 4.25-2.51L19.4 49.63l-4.27 2.48z",className:"chat-bubble-light__gradient-b"}),r.createElement("path",{d:"m32.66 52.85-2.25 4.22a1.08 1.08 0 0 1-.36.35l2.83-1.65a1.08 1.08 0 0 0 .36-.35l2.26-4.22Z",className:"chat-bubble-light__gradient-c"}),r.createElement("path",{d:"M63.45 26.58 20.63 1.86a1 1 0 0 0-1-.1l-4 2.3a1 1 0 0 1 1 .1l42.85 24.72a3.17 3.17 0 0 1 1.42 2.47l-.1 36.08a1 1 0 0 1-.42.91l4-2.3a1 1 0 0 0 .42-.91L64.88 29a3.14 3.14 0 0 0-1.43-2.42Z",className:"chat-bubble-light__gradient-d"}),r.createElement("path",{d:"M59.48 28.88a3.17 3.17 0 0 1 1.42 2.47l-.1 36.08c0 .9-.65 1.26-1.42.81l-26.7-15.4-2.26 4.22a.9.9 0 0 1-1.33.28 3.07 3.07 0 0 1-1.22-1.53l-2.33-7.09-9-5.2a3.15 3.15 0 0 1-1.43-2.46L15.23 5c0-.9.64-1.27 1.43-.81Z",className:"chat-bubble-light__gradient-e"}),r.createElement("path",{d:"M59.48 28.88a3.17 3.17 0 0 1 1.42 2.47l-.1 36.08c0 .9-.65 1.26-1.42.81l-26.7-15.4-2.26 4.22a.9.9 0 0 1-1.33.28 3.07 3.07 0 0 1-1.22-1.53l-2.33-7.09-9-5.2a3.15 3.15 0 0 1-1.43-2.46L15.23 5c0-.9.64-1.27 1.43-.81Z",className:"chat-bubble-light__gradient-f"}),r.createElement("path",{d:"M59.48 28.88a3.17 3.17 0 0 1 1.42 2.47l-.1 36.08c0 .9-.65 1.26-1.42.81l-26.7-15.4-2.26 4.22a.9.9 0 0 1-1.33.28 3.07 3.07 0 0 1-1.22-1.53l-2.33-7.09-9-5.2a3.15 3.15 0 0 1-1.43-2.46L15.23 5c0-.9.64-1.27 1.43-.81Z",className:"chat-bubble-light__gradient-e-duplicate"}),r.createElement("path",{d:"m57.99 37.07-.01 3.9L18.03 17.9l.01-3.9 39.95 23.07z",className:"chat-bubble-light__gradient-h"}),r.createElement("path",{d:"m57.99 45.11-.01 3.91-39.95-23.07.01-3.9 39.95 23.06z",className:"chat-bubble-light__gradient-i"}),r.createElement("path",{d:"m44.62 45.04-.01 3.9L18.03 33.6l.01-3.9 26.58 15.34z",className:"chat-bubble-light__gradient-j"}),r.createElement("path",{d:"M60.76 30.55a2.54 2.54 0 0 1 .14.8v3.95l.41-.13v-3.82a3.54 3.54 0 0 0-1.63-2.82L16.86 3.8a2.09 2.09 0 0 0-.44-.19l-.78.45a1 1 0 0 1 .21-.06h.48l.27.12 21.47 12.4 21.41 12.36a3.19 3.19 0 0 1 1.28 1.67Z",className:"chat-bubble-light__gradient-k"}))}const ud=r.memo((0,r.forwardRef)(function(e,t){const{useAITheme:n,onClose:a,testIdPrefix:s}=e,i=(0,r.useRef)();return(0,r.useImperativeHandle)(t,()=>i.current),r.createElement(zl,{ref:i,onClickClose:a,useAITheme:n,testIdPrefix:s})}));function hd({onAcceptDisclaimer:e,onClose:t,disclaimerHTML:n,disclaimerAcceptButtonRef:a}){const s=fr(),i=(0,E.d4)(e=>e.chatWidthBreakpoint),{carbonTheme:o,theme:c}=(0,E.d4)(e=>e.theme),l=o===rt.G90||o===rt.G100,[d,u]=(0,r.useState)(!1),h=(0,r.useRef)(),g=()=>{const{scrollTop:e,scrollHeight:t,clientHeight:n}=h.current;n-t+e>=0&&u(!0)};return Er(()=>{g()}),r.createElement("div",{className:"WACDisclaimerContainer"},r.createElement("div",{className:"WAC__disclaimer"},r.createElement(ud,{useAITheme:c===ot.CARBON_AI,onClose:t,testIdPrefix:qe.DISCLAIMER}),r.createElement("div",{className:"WACPanelContent WAC__disclaimer-content",onScroll:g,ref:h},r.createElement("div",{className:"WAC__disclaimer-icon"},l?r.createElement(ld,null):r.createElement(dd,null)),r.createElement("h1",{className:"WAC__disclaimer-title"},s.disclaimer_title),r.createElement("div",{dangerouslySetInnerHTML:{__html:n},className:"WAC__disclaimer-description"})),r.createElement("div",{className:"WAC__disclaimer-buttons"},r.createElement("div",{className:"WAC__disclaimer-buttonsPadding"},r.createElement(C.$nd,{className:"WAC__disclaimer-acceptButton",ref:a,onClick:e,size:i===Fn.WIDE?"2xl":"lg",disabled:!d},s.disclaimer_accept)))))}const gd=r.memo(function({homeScreenConfig:e,homeScreenMessageInputRef:t,onStarterClick:n,onSendInput:a,isHydrated:s,onClose:i,onCloseAndRestart:o,onRestart:c,onToggleHomeScreen:l}){const d=fr(),u=ar(),{showBackToBot:h}=(0,E.d4)(e=>e.persistedToBrowserStorage.chatState.homeScreenState),g=_r(s),m=(0,E.d4)(e=>e.theme.theme),p=u.writeableElements[Ke.HOME_SCREEN_AFTER_STARTERS_ELEMENT].hasChildNodes(),{greeting:_,starters:S,background:v,custom_content_only:y}=e,b=S?.is_on&&Boolean(S.buttons?.length),A=m!==ot.CARBON_AI&&v===st.SOLID,M=s&&!g;return r.createElement("div",{className:f("WACHomeScreen",{"WACHomeScreen--backgroundAITheme":m===ot.CARBON_AI,"WACHomeScreen--hydrationComplete":s,"WACHomeScreen--firstRender":M,"WACHomeScreen--backgroundSolid":A})},r.createElement(sd,{brandColor:A?Zn.ACCENT:Zn.PRIMARY,onRestart:c,onClose:i,onCloseAndRestart:o}),r.createElement(Co,{slotName:Ke.HOME_SCREEN_HEADER_BOTTOM_ELEMENT,className:"WACHomeScreen__HomeScreenBottomElement",id:`homeScreenHeaderBottomElement${u.namespace.suffix}`}),r.createElement("div",{className:"WACPanelContent WACHomeScreen__content"},r.createElement("div",{className:"WACHomeScreen__bodyWrapper"},r.createElement("div",{className:f("WACHomeScreen__body",{"WACHomeScreen__body--noCustomContent":!p,"WACHomeScreen__body--customContent":p,"WACHomeScreen__body--customContentOnly":y})},r.createElement("div",{className:"WACHomeScreen__initialContent"},!y&&r.createElement("div",{className:"WACHomeScreen__greeting"},_),!y&&b&&r.createElement("div",{className:f("WACHomeScreen__starters",{"WACHomeScreen__starters--animateGroup":S.buttons.length>5})},S.buttons.map((e,t)=>r.createElement(C.bJ3,{type:"button",size:Ss.SMALL,kind:_s.TERTIARY,isQuickAction:!0,key:t,className:"WACHomeScreen__starter",onClick:()=>n(e)},e.label))))),r.createElement("div",{className:f("WACHomeScreen__customContent",{"WACHomeScreen__customContent--customContentOnly":y,"WACHomeScreen__customContent--animation":(p||y)&&!A})},r.createElement(Co,{slotName:Ke.HOME_SCREEN_AFTER_STARTERS_ELEMENT,id:`homeScreenAfterStartersElement${u.namespace.suffix}`}))),r.createElement("div",{className:f("WACHomeScreen__inputContainerWrapper",{"WACHomeScreen__inputContainerWrapper--noCustomContent":!p&&!y})},h&&r.createElement(C.bJ3,{type:"button",size:Ss.SMALL,kind:_s.SECONDARY,className:"WACHomeScreen__backButton",onClick:l},r.createElement("span",{className:"WACHomeScreen__backButtonContent"},r.createElement("span",{className:"WACHomeScreen__backButtonContentText"},d.homeScreen_returnToAssistant),r.createElement(se.A,null))),r.createElement(Co,{slotName:Ke.HOME_SCREEN_BEFORE_INPUT_ELEMENT,id:`homeScreenBeforeInputElement${u.namespace.suffix}`}),r.createElement("div",{className:"WACHomeScreen__inputContainer"},r.createElement(Jl,{ref:t,onSendInput:a,disableInput:!1,isInputVisible:!0,disableSend:!1,languagePack:d,serviceManager:u,testIdPrefix:qe.HOME_SCREEN})))))});function md({onClose:e,onCloseAndRestart:t,onPanelCloseStart:n,onPanelOpenStart:i,onPanelCloseEnd:o,onPanelOpenEnd:c,onSendBotInput:l,onSendButtonInput:d,onRestart:u,showHomeScreen:h,isHydrationAnimationComplete:g,homeScreenInputRef:m,onToggleHomeScreen:p}){const f=ar(),_=(0,E.d4)(e=>e.homeScreenConfig),S=(0,E.d4)(e=>e.customPanelState.isOpen),v=_r(g),y=S,C=h&&g&&v,b=(0,r.useCallback)(e=>{l(e)},[l]),A=(0,r.useCallback)(e=>{d({label:e.label,value:{input:{text:e.label}}},ma)},[d]);return r.createElement(Ge,{onOpenStart:i,onOpenEnd:c,onCloseStart:n,onCloseEnd:o,animationOnOpen:C?a.FADE_IN:a.NONE,animationOnClose:s.FADE_OUT,shouldOpen:h,shouldHide:y,serviceManager:f,overlayPanelName:qe.HOME_SCREEN},r.createElement(gd,{isHydrated:g,homeScreenMessageInputRef:m,homeScreenConfig:_,onSendInput:b,onStarterClick:A,onClose:e,onCloseAndRestart:t,onRestart:u,onToggleHomeScreen:p}))}const pd=r.memo((0,r.forwardRef)(function(e,t){const n=fr(),{store:a}=ar(),{isOpen:s,messageItem:i}=(0,E.d4)(e=>e.iFramePanelState),o=i?.title||i?.source;return r.createElement(rd,{...e,ref:t,className:"WACIFramePanel",isOpen:s,onClickBack:()=>a.dispatch(Hn.closeIFramePanel()),title:o,labelBackButton:n.iframe_ariaClosePanel,eventName:"IFrame panel opened",eventDescription:"A user has opened the IFrame panel",testIdPrefix:qe.IFRAME},r.createElement("div",{className:"WACIFramePanel__Content"},i?.source&&r.createElement(Kc,{key:i?.source,source:i?.source,title:o})))}));const fd=r.memo(function({relatedSearchResult:e,citationItem:t}){const n=[];let a,s;if(e?.body){a=Dc(Pc(e.body)).replace("<em>","").replace("</em>","")}if(t?.text&&(s=Dc(Pc(t.text))),a&&s){const e=a.indexOf(s);-1!==e&&(n.push(r.createElement("span",{key:1},a.substring(0,e))),n.push(r.createElement("em",{key:2,className:"WAC__highlight"},a.substring(e,e+s.length))),n.push(r.createElement("span",{key:3},a.substring(e+s.length))))}return n.length?n:a.length?[r.createElement("span",{key:"search-string"},a)]:[r.createElement("span",{key:"citation-string"},s)]});const Ed=(0,r.forwardRef)(function(e,t){const n=fr(),{store:a}=ar(),{isOpen:s,citationItem:i,relatedSearchResult:o}=(0,E.d4)(e=>e.viewSourcePanelState);let c;return i&&(c=o?r.createElement(fd,{relatedSearchResult:o,citationItem:i}):i.text),r.createElement(rd,{...e,ref:t,className:"WACViewSourcePanel",isOpen:s,onClickBack:()=>a.dispatch(Hn.setViewSourcePanelIsOpen(!1)),title:i?.title,labelBackButton:n.general_ariaCloseInformationOverlay,eventName:"Search citation panel opened",eventDescription:"A user has opened the search citation panel",testIdPrefix:qe.CONVERSATIONAL_SEARCH_CITATION},r.createElement("div",{className:"WACViewSourcePanel__Content"},c))});function _d(e){const{isOpen:t,isMessageForInput:n,localMessageItem:i,eventName:o,eventDescription:c,overlayPanelName:l,className:d,title:u,useAITheme:h,requestFocus:g,onClickBack:m,onClose:p,onClickRestart:_,onCloseAndRestart:S,onPanelOpenEnd:v,onPanelCloseEnd:y,onPanelOpenStart:C,onPanelCloseStart:b,testIdPrefix:A,renderMessageComponent:M}=e,I=fr(),T=ar(),w=(0,E.d4)(e=>e.allMessagesByID[i?.fullMessageID]),N=!(e.showAnimations??!0),R=N?a.NONE:a.SLIDE_IN_FROM_BOTTOM,k=N?s.NONE:s.SLIDE_OUT_TO_BOTTOM;return r.createElement(Ge,{className:"WAC__overlay--covering",onOpenStart:C,onOpenEnd:v,onCloseStart:b,onCloseEnd:y,animationOnOpen:R,animationOnClose:k,shouldOpen:t,serviceManager:T,overlayPanelName:l},r.createElement(rd,{className:f("WACBodyAndFooterComponent",d),eventName:o,eventDescription:c,isOpen:t,title:u,disableAnimation:N,useAITheme:h,labelBackButton:I.general_returnToAssistant,onClickBack:m,onClickClose:p,onClickRestart:_,onClickCloseAndRestart:S,testIdPrefix:A},w&&r.createElement(Cc,{localMessageItem:i,fullMessage:w,isMessageForInput:n,requestFocus:g,renderMessageComponent:M})))}const Sd="WAC--standardWidth",vd="WAC--narrowWidth",yd="WAC--wideWidth";class Cd extends r.Component{constructor(){super(...arguments),this.state={closing:!1,open:this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow,modalPortalHostElement:null,numPanelsOpen:0,numPanelsAnimating:0,numPanelsCovering:0,isHydrationAnimationComplete:this.props.isHydrated,shouldAutoFocus:this.props.config.public.shouldTakeFocusIfOpensAutomatically,extraClassNames:[]},this.mainWindowRef=r.createRef(),this.containerRef=r.createRef(),this.botChatRef=r.createRef(),this.homeScreenInputRef=r.createRef(),this.disclaimerRef=r.createRef(),this.animationContainerRef=r.createRef(),this.iframePanelRef=r.createRef(),this.viewSourcePanelRef=r.createRef(),this.previousBodyVisibility=void 0,this.previousBodyPosition=void 0,this.onResize=()=>{let e;const t=this.containerRef?.current?.offsetHeight,n=this.containerRef?.current?.offsetWidth;e=n>=704?Fn.WIDE:n>=360?Fn.STANDARD:Fn.NARROW,this.props.serviceManager.store.dispatch(Hn.setAppStateValue("chatWidth",n)),this.props.serviceManager.store.dispatch(Hn.setAppStateValue("chatHeight",t)),this.props.serviceManager.store.dispatch(Hn.setAppStateValue("chatWidthBreakpoint",e))},this.onVisualViewportResize=()=>{this.updateFromVisualViewport()},this.updateFromVisualViewport=()=>{const e=this.props.serviceManager.container,{visualViewport:t}=window;if(t)e.style.setProperty("--cds-chat-viewport-height",`${t.height}px`),e.style.setProperty("--cds-chat-viewport-width",`${t.width}px`),e.style.setProperty("--cds-chat-viewport-offsetTop",`${t.offsetTop}px`),e.style.setProperty("--cds-chat-viewport-offsetLeft",`${t.offsetLeft}px`);else{const t="100vh";e.style.setProperty("--cds-chat-viewport-height",t),e.style.setProperty("--cds-chat-viewport-width","100vw"),e.style.setProperty("--cds-chat-viewport-offsetTop","0"),e.style.setProperty("--cds-chat-viewport-offsetLeft","0")}},this.setModalPortalHostElement=e=>{this.state.modalPortalHostElement!==e&&this.setState({modalPortalHostElement:e})},this.onSendInput=async(e,t,n)=>{const a=Un(this.props),{serviceManager:s}=this.props,i=s.store.getState(),{files:r}=$n(i);if(a)s.humanAgentService.sendMessageToAgent(e,r);else{const a=Ca(e);s.actions.sendWithCatch(a,t,{...n})}r.length&&s.store.dispatch(Hn.clearInputFiles(a))},this.onSendHomeButtonInput=e=>{const t=ya(e);this.props.serviceManager.actions.sendWithCatch(t,et.HOME_SCREEN_STARTER)},this.removeChatFromDom=()=>{this.containerRef.current.removeEventListener("animationend",this.removeChatFromDom),this.setState({open:!1,closing:!1})},this.onRestart=async()=>{await this.props.serviceManager.actions.restartConversation(),this.requestFocus()},this.onClose=async()=>this.doClose(!1),this.onCloseAndRestart=async()=>this.doClose(!0),this.onToggleHomeScreen=()=>{this.props.serviceManager.store.dispatch(Hn.toggleHomeScreen())},this.requestFocus=()=>{try{this.state.shouldAutoFocus&&!Le&&(this.getShowDisclaimer()?this.disclaimerRef.current&&or(this.disclaimerRef):this.getShowHomeScreen()?this.homeScreenInputRef.current&&this.homeScreenInputRef.current.takeFocus():this.props.iFramePanelState.isOpen?this.iframePanelRef.current&&this.iframePanelRef.current.requestFocus():this.botChatRef.current&&this.botChatRef.current.requestInputFocus())}catch(e){}},this.onUserTyping=e=>{this.props.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState.isConnected&&this.props.serviceManager.humanAgentService.userTyping(e)},this.onAcceptDisclaimer=()=>{this.props.serviceManager.store.dispatch(Hn.acceptDisclaimer())},this.onPanelOpenStart=e=>{this.setState(t=>({numPanelsOpen:t.numPanelsOpen+1,numPanelsAnimating:t.numPanelsAnimating+1,numPanelsCovering:t.numPanelsCovering+(e?1:0)}),this.requestFocus)},this.onPanelOpenEnd=()=>{this.setState(e=>({numPanelsAnimating:e.numPanelsAnimating-1}))},this.onPanelCloseStart=()=>{this.setState(e=>({numPanelsAnimating:e.numPanelsAnimating+1}),this.requestFocus)},this.onPanelCloseEnd=e=>{this.setState(t=>({numPanelsOpen:t.numPanelsOpen-1,numPanelsAnimating:t.numPanelsAnimating-1,numPanelsCovering:t.numPanelsCovering-(e?1:0)}))},this.onHydrationPanelClose=()=>{this.setState({isHydrationAnimationComplete:!0},this.requestFocus)}}componentDidMount(){const{config:e,serviceManager:t,mainWindowRef:n}=this.props,{public:a}=e;if(t.mainWindow=this,n.current=this,this.mainWindowObserver=new ResizeObserver(this.onResize),this.mainWindowObserver.observe(this.containerRef.current),Le&&!a.disableCustomElementMobileEnhancements){const{visualViewport:e}=window;e&&(e.addEventListener("resize",this.onVisualViewportResize),e.addEventListener("scroll",this.updateFromVisualViewport)),this.updateFromVisualViewport(),this.updateBody(!1)}this.containerRef.current.style.setProperty("--cds-chat-scrollbar-width",`${sr()}px`)}componentWillUnmount(){this.mainWindowObserver.unobserve(this.containerRef.current)}destroy(){if(Le&&!this.props.config.public.disableCustomElementMobileEnhancements){const{visualViewport:e}=window;e&&(e.removeEventListener("resize",this.onVisualViewportResize),e.removeEventListener("scroll",this.updateFromVisualViewport))}this.updateBody(!0)}componentDidUpdate(e,t){const n=this.props,a=this.state,{persistedToBrowserStorage:s,useCustomHostElement:i,isDestroyed:r}=n,{viewState:o}=s.launcherState,{open:c}=a,l=e.persistedToBrowserStorage.launcherState.viewState;o.mainWindow!==l.mainWindow&&(this.updateBody(!1),this.updateFromVisualViewport()),r&&!e.isDestroyed&&this.destroy(),e.isHydrated!==n.isHydrated&&n.isHydrated&&this.setState({isHydrationAnimationComplete:!0},()=>{requestAnimationFrame(()=>{this.requestFocus()})}),!o.mainWindow||l.mainWindow&&c?!o.mainWindow&&l.mainWindow&&t.open&&c&&(this.setState({closing:!0}),i?this.removeChatFromDom():(this.containerRef.current.addEventListener("animationend",this.removeChatFromDom),this.requestFocus())):this.setState({open:!0},()=>{this.requestFocus()}),n.config.public.shouldTakeFocusIfOpensAutomatically&&(e.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage||!n.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage||this.state.shouldAutoFocus?e.botMessageState.localMessageIDs.length>n.botMessageState.localMessageIDs.length&&this.state.shouldAutoFocus?this.setState({shouldAutoFocus:!1}):e.botMessageState.localMessageIDs.length<n.botMessageState.localMessageIDs.length&&!this.state.shouldAutoFocus&&this.setState({shouldAutoFocus:!0}):this.setState({shouldAutoFocus:!0}));const d=ga(n.botMessageState.localMessageIDs);if(d!==ga(e.botMessageState.localMessageIDs)&&a.shouldAutoFocus){const e=n.allMessageItemsByID[d],t=n.allMessagesByID[e?.fullMessageID];t?.ui_state_internal?.from_history||this.requestFocus()}}componentDidCatch(e,t){this.props.serviceManager.actions.errorOccurred(ea("MainWindow",e,t,!0))}updateBody(e){Pe&&!this.props.config.public.disableCustomElementMobileEnhancements&&ke&&((window.screen.width<=500||window.screen.height<=500)&&this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow&&!e?(this.previousBodyVisibility=document.body.style.getPropertyValue("visibility"),this.previousBodyPosition=document.body.style.getPropertyValue("position"),document.body.style.setProperty("visibility","hidden","important"),document.body.style.setProperty("position","fixed","important")):(document.body.style.setProperty("visibility",this.previousBodyVisibility),document.body.style.setProperty("position",this.previousBodyPosition)))}async doClose(e){const{serviceManager:t}=this.props;if(e){(await t.actions.changeView(je.LAUNCHER,{mainWindowCloseReason:at.MAIN_WINDOW_CLOSED_AND_RESTARTED})).mainWindow||await t.actions.restartConversation()}else await t.actions.changeView(je.LAUNCHER,{mainWindowCloseReason:at.DEFAULT_MINIMIZE})}getShowHomeScreen(){return this.props.homeScreenConfig.is_on&&this.props.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen&&!this.getShowDisclaimer()}getShowDisclaimer(){const e=ke?window.location.hostname:"localhost";return this.props.config.public.disclaimer?.is_on&&!this.props.persistedToBrowserStorage.chatState.disclaimersAccepted[e]}doAutoScroll(e){this.botChatRef?.current?.doAutoScroll(e)}getMessagesScrollBottom(){return this.botChatRef?.current?.getMessagesScrollBottom()}doScrollToMessage(e,t=!0){this.botChatRef.current?.doScrollToMessage(e,t)}getMessageInput(){return this.botChatRef.current?.getMessageInput()}getHomeScreenInput(){return this.homeScreenInputRef.current?.getMessageInput()}addClassName(e){this.setState(function(e){return t=>-1===t.extraClassNames.indexOf(e)?{extraClassNames:[...t.extraClassNames,e]}:null}(e))}removeClassName(e){this.setState(function(e){return t=>({extraClassNames:t.extraClassNames.filter(t=>t!==e)})}(e))}renderChat(){const{isHydrated:e,config:t,chatWidthBreakpoint:n}=this.props,a=this.state.numPanelsCovering>0&&t.public.layout?.hasContentMaxWidth&&n===Fn.WIDE;return r.createElement("div",{className:"WACWidget--content"},this.renderCustomPanel(),this.renderHydrationPanel(),e&&r.createElement(r.Fragment,null,this.renderDisclaimerPanel(),this.renderResponsePanel(),this.renderHomeScreenPanel(),this.renderIFramePanel(),this.renderViewSourcePanel(),a&&r.createElement("div",{className:"WACBackgroundCover"}),this.renderBotChat()))}renderBotChat(){const{botName:e,languagePack:t,config:n,serviceManager:a,botMessageState:s,humanAgentState:i,allMessageItemsByID:o,isHydrated:c,locale:l,theme:d,headerDisplayName:u,headerAvatarConfig:h}=this.props,{numPanelsAnimating:g,numPanelsOpen:m,isHydrationAnimationComplete:p}=this.state,f=$n(this.props),E=Wn(this.props),_=this.getShowDisclaimer();let S;return p?g>0?S=!1:m>0&&(S=!0):S=!0,r.createElement(ze,{className:"WACBotContainer",hidden:S},r.createElement(ad,{botName:e,headerDisplayName:u,headerAvatarConfig:h,ref:this.botChatRef,languagePack:t,config:n,serviceManager:a,onClose:this.onClose,onCloseAndRestart:this.onCloseAndRestart,messageState:s,onSendInput:e=>this.onSendInput(e,et.MESSAGE_INPUT),humanAgentState:i,agentDisplayState:E,allMessageItemsByID:o,onRestart:this.onRestart,isHydrated:c,isHydrationAnimationComplete:p&&!_,inputState:f,onToggleHomeScreen:this.onToggleHomeScreen,onUserTyping:this.onUserTyping,locale:l,useAITheme:d.theme===ot.CARBON_AI,carbonTheme:d.carbonTheme}))}renderInnerHydrationPanel(){const{botMessageState:e,serviceManager:t,languagePack:n,headerDisplayName:a,persistedToBrowserStorage:s,homeScreenConfig:i}=this.props,o=i.is_on&&!s.launcherState.hasSentNonWelcomeMessage;return r.createElement(id,{headerDisplayName:a,isHydrated:0===e.isHydratingCounter,serviceManager:t,onClose:this.onClose,languagePack:n,useHomeScreenVersion:o})}renderHydrationPanel(){const{botMessageState:e,serviceManager:t,catastrophicErrorType:n,persistedToBrowserStorage:i}=this.props,{viewState:o}=i.launcherState;return r.createElement(Ge,{onOpenStart:()=>this.onPanelOpenStart(!1),onCloseStart:this.onPanelCloseStart,onOpenEnd:this.onPanelOpenEnd,onCloseEnd:()=>{this.onHydrationPanelClose(),this.onPanelCloseEnd(!1)},animationOnOpen:a.NONE,animationOnClose:s.NONE,shouldOpen:e.isHydratingCounter>0&&!n&&o.mainWindow,shouldHide:!1,serviceManager:t,overlayPanelName:qe.HYDRATING},this.renderInnerHydrationPanel())}renderCatastrophicPanel(){const{serviceManager:e,botName:t,languagePack:n,headerDisplayName:i}=this.props;return r.createElement(Ge,{animationOnOpen:a.NONE,animationOnClose:s.NONE,shouldOpen:!0,serviceManager:e,overlayPanelName:qe.CATASTROPHIC},r.createElement(Gl,{onClose:this.onClose,headerDisplayName:i,languagePack:n,onRestart:this.onRestart,showHeader:!0,botName:t}))}renderDisclaimerPanel(){const{serviceManager:e,config:t}=this.props,n=this.getShowDisclaimer();return t.public.disclaimer?.is_on?r.createElement(Ge,{onOpenStart:()=>this.onPanelOpenStart(!1),onCloseStart:this.onPanelCloseStart,onOpenEnd:this.onPanelOpenEnd,onCloseEnd:()=>this.onPanelCloseEnd(!1),animationOnOpen:a.FADE_IN,animationOnClose:s.FADE_OUT,shouldOpen:n,serviceManager:e,overlayPanelName:qe.DISCLAIMER},r.createElement(hd,{onAcceptDisclaimer:this.onAcceptDisclaimer,onClose:this.onClose,disclaimerHTML:t.public.disclaimer?.disclaimerHTML,disclaimerAcceptButtonRef:this.disclaimerRef})):null}renderHomeScreenPanel(){const{isHydrationAnimationComplete:e}=this.state,t=this.getShowHomeScreen();return r.createElement(md,{onPanelOpenStart:()=>this.onPanelOpenStart(!1),onPanelOpenEnd:this.onPanelOpenEnd,onPanelCloseStart:this.onPanelCloseStart,onPanelCloseEnd:()=>this.onPanelCloseEnd(!1),onClose:this.onClose,onCloseAndRestart:this.onCloseAndRestart,onSendBotInput:e=>this.onSendInput(e,et.HOME_SCREEN_INPUT),onSendButtonInput:this.onSendHomeButtonInput,onRestart:this.onRestart,showHomeScreen:t,isHydrationAnimationComplete:e,homeScreenInputRef:this.homeScreenInputRef,onToggleHomeScreen:this.onToggleHomeScreen,requestFocus:this.requestFocus})}renderIFramePanel(){const{serviceManager:e,iFramePanelState:t}=this.props;return r.createElement(Ge,{className:"WAC__overlay--covering",onOpenStart:()=>this.onPanelOpenStart(!0),onCloseStart:this.onPanelCloseStart,onOpenEnd:this.onPanelOpenEnd,onCloseEnd:()=>this.onPanelCloseEnd(!0),animationOnOpen:a.SLIDE_IN_FROM_BOTTOM,animationOnClose:s.SLIDE_OUT_TO_BOTTOM,shouldOpen:t.isOpen,serviceManager:e,overlayPanelName:qe.IFRAME},r.createElement(pd,{useAITheme:this.props.theme.theme===ot.CARBON_AI,ref:this.iframePanelRef,onClickClose:this.onClose,onClickRestart:this.onRestart,onClickCloseAndRestart:this.onCloseAndRestart}))}renderViewSourcePanel(){const{serviceManager:e,viewSourcePanelState:t}=this.props;return r.createElement(Ge,{className:"WAC__overlay--covering",onOpenStart:()=>this.onPanelOpenStart(!0),onCloseStart:this.onPanelCloseStart,onOpenEnd:this.onPanelOpenEnd,onCloseEnd:()=>this.onPanelCloseEnd(!0),animationOnOpen:a.SLIDE_IN_FROM_BOTTOM,animationOnClose:s.SLIDE_OUT_TO_BOTTOM,shouldOpen:t.isOpen,serviceManager:e,overlayPanelName:qe.CONVERSATIONAL_SEARCH_CITATION},r.createElement(Ed,{ref:this.viewSourcePanelRef,onClickClose:this.onClose,onClickRestart:this.onRestart,onClickCloseAndRestart:this.onCloseAndRestart}))}renderCustomPanel(){return r.createElement(cd,{useAITheme:this.props.theme.theme===ot.CARBON_AI,onClose:this.onClose,onClickRestart:this.onRestart,onCloseAndRestart:this.onCloseAndRestart,onPanelOpenStart:()=>this.onPanelOpenStart(!0),onPanelOpenEnd:this.onPanelOpenEnd,onPanelCloseStart:this.onPanelCloseStart,onPanelCloseEnd:()=>this.onPanelCloseEnd(!0)})}renderResponsePanel(){if(!this.props.responsePanelState.localMessageItem)return null;const{isOpen:e,localMessageItem:t,isMessageForInput:n}=this.props.responsePanelState,a=(t?.item).panel,s=qe.PANEL_RESPONSE;return r.createElement(_d,{eventName:'"Show panel" opened',eventDescription:"Panel opened through panel response type",overlayPanelName:s,testIdPrefix:s,isOpen:e,isMessageForInput:n,localMessageItem:t,title:a?.title,showAnimations:a?.show_animations,useAITheme:this.props.theme.theme===ot.CARBON_AI,requestFocus:this.requestFocus,onClose:this.onClose,onClickRestart:this.onRestart,onCloseAndRestart:this.onCloseAndRestart,onClickBack:()=>this.props.serviceManager.store.dispatch(Hn.setResponsePanelIsOpen(!1)),onPanelOpenStart:()=>this.onPanelOpenStart(!0),onPanelOpenEnd:this.onPanelOpenEnd,onPanelCloseStart:this.onPanelCloseStart,onPanelCloseEnd:()=>{this.onPanelCloseEnd(!0),this.props.serviceManager.store.dispatch(Hn.setResponsePanelContent(null,!1))},renderMessageComponent:e=>r.createElement(Cl,{...e})})}renderWidget(){const{serviceManager:e,useCustomHostElement:t,locale:n,catastrophicErrorType:a,config:s,isHydrated:i,theme:o,chatWidthBreakpoint:c,layout:l,languagePack:d}=this.props,{closing:u,open:h,extraClassNames:g}=this.state,m=`WACLocale-${n||"en"}`,p=s.public.enableFocusTrap&&h&&!s.public.headerConfig.hideMinimizeButton,E=Boolean(p&&i),_=c===Fn.WIDE;return r.createElement(A,{active:E},r.createElement("div",{className:f("WACMainWindow","WACWidget__FocusTrapContainer",...g),ref:this.mainWindowRef},p&&r.createElement("div",{className:"WACWidget__FocusTrapGlass"}),r.createElement("div",{id:`WACWidget${e.namespace.suffix}`,className:f(`WACWidget ${m}`,{"WACWidget--rounded":o.corners===Xe.ROUND,"WACWidget--defaultElement":!t,"WACWidget--launched":!u,"WACWidget--closing":u,"WACWidget--closed":!h,"WACWidget--maxWidth":_&&l.hasContentMaxWidth,[vd]:c===Fn.NARROW,[Sd]:c===Fn.STANDARD,[yd]:_}),ref:this.containerRef},r.createElement(lr,null,r.createElement("h1",null,d.window_title)),a&&this.renderCatastrophicPanel(),!a&&r.createElement("div",{ref:this.animationContainerRef,className:"WACWidget__animationContainer",onScroll:()=>{0!==this.animationContainerRef.current.scrollTop&&(this.animationContainerRef.current.scrollTop=0)}},this.renderChat()),r.createElement("div",{className:"WACMainWindowModalHost",ref:this.setModalPortalHostElement}))))}render(){return r.createElement(Xo.Provider,{value:this.state.modalPortalHostElement},this.renderWidget())}}var bd=(0,E.Ng)(e=>e,null,null,{forwardRef:!0})(Cd);function Ad({serviceManager:e,hostElement:t,applicationStyles:n,fontStyles:a}){const{store:s}=e,{config:i}=s.getState();i.public.debug;const o=`${a?`${a} `:""}${n}`;return r.createElement(E.Kq,{store:s},r.createElement(Td,{serviceManager:e,hostElement:t,applicationStyles:o}))}const Md="undefined"!=typeof CSSStyleSheet?new CSSStyleSheet:null,Id="undefined"!=typeof CSSStyleSheet?new CSSStyleSheet:null;function Td({serviceManager:e,hostElement:t,applicationStyles:n}){const a=(0,E.d4)(e=>e.languagePack),s=(0,E.d4)(e=>e.cssVariableOverrides),i=(0,E.d4)(e=>e.theme),o=(0,E.d4)(e=>e.config),c=(0,E.d4)(e=>e.layout),l=(0,r.useRef)(null),{namespace:d}=e,{originalName:u}=d,h=(0,E.wA)(),[m,p]=(0,r.useState)({width:ke?window.innerWidth:0,height:ke?window.innerHeight:0}),_=(0,r.useMemo)(()=>function(e){let t="";const n=Object.keys(e).map(t=>{const n=e[t];return void 0===n?"":`${t.startsWith("$")?`${Zs}${t.replace(/^\$/,"")}`:`${Zs}chat-${t}`}:${n};`}).join("");n.length>0&&(t=`.WACContainer .cds--white, .WACContainer .cds--g10, .WACContainer .cds--g90, .WACContainer .cds--g100, :host{${n}}`);return t}(s),[s]),S=ke&&document.dir||"auto";return Er(()=>{if(!ke)return()=>{};const e=()=>{p({width:window.innerWidth,height:window.innerHeight})};window.addEventListener("resize",e);const t=()=>{h(Hn.setIsBrowserPageVisible("visible"===document.visibilityState))};return document.addEventListener("visibilitychange",t),()=>{window.removeEventListener("resize",e),document.removeEventListener("visibilitychange",t)}}),(0,r.useEffect)(()=>{if(!l.current)return;t&&(l.current.style.setProperty("height","100%","important"),l.current.style.setProperty("width","100%","important"));const e=l.current.getRootNode(),a=n||".WACContainer { visibility: hidden; }",s=_||"";if(e instanceof ShadowRoot)if(Md&&"replaceSync"in Md&&Id)Md.replaceSync(a),Id.replaceSync(s),e.adoptedStyleSheets=[Md,Id];else{if(!e.querySelector("style[data-base-styles]")){const t=document.createElement("style");t.dataset.appStyles="true",t.textContent=a,e.appendChild(t)}if(!e.querySelector("style[data-variables-custom]")){const t=document.createElement("style");t.dataset.overrideStyles="true",t.textContent=s,e.appendChild(t)}}},[n,l,_,t]),r.createElement("div",{className:"WACContainer","data-namespace":u,ref:l},r.createElement("div",{className:f("WACContainer--render",ti(i),{"WACContainer-disableMobileEnhancements":t&&o.public.disableCustomElementMobileEnhancements,"WAC-isPhone":Be&&!o.public.disableCustomElementMobileEnhancements,"WAC-isPhonePortraitMode":He&&!o.public.disableCustomElementMobileEnhancements,"WAC--frameless":!c?.showFrame}),dir:S},r.createElement(xr.Provider,{value:m},r.createElement(nr.Provider,{value:e},r.createElement(g.Lq,{value:e.intl},r.createElement(pr.Provider,{value:a},r.createElement(mr,null,r.createElement(wd,{serviceManager:e,hostElement:t}))))))))}function wd(e){const{hostElement:t,serviceManager:n}=e,a=(0,E.d4)(e=>e.launcher.config.is_on),s=(0,r.useRef)(),i=(0,g.tz)(),o=n.namespace.originalName,c=o?"window_ariaChatRegionNamespace":"window_ariaChatRegion",l=i.formatMessage({id:c},{namespace:o});return Er(()=>{n.appWindow={requestFocus:function(){try{const{persistedToBrowserStorage:e}=n.store.getState(),{viewState:t}=e.launcherState;t.mainWindow&&s.current?.requestFocus()}catch(e){}}}}),r.createElement("div",{className:"WACWidget__regionContainer",role:"region","aria-label":l},r.createElement(bd,{mainWindowRef:s,useCustomHostElement:Boolean(t),serviceManager:n}),a&&r.createElement(kr,null))}function Nd({hostElement:e,children:t}){return ee.createPortal(t,e)}const Rd=r.memo(function({chatInstance:e,renderUserDefinedResponse:t,userDefinedResponseEventsBySlot:n}){return t?Object.entries(n).map(([n,a])=>{const{element:s}=a;return s?r.createElement(Nd,{key:n,hostElement:s},t(a,e)):null}):null});function kd({hostElement:e,children:t}){return ee.createPortal(t,e)}const xd=r.memo(function({chatInstance:e,renderResponseMap:t}){return r.createElement(r.Fragment,null,Object.keys(e.writeableElements).map(n=>{const a=t[n];return a?r.createElement(kd,{key:n,hostElement:e.writeableElements[n]},a):null}))});async function Od(e,t){e&&(e.instance&&(e.instance.destroy(),await Yn(0)),e.shouldDestroy=!0,e.instance=null),t(null),await Yn(0)}const Pd=r.memo(function({config:e,onBeforeRender:t,onAfterRender:n,renderUserDefinedResponse:a,renderWriteableElements:s,container:o,setParentInstance:c,element:l}){const[u,h]=(0,r.useState)(null),[g,m]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),E=e=>{h(e),c?.(e)},[_,S]=(0,r.useState)({}),v=(0,r.useRef)(null),y=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const a=y.current;if(y.current=e,!(0,i.A)(a,e)){const a={instance:null,shouldDestroy:!1,config:e};return e&&async function({managedWebChatRef:e,managedWebChat:t,render:n,setInstance:a,onBeforeRender:s,onAfterRender:i,setUserDefinedResponseEventsBySlot:r,element:o}){if(await Od(e.current,a),e.current=t,t.shouldDestroy)return void await Od(t,a);const c=await async function(e,t,n,a){const s=(0,d.A)(e);if(!s.messaging?.customSendMessage)throw new Error("You must set messaging.customSendMessage in your configuration object.");ke&&(document.location.protocol,document.compatMode);const{onError:i,...r}=s;return new(await t(r))(r,a,{onError:i,render:n})}(t.config,()=>Promise.resolve(er),Promise.resolve(n),o),l=await c.start();(function(e,t){function n(e){t(t=>({...t,[e.data.slot]:{fullMessage:e.data.fullMessage,messageItem:e.data.message,element:e.data.element}}))}function a(e){if("complete_item"in e.data.chunk){const n=e.data.chunk.complete_item;t(t=>({...t,[e.data.slot]:{messageItem:n,element:e.data.element}}))}else if("partial_item"in e.data.chunk){const n=e.data.chunk.partial_item;t(t=>({...t,[e.data.slot]:{partialItems:[...t[e.data.slot]?.partialItems||[],n],element:e.data.element}}))}}function s(){t({})}e.on({type:Qe.CHUNK_USER_DEFINED_RESPONSE,handler:a}),e.on({type:Qe.USER_DEFINED_RESPONSE,handler:n}),e.on({type:Qe.RESTART_CONVERSATION,handler:s})})(l,r),s?.(l),await l.render(),i?.(l),a(l),t.instance=l,t.shouldDestroy&&await Od(t,a)}({managedWebChatRef:v,managedWebChat:a,render:async function({serviceManager:e}){const t=await async function(){const[e,t]=await Promise.all([Dd(),Ld()]);return t+e}();e.container=o,e.customHostElement?(o.style.setProperty("width","100%","important"),o.style.setProperty("height","100%","important")):(o.style.setProperty("width","0","important"),o.style.setProperty("height","0","important")),f(t),m({serviceManager:e}),await Yn(0)},setInstance:E,onBeforeRender:t,onAfterRender:n,setUserDefinedResponseEventsBySlot:S,element:l}),()=>{Od(a,E),y.current=null}}},[e,o]),g&&u?r.createElement(r.Fragment,null,r.createElement(Ad,{serviceManager:g.serviceManager,hostElement:g.serviceManager.customHostElement,applicationStyles:p}),a&&r.createElement(Rd,{chatInstance:u,renderUserDefinedResponse:a,userDefinedResponseEventsBySlot:_}),s&&r.createElement(xd,{chatInstance:u,renderResponseMap:s})):null}),Dd=async()=>{const{default:e}=await Promise.all([n.e(3559),n.e(241),n.e(3025)]).then(n.bind(n,20811));return e},Ld=async()=>{const{default:e}=await Promise.all([n.e(3559),n.e(241),n.e(3025)]).then(n.bind(n,58972));return e}}}]);